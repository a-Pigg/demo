"use strict";(self["webpackChunk_4010_assetweb"]=self["webpackChunk_4010_assetweb"]||[]).push([[3096],{42041:function(e,t,i){i.d(t,{Z:function(){return d}});var s=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{top:"0","custom-class":"dialog",fullscreen:"",visible:e.dialogVisible,"show-close":!1},on:{"update:visible":function(t){e.dialogVisible=t},opened:e.dialogVisibleOpened,close:e.dialogVisibleClose,closed:e.dialogVisibleClosed}},[t("div",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[t("div",{staticClass:"left"},[t("el-button",{attrs:{type:"primary",icon:"el-icon-arrow-left",circle:""},on:{click:function(t){e.dialogVisible=!1}}}),t("span",{staticClass:"title"},[e._v(e._s(e.title))])],1),t("div",{staticClass:"right"},[t("el-button",{attrs:{size:"small"},on:{click:e.cancalFrom}},[e._v(e._s(e.$t("h.cancelBtn")))]),t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.sbumitForm}},[e._v(e._s(e.$t("h.confirmBtn")))])],1)]),t("div",{ref:"dialogbodyRef",staticClass:"dialog-body"},[t("div",{staticClass:"content",style:"width:"+e.contentWidth},[t("div",{staticClass:"form-label"},[e._t("form")],2),t("div",{staticClass:"table-label"},[t("div",{staticClass:"table-label-head"},[e._t("btns")],2),t("div",{staticClass:"table-label-content"},[e._t("table")],2)])])])])},a=[],o=i(63042),n={data(){return{}},props:{title:{type:String,default:o.a.t("h.title12")},newBillsDialogVisible:{type:Boolean,default:!1},contentWidth:{type:String,default:"950px"}},computed:{dialogVisible:{get(){return this.newBillsDialogVisible},set(e){this.$emit("update:newBillsDialogVisible",e)}}},methods:{cancalFrom(){this.dialogVisible=!1},sbumitForm(){this.$emit("sbumitForm")},dialogVisibleClose(){this.$emit("close"),this.$refs.dialogbodyRef.scrollTop=0},dialogVisibleClosed(){this.$emit("closed")},dialogVisibleOpened(){this.$emit("opened")}}},r=n,l=i(1001),h=(0,l.Z)(r,s,a,!1,null,"130c4832",null),d=h.exports},98884:function(e,t,i){i.d(t,{Z:function(){return d}});var s=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{top:"0","custom-class":"dialog","show-close":!1,visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t},closed:e.dialogVisibleClosed}},[t("div",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[t("div",{staticClass:"left"},[t("span",[e._v(e._s(e.title))])]),t("div",{staticClass:"right"},[t("i",{staticClass:"el-icon-close",on:{click:function(t){e.dialogVisible=!1}}})])]),t("div",{staticClass:"dialog-body"},[t("ds-table",{attrs:{tableData:e.deleteErrorData,columns:e.deleteColumns,tableConfig:e.errorTableConfig}})],1)])},a=[],o=i(60983),n={components:{DsTable:o.Z},data(){return{errorTableConfig:{index:!0}}},props:{deleteDialogVisible:{type:Boolean,default:!1},deleteErrorData:{type:Array,default:()=>[]},deleteColumns:{type:Array},title:{type:String,default:"删除失败详情"}},computed:{dialogVisible:{get(){return this.deleteDialogVisible},set(e){this.$emit("update:deleteDialogVisible",e)}}},methods:{dialogVisibleClosed(){this.$emit("closed")}}},r=n,l=i(1001),h=(0,l.Z)(r,s,a,!1,null,"3e3e8f93",null),d=h.exports},93082:function(e,t,i){i.d(t,{Z:function(){return h}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"ds-pagination"},[t("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},a=[],o={name:"DsPagination",data(){return{}},props:{total:{required:!0,type:Number},pageSizes:{type:Array,default(){return[20,50,100]}},page:{type:Number,default:1},limit:{type:Number,default:20},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0}},computed:{currentPage:{get(){return this.page},set(e){this.$emit("update:page",e)}},pageSize:{get(){return this.limit},set(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange(e){this.$emit("pagination",{page:this.currentPage,limit:e})},handleCurrentChange(e){this.$emit("pagination",{page:e,limit:this.pageSize})}}},n=o,r=i(1001),l=(0,r.Z)(n,s,a,!1,null,"2377c114",null),h=l.exports},92003:function(e,t,i){i.d(t,{Z:function(){return h}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"left-panel"},[e._t("default")],2)},a=[],o={name:"DsQueryFormLeftPanel"},n=o,r=i(1001),l=(0,r.Z)(n,s,a,!1,null,"71d76034",null),h=l.exports},89782:function(e,t,i){i.d(t,{Z:function(){return h}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"right-panel"},[e._t("default")],2)},a=[],o={name:"DsQueryFormRightPanel"},n=o,r=i(1001),l=(0,r.Z)(n,s,a,!1,null,"c6443ba6",null),h=l.exports},19698:function(e,t,i){i.d(t,{Z:function(){return h}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"ds-query-form"},[e._t("default")],2)},a=[],o={name:"DsQueryForm"},n=o,r=i(1001),l=(0,r.Z)(n,s,a,!1,null,"6c8bfb78",null),h=l.exports},91521:function(e,t,i){i.r(t),i.d(t,{default:function(){return C}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"device"},[t("el-card",{staticClass:"device-card"},[t("div",{staticClass:"device-card-header",attrs:{slot:"header"},slot:"header"},[t("ds-query-form",[t("ds-query-form-left-panel",[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.createDevice}},[e._v(e._s(e.$t("h.newBtn")))]),t("el-dropdown",{attrs:{trigger:"click"}},[t("el-button",{attrs:{size:"small"}},[e._v(" "+e._s(e.$t("h.editBtn"))),t("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{nativeOn:{click:function(t){return e.editBaseInfo.apply(null,arguments)}}},[e._v(e._s(e.$t("h.editBtn")+e.$t("h.tips230")))]),t("el-dropdown-item",{nativeOn:{click:function(t){return e.editWareInfo.apply(null,arguments)}}},[e._v(e._s(e.$t("h.editBtn")+e.$t("h.tips231")))]),t("el-dropdown-item",{nativeOn:{click:function(t){return e.deleteDevice.apply(null,arguments)}}},[e._v(e._s(e.$t("h.delBtn")))])],1)],1)],1),t("ds-query-form-right-panel")],1)],1),t("div",{staticClass:"device-card-content"},[t("div",{staticClass:"device-filter"}),t("div",{staticClass:"device-table"},[t("ds-table",{ref:"deviceTableRef",attrs:{loading:e.loading,columns:e.columns,tableConfig:e.devicesConfig,tableData:e.devices,rowKey:e=>e.equipmentId,onlyKey:"equipmentId"},on:{handleSelectionChange:e.handleSelectionChange},scopedSlots:e._u([{key:"ant",fn:function({scope:i}){return[t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return e.checkAntennaBinding(i.row)}}},[e._v(" "+e._s(e.$t("h.antennaBindingDetails"))+" ")]),"1"==i.row.type?t("span",{staticClass:"line"}):e._e(),"1"==i.row.type?t("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-tickets"},on:{click:function(t){return e.autoCheck(i.row)}}},[e._v(e._s(e.$t("h.automaticInventory")))]):e._e()]}}])})],1),t("div",{staticClass:"device-pagination"},[t("ds-pagination",{attrs:{small:"",total:e.total,page:e.paginationForm.currentPage,limit:e.paginationForm.pageSize},on:{"update:page":function(t){return e.$set(e.paginationForm,"currentPage",t)},"update:limit":function(t){return e.$set(e.paginationForm,"pageSize",t)},pagination:e.getDevice}})],1)])]),t("new-bills-dialog",{staticClass:"new-bill-dialog",attrs:{title:e.newBillTitle,newBillsDialogVisible:e.newBillsDialogVisible},on:{"update:newBillsDialogVisible":function(t){e.newBillsDialogVisible=t},"update:new-bills-dialog-visible":function(t){e.newBillsDialogVisible=t},opened:e.newBillsDialogOpened,close:e.newBillsDialogClose,sbumitForm:e.sbumitDeviceForm}},[t("template",{slot:"form"},[t("el-form",{ref:"deviceFormRef",attrs:{"label-width":"130px",model:e.deviceForm,rules:e.deviceFormRules}},[t("el-form-item",{attrs:{label:e.$t("h.formTips30"),prop:"name"}},[t("el-input",{attrs:{placeholder:e.$t("h.tips3")+e.$t("h.formTips30")},model:{value:e.deviceForm.name,callback:function(t){e.$set(e.deviceForm,"name",t)},expression:"deviceForm.name"}})],1),t("el-form-item",{attrs:{label:e.$t("h.formTips37"),prop:"type"}},[t("el-radio-group",{model:{value:e.deviceForm.type,callback:function(t){e.$set(e.deviceForm,"type",t)},expression:"deviceForm.type"}},[t("el-radio",{attrs:{label:0}},[e._v(" "+e._s(e.$t("h.title128")))]),t("el-radio",{attrs:{label:1}},[e._v(" "+e._s(e.$t("h.title129")))]),t("el-radio",{attrs:{label:2}},[e._v(" "+e._s(e.$t("h.title130")))])],1)],1),t("el-form-item",{attrs:{label:e.$t("h.formTips31"),prop:"cloudNumber"}},[t("el-input",{attrs:{placeholder:e.$t("h.tips3")+e.$t("h.formTips31")},model:{value:e.deviceForm.cloudNumber,callback:function(t){e.$set(e.deviceForm,"cloudNumber",t)},expression:"deviceForm.cloudNumber"}})],1),t("el-form-item",{attrs:{label:e.$t("h.tips48"),prop:"model"}},[t("el-input",{attrs:{placeholder:e.$t("h.tips3")+e.$t("h.tips48")},model:{value:e.deviceForm.model,callback:function(t){e.$set(e.deviceForm,"model",t)},expression:"deviceForm.model"}})],1),1==e.deviceForm.type?t("el-form-item",{attrs:{label:e.$t("h.formTips32"),prop:"timedInterval"}},[t("el-input-number",{attrs:{size:"small",min:1,"controls-position":"right"},model:{value:e.deviceForm.timedInterval,callback:function(t){e.$set(e.deviceForm,"timedInterval",t)},expression:"deviceForm.timedInterval"}}),t("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(e.$t("h.title131")))])],1):e._e(),1==e.deviceForm.type?t("el-form-item",{attrs:{label:e.$t("h.formTips33"),prop:"inventoryDuration"}},[t("el-input-number",{attrs:{size:"small",min:30,"controls-position":"right"},model:{value:e.deviceForm.inventoryDuration,callback:function(t){e.$set(e.deviceForm,"inventoryDuration",t)},expression:"deviceForm.inventoryDuration"}}),t("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(e.$t("h.second")))])],1):e._e(),2!=e.deviceForm.type?t("el-form-item",{attrs:{label:"IP",prop:"ip"}},[t("el-input",{attrs:{placeholder:e.$t("h.tips3")+"IP"},model:{value:e.deviceForm.ip,callback:function(t){e.$set(e.deviceForm,"ip",t)},expression:"deviceForm.ip"}})],1):e._e(),0==e.deviceForm.type?t("el-form-item",{attrs:{label:e.$t("h.formTips34"),prop:"port"}},[t("el-input",{attrs:{placeholder:e.$t("h.tips3")+e.$t("h.formTips34")},model:{value:e.deviceForm.port,callback:function(t){e.$set(e.deviceForm,"port",t)},expression:"deviceForm.port"}})],1):e._e(),1==e.deviceForm.type?t("el-form-item",{attrs:{label:e.$t("h.formTips35"),prop:"antLength"}},[t("el-input-number",{attrs:{"controls-position":"right","step-strictly":"",min:1},on:{change:e.onChangeAntLength},model:{value:e.deviceForm.antLength,callback:function(t){e.$set(e.deviceForm,"antLength",t)},expression:"deviceForm.antLength"}})],1):e._e(),t("el-form-item",{attrs:{label:e.$t("h.formTips36"),prop:"warehouseIds"}},[t("el-select",{directives:[{name:"load-more",rawName:"v-load-more",value:{options:e.wareData,modelField:"_id",searchField:"andLike",func:"S0003",userInfo:e.userInfo},expression:"{\n              options: wareData,\n              modelField: '_id',\n              searchField: 'andLike',\n              func: 'S0003',\n              userInfo: userInfo,\n            }"}],staticStyle:{width:"100%"},attrs:{placeholder:e.$t("h.tips4")+e.$t("h.formTips36"),clearable:"",filterable:"",multiple:"","filter-method":()=>{}},on:{"remove-tag":e.onRemoveWareTag,clear:e.onClearWare},model:{value:e.deviceForm.warehouseIds,callback:function(t){e.$set(e.deviceForm,"warehouseIds",t)},expression:"deviceForm.warehouseIds"}},e._l(e.wareData,(function(i){return t("el-option",{key:i._id,attrs:{label:i.warehouseName,value:i._id}},[t("span",[e._v(" "+e._s(i.code)+" - "+e._s(i.warehouseName)+" ")])])})),1)],1)],1)],1),t("template",{slot:"table"},[1==e.deviceForm.type&&e.deviceForm.warehouseIds.length?t("div",{staticClass:"antenna-area"},[t("h5",[e._v(e._s(e.$t("h.title132")))]),t("el-form",{ref:"antennaFormRef",attrs:{"label-width":"100px",model:e.antennaForm}},e._l(e.wares,(function(i){return t("el-form-item",{key:i._id,attrs:{label:i.warehouseName,prop:`${i._id}`}},[t("el-select",{attrs:{placeholder:e.$t("h.tips4"),multiple:"",clearable:"",filterable:""},on:{change:e.onChangeAntenna,clear:e.onClearAntenna,"remove-tag":e.onRemoveAntennaTag},model:{value:e.antennaForm[i._id],callback:function(t){e.$set(e.antennaForm,i._id,t)},expression:"antennaForm[item._id]"}},e._l(e.deviceAntenna,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value,disabled:e.disabled}})})),1)],1)})),1)],1):e._e()])],2),t("el-dialog",{attrs:{top:"0","custom-class":"dialogAntenna","show-close":!1,visible:e.dialogAntennaVisible},on:{"update:visible":function(t){e.dialogAntennaVisible=t},closed:e.dialogAntennaVisibleClosed}},[t("div",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[t("div",{staticClass:"left"},[t("span",[e._v(e._s(e.$t("h.antennaBindingDetails")))])]),t("div",{staticClass:"right"},[t("i",{staticClass:"el-icon-close",on:{click:function(t){e.dialogAntennaVisible=!1}}})])]),t("div",{staticClass:"dialog-body"},[t("ds-table",{attrs:{columns:e.antennaColumns,tableConfig:{},tableData:e.antennaBindingData,rowKey:e=>e.warehouse_id}})],1)]),t("ds-delete-detail",{attrs:{deleteDialogVisible:e.deleteDialogVisible,deleteColumns:e.deleteColumns,deleteErrorData:e.deleteErrorData},on:{"update:deleteDialogVisible":function(t){e.deleteDialogVisible=t},"update:delete-dialog-visible":function(t){e.deleteDialogVisible=t},closed:e.deleteDialogVisibleClosed}}),t("new-bills-dialog",{staticClass:"base-dialog",attrs:{title:e.$t("h.editBtn")+e.$t("h.tips230"),newBillsDialogVisible:e.baseDialogVisible},on:{"update:newBillsDialogVisible":function(t){e.baseDialogVisible=t},"update:new-bills-dialog-visible":function(t){e.baseDialogVisible=t},opened:e.baseDialogOpened,close:e.baseDialogClose,sbumitForm:e.sbumitBaseForm}},[t("template",{slot:"form"},[t("el-form",{ref:"baseFormRef",attrs:{"label-width":"130px",model:e.baseForm,rules:e.baseFormRules}},[t("el-form-item",{attrs:{label:e.$t("h.formTips30"),prop:"name"}},[t("el-input",{attrs:{placeholder:e.$t("h.tips3")+e.$t("h.formTips30")},model:{value:e.baseForm.name,callback:function(t){e.$set(e.baseForm,"name",t)},expression:"baseForm.name"}})],1),t("el-form-item",{attrs:{label:e.$t("h.formTips37"),prop:"type"}},[t("el-radio-group",{model:{value:e.baseForm.type,callback:function(t){e.$set(e.baseForm,"type",t)},expression:"baseForm.type"}},[t("el-radio",{attrs:{label:0}},[e._v(e._s(e.$t("h.title128")))]),t("el-radio",{attrs:{label:1}},[e._v(e._s(e.$t("h.title129")))]),t("el-radio",{attrs:{label:2}},[e._v(e._s(e.$t("h.title130")))])],1)],1),t("el-form-item",{attrs:{label:e.$t("h.formTips31"),prop:"cloudNumber"}},[t("el-input",{attrs:{disabled:"",placeholder:e.$t("h.tips3")+e.$t("h.formTips31")},model:{value:e.baseForm.cloudNumber,callback:function(t){e.$set(e.baseForm,"cloudNumber",t)},expression:"baseForm.cloudNumber"}})],1),t("el-form-item",{attrs:{label:e.$t("h.tips48"),prop:"model"}},[t("el-input",{attrs:{placeholder:e.$t("h.tips3")+e.$t("h.tips48")},model:{value:e.baseForm.model,callback:function(t){e.$set(e.baseForm,"model",t)},expression:"baseForm.model"}})],1),1==e.baseForm.type?t("el-form-item",{attrs:{label:e.$t("h.formTips32"),prop:"timedInterval"}},[t("el-input-number",{attrs:{size:"small",min:1,"controls-position":"right"},model:{value:e.baseForm.timedInterval,callback:function(t){e.$set(e.baseForm,"timedInterval",t)},expression:"baseForm.timedInterval"}}),t("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(e.$t("h.title131")))])],1):e._e(),1==e.baseForm.type?t("el-form-item",{attrs:{label:e.$t("h.formTips33"),prop:"inventoryDuration"}},[t("el-input-number",{attrs:{size:"small",min:30,"controls-position":"right"},model:{value:e.baseForm.inventoryDuration,callback:function(t){e.$set(e.baseForm,"inventoryDuration",t)},expression:"baseForm.inventoryDuration"}}),t("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(e.$t("h.second")))])],1):e._e(),2!=e.baseForm.type?t("el-form-item",{attrs:{label:"IP",prop:"ip"}},[t("el-input",{attrs:{placeholder:e.$t("h.tips3")+"IP"},model:{value:e.baseForm.ip,callback:function(t){e.$set(e.baseForm,"ip",t)},expression:"baseForm.ip"}})],1):e._e(),0==e.baseForm.type?t("el-form-item",{attrs:{label:e.$t("h.formTips34"),prop:"port"}},[t("el-input",{attrs:{placeholder:e.$t("h.tips3")+e.$t("h.formTips34")},model:{value:e.baseForm.port,callback:function(t){e.$set(e.baseForm,"port",t)},expression:"baseForm.port"}})],1):e._e(),1==e.baseForm.type?t("el-form-item",{attrs:{label:e.$t("h.formTips35"),prop:"antLength"}},[t("el-input-number",{attrs:{"controls-position":"right","step-strictly":"",min:1},model:{value:e.baseForm.antLength,callback:function(t){e.$set(e.baseForm,"antLength",t)},expression:"baseForm.antLength"}})],1):e._e()],1)],1)],2),t("new-bills-dialog",{staticClass:"ware-dialog",attrs:{title:e.$t("h.editBtn")+e.$t("h.tips231"),newBillsDialogVisible:e.wareDialogVisible},on:{"update:newBillsDialogVisible":function(t){e.wareDialogVisible=t},"update:new-bills-dialog-visible":function(t){e.wareDialogVisible=t},close:e.wareDialogClose,opened:e.wareDialogOpened,sbumitForm:e.sbumitEditWareForm}},[t("template",{slot:"form"},[t("el-form",{ref:"editAreaFormRef",attrs:{"label-width":"130px",model:e.editWareForm,rules:e.editWareFormRules}},[t("el-form-item",{attrs:{label:e.$t("h.formTips36"),prop:"warehouseIds"}},[t("el-select",{directives:[{name:"load-more",rawName:"v-load-more",value:{options:e.wareData,modelField:"ids",model:e.editWareForm.warehouseIds.join(","),searchField:"andLike",func:"S0003",userInfo:e.userInfo},expression:"{\n              options: wareData,\n              modelField: 'ids',\n              model: editWareForm.warehouseIds.join(','),\n              searchField: 'andLike',\n              func: 'S0003',\n              userInfo: userInfo,\n            }"}],staticStyle:{width:"100%"},attrs:{placeholder:e.$t("h.tips4")+e.$t("h.formTips36"),clearable:"",filterable:"",multiple:"","filter-method":()=>{}},on:{"remove-tag":e.onRemoveWareTag,clear:e.onClearWare},model:{value:e.editWareForm.warehouseIds,callback:function(t){e.$set(e.editWareForm,"warehouseIds",t)},expression:"editWareForm.warehouseIds"}},e._l(e.wareData,(function(i){return t("el-option",{key:i._id,attrs:{label:i.warehouseName,value:i._id}},[t("span",[e._v(" "+e._s(i.code)+" - "+e._s(i.warehouseName)+" ")])])})),1)],1)],1),1==e.selectDevices.length&&1==e.selectDevices[0].type&&e.editWareForm.warehouseIds.length?t("el-form",{ref:"antennaFormRef",attrs:{"label-width":"130px",model:e.antennaForm}},e._l(e.editAntWares,(function(i){return t("el-form-item",{key:i._id,attrs:{label:i.warehouseName,prop:`${i._id}`}},[t("el-select",{attrs:{placeholder:e.$t("h.tips4"),multiple:"",clearable:"",filterable:""},on:{change:e.onChangeAntenna,clear:e.onClearAntenna,"remove-tag":e.onRemoveAntennaTag},model:{value:e.antennaForm[i._id],callback:function(t){e.$set(e.antennaForm,i._id,t)},expression:"antennaForm[item._id]"}},e._l(e.deviceAntenna,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value,disabled:e.disabled}})})),1)],1)})),1):e._e()],1)],2),t("auto-check-dialog",{attrs:{visible:e.autoVisible,deviceInfo:e.deviceInfo},on:{"update:visible":function(t){e.autoVisible=t}}})],1)},a=[],o=(i(57658),function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{top:"0","custom-class":"autoDialog","show-close":!1,visible:e.autoDialogVisible},on:{"update:visible":function(t){e.autoDialogVisible=t},closed:e.autoDialogVisibleClosed,opened:e.autoDialogVisibleOpened}},[t("div",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[t("div",{staticClass:"left"},[t("span",[e._v(e._s(e.$t("h.automaticInventory")))]),t("span",{directives:[{name:"show",rawName:"v-show",value:null!=e.timer,expression:"timer != null"}],staticClass:"checking"},[e._v(e._s(e.$t("h.title133"))),t("i",{staticClass:"el-icon-loading"})])]),t("div",{staticClass:"right"},[t("i",{staticClass:"el-icon-close",on:{click:function(t){e.autoDialogVisible=!1}}})])]),t("div",{staticClass:"dialog-body"},[t("div",{staticClass:"content"},[t("el-tabs",{on:{"tab-click":e.assetTabsClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:`${e.$t("h.title134")}(${e.notTotal})`,name:"not"}},[t("div",{staticClass:"table"},[t("ds-table",{ref:"notTableRef",attrs:{loading:e.notLoading,rowKey:e=>e._id,tableConfig:{},columns:e.columns,tableData:e.notAssets}})],1),t("div",{staticClass:"pagination"},[t("ds-pagination",{attrs:{small:"",total:e.notTotal,page:e.notPaginationForm.currentPage,limit:e.notPaginationForm.pageSize},on:{"update:page":function(t){return e.$set(e.notPaginationForm,"currentPage",t)},"update:limit":function(t){return e.$set(e.notPaginationForm,"pageSize",t)},pagination:e.getNotAssets}})],1)]),t("el-tab-pane",{attrs:{label:`${e.$t("h.title135")}(${e.thenTotal})`,name:"then"}},[t("div",{staticClass:"table"},[t("ds-table",{ref:"notTableRef",attrs:{loading:e.thenLoading,rowKey:e=>e._id,tableConfig:{},columns:e.columns,tableData:e.thenAssets}})],1),t("div",{staticClass:"pagination"},[t("ds-pagination",{attrs:{small:"",total:e.thenTotal,page:e.thenPaginationForm.currentPage,limit:e.thenPaginationForm.pageSize},on:{"update:page":function(t){return e.$set(e.thenPaginationForm,"currentPage",t)},"update:limit":function(t){return e.$set(e.thenPaginationForm,"pageSize",t)},pagination:e.getThenAssets}})],1)]),t("el-tab-pane",{attrs:{label:`${e.$t("h.title136")}(${e.otherTotal})`,name:"other"}},[t("div",{staticClass:"table"},[t("ds-table",{ref:"otherTableRef",attrs:{loading:e.otherLoading,tableConfig:{},columns:e.columns,tableData:e.otherAssets}})],1),t("div",{staticClass:"pagination"},[t("ds-pagination",{attrs:{small:"",total:e.otherTotal,page:e.otherPaginationForm.currentPage,limit:e.otherPaginationForm.pageSize},on:{"update:page":function(t){return e.$set(e.otherPaginationForm,"currentPage",t)},"update:limit":function(t){return e.$set(e.otherPaginationForm,"pageSize",t)},pagination:e.getOtherAssets}})],1)])],1)],1)])])}),n=[],r=i(60983),l=i(93082),h=i(20629),d=i(79992),c=i(76080),m={components:{DsTable:r.Z,DsPagination:l.Z},data(){return{timer:null,timer2:null,activeName:"not",notTotal:0,notLoading:!1,notPaginationForm:{currentPage:1,pageSize:20},notAssets:[],thenTotal:0,thenLoading:!1,thenPaginationForm:{currentPage:1,pageSize:20},thenAssets:[],otherLoading:!1,otherTotal:0,otherPaginationForm:{currentPage:1,pageSize:20},otherAssets:[],allEpc:[],usedAnts:[]}},props:{visible:{type:Boolean,default:!1},deviceInfo:{type:Object,default:()=>{}}},computed:{...(0,h.rn)(["userInfo","assetTableHeader","stateListData"]),autoDialogVisible:{get(){return this.visible},set(e){this.$emit("update:visible",e)}},columns(){let e=[];return this.assetTableHeader.forEach((t=>{t.show&&("photo"==t.attr?e.push({type:"image",prop:t.attr,label:t.label,fixed:t.fixed,width:(0,d.Uh)(t.label)}):"goalQuota"==t.attr?e.push({prop:t.attr,label:t.label,fixed:t.fixed,width:(0,d.Uh)(t.label),showOverflowTooltip:!0,formatter:e=>100*e[t.attr]+"%"}):"file"==t.attr?e.push({prop:t.attr,label:t.label,fixed:t.fixed,width:(0,d.Uh)(t.label),slotName:"file"}):"assetCode"==t.attr?e.push({type:"detail",prop:t.attr,label:t.label,fixed:t.fixed,width:(0,d.Uh)(t.label),showOverflowTooltip:!0}):"state"==t.attr?e.push({type:"assetState",prop:t.attr,label:t.label,fixed:t.fixed,width:(0,d.Uh)(t.label),formatter:e=>-1==e[t.attr]?this.$t("h.title137"):this.stateListData.find((i=>i._id==e[t.attr])).label}):e.push({prop:t.attr,label:t.label,fixed:t.fixed,width:(0,d.Uh)(t.label),showOverflowTooltip:!0}))})),e.push({prop:"printSize",label:this.$t("h.title57"),fixed:"right",showOverflowTooltip:!0,width:(0,d.Uh)(this.$t("h.title57"))}),e}},methods:{autoDialogVisibleClosed(){clearInterval(this.timer),clearTimeout(this.timer2),this.endAutoCheck(),this.notTotal=0,this.thenTotal=0,this.otherTotal=0,this.notPaginationForm.currentPage=1,this.thenPaginationForm.currentPage=1,this.otherPaginationForm.currentPage=1,this.notAssets=[],this.thenAssets=[],this.otherAssets=[],this.allEpc=[]},autoDialogVisibleOpened(){this.notTotal=0,this.thenTotal=0,this.otherTotal=0,this.notPaginationForm.currentPage=1,this.thenPaginationForm.currentPage=1,this.otherPaginationForm.currentPage=1,this.notAssets=[],this.thenAssets=[],this.otherAssets=[],this.allEpc=[],this.setAntArr(),this.startAutoCheck(),this.getThenAssets(),this.getOtherAssets()},setAntArr(){this.deviceInfo.warehouseIds.forEach((e=>{let t=e.ant.split("").reverse().map(((e,t)=>1==e?t+1:-1)).filter((e=>-1!==e));this.usedAnts=[...this.usedAnts,...t]}))},assetTabsClick(){},getNotAssets(){this.notLoading=!0;let e=[];this.deviceInfo.warehouseIds.forEach((t=>{e.push(t.wareHouseId)}));let t=[{key:"warehouseId",handle:"OIS",value:e.join(",")}];this.allEpc.forEach((e=>{t.push({key:"code",handle:"NIS",value:e})})),(0,c.Ys)({func:"S0007",userId:this.userInfo._id,token:this.userInfo.token,requstData:{page:this.thenPaginationForm.pageSize,index:this.thenPaginationForm.currentPage,item:t}}).then((({data:e})=>{if(this.notLoading=!1,0!=e.code)return this.$message.error(e.data);this.notTotal=e.data[0],this.notAssets=this.setTableCostomKey(e.data[1])})).catch((()=>{this.notLoading=!1}))},getThenAssets(){this.thenLoading=!0;let e=[];this.deviceInfo.warehouseIds.forEach((t=>{e.push(t.wareHouseId)}));let t=[{key:"code",handle:"OIS",value:this.allEpc.join(",")},{key:"warehouseId",handle:"OIS",value:e.join(",")}];(0,c.Ys)({func:"S0007",userId:this.userInfo._id,token:this.userInfo.token,requstData:{page:this.thenPaginationForm.pageSize,index:this.thenPaginationForm.currentPage,item:t}}).then((({data:e})=>{if(this.thenLoading=!1,0!=e.code)return this.$message.error(e.data);this.thenTotal=e.data[0],this.thenAssets=this.setTableCostomKey(e.data[1])})).catch((()=>{this.thenLoading=!1}))},getOtherAssets(){this.otherLoading=!0;let e=[{key:"code",handle:"OIS",value:this.allEpc.join(",")}];this.deviceInfo.warehouseIds.forEach((t=>{e.push({key:"warehouseId",handle:"NIS",value:t.wareHouseId})})),(0,c.Ys)({func:"S0007",userId:this.userInfo._id,token:this.userInfo.token,requstData:{page:this.otherPaginationForm.pageSize,index:this.otherPaginationForm.currentPage,item:e}}).then((({data:e})=>{if(this.otherLoading=!1,0!=e.code)return this.$message.error(e.data);this.otherTotal=e.data[0],this.otherAssets=this.setTableCostomKey(e.data[1])})).catch((()=>{this.otherLoading=!1}))},setTableCostomKey(e){return e.forEach((e=>{for(let t in e["jsons"])e[t]=e["jsons"][t];e.company=window.sessionStorage.getItem("loginCompanyName")})),e},startAutoCheck(){this.getNotAssets(),(0,c.EQ)({rfidIp:this.deviceInfo.ip,rfidRegion:"NA",power:30,antnum:this.deviceInfo.antLength,usedAnts:this.usedAnts,readingDuration:this.deviceInfo.inventoryDuration}).then((({data:e})=>{if(0!=e.code)return this.$message.error(e.message);this.$message.success(e.message),this.startRequest()})).catch((()=>{this.$message.error(this.$t("h.tips232"))}))},startRequest(){this.timer&&(clearInterval(this.timer),this.timer=null);let e=this.deviceInfo.inventoryDuration;this.timer=setInterval((()=>{this.makeRequest(),e-=5,e<0&&(clearInterval(this.timer),this.timer=null,this.anewAutoCheck())}),5e3)},makeRequest(){(0,c.nr)({rfidIp:this.deviceInfo.ip,needNew:!1}).then((({data:e})=>{0!=e.code&&(clearInterval(this.timer),this.timer=null,this.$message.error(e.data),this.anewAutoCheck()),e.state||(clearInterval(this.timer),this.timer=null,this.anewAutoCheck()),e.message.length&&(this.allEpc=Array.from(new Set([...this.allEpc,...e.message])),this.getNotAssets(),this.getThenAssets(),this.getOtherAssets())})).catch((()=>{clearInterval(this.timer),this.timer=null,this.$message.error(this.$t("h.tips18")),this.anewAutoCheck()}))},anewAutoCheck(){let e=60*this.deviceInfo.timedInterval*1e3;this.timer2=setTimeout((()=>{clearTimeout(this.timer2),this.notTotal=0,this.thenTotal=0,this.notPaginationForm.currentPage=1,this.thenPaginationForm.currentPage=1,this.notAssets=[],this.thenAssets=[],this.allEpc=[],this.getThenAssets(),this.getOtherAssets(),this.startAutoCheck()}),e)},endAutoCheck(){(0,c.Y$)({rfidIp:this.deviceInfo.ip}).then((()=>{})).catch((()=>{}))}},beforeDestroy(){clearInterval(this.timer),clearTimeout(this.timer2)}},u=m,p=i(1001),g=(0,p.Z)(u,o,n,!1,null,"13e96c52",null),b=g.exports,f=i(98884),v=i(42041),F=i(19698),$=i(92003),D=i(89782),w=i(83151),I={components:{AutoCheckDialog:b,DsDeleteDetail:f.Z,NewBillsDialog:v.Z,DsTable:r.Z,DsPagination:l.Z,DsQueryForm:F.Z,DsQueryFormLeftPanel:$.Z,DsQueryFormRightPanel:D.Z},data(){return{total:0,paginationForm:{currentPage:1,pageSize:20},loading:!1,columns:w.f2,devicesConfig:{selection:!0,reserveSelection:!0},devices:[],selectDevices:[],newBillTitle:this.$t("h.newBtn")+this.$t("h.device"),dialogLoading:{target:".new-bill-dialog",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"},newBillsDialogVisible:!1,deviceForm:{name:"",type:0,cloudNumber:"",model:"",timedInterval:1,inventoryDuration:30,warehouseIds:[],ip:"",port:"",antLength:null},deviceFormRules:{name:[{required:!0,message:this.$t("h.tips3")+this.$t("h.formTips30"),trigger:"blur"}],cloudNumber:[{required:!0,message:this.$t("h.tips3")+this.$t("h.formTips31"),trigger:"blur"}],ip:[{required:!0,message:this.$t("h.tips3")+"IP",trigger:"blur"}],port:[{required:!0,message:this.$t("h.tips3")+this.$t("h.formTips34"),trigger:"blur"}],warehouseIds:[{required:!0,message:this.$t("h.tips4")+this.$t("h.formTips36"),trigger:"change"}]},wareData:[],deviceAntenna:[{label:this.$t("h.title140"),value:1,disabled:!1}],antennaForm:{},dialogAntennaVisible:!1,antennaBindingData:[],antennaColumns:w.xu,deleteDialogVisible:!1,deleteColumns:w.deleteDevoceErrorColumns,deleteErrorData:[],baseDialogVisible:!1,baseForm:{equipmentId:"",name:"",type:0,cloudNumber:"",model:"",timedInterval:1,inventoryDuration:30,ip:"",port:"",antLength:null},baseFormRules:{name:[{required:!0,message:this.$t("h.tips3")+this.$t("h.formTips30"),trigger:"blur"}],cloudNumber:[{required:!0,message:this.$t("h.tips3")+this.$t("h.formTips31"),trigger:"blur"}],ip:[{required:!0,message:this.$t("h.tips3")+"IP",trigger:"blur"}],port:[{required:!0,message:this.$t("h.tips3")+this.$t("h.formTips34"),trigger:"blur"}]},wareDialogVisible:!1,editWareForm:{warehouseIds:[]},editWareFormRules:{warehouseIds:[{required:!0,message:this.$t("h.tips4")+this.$t("h.area"),trigger:"change"}]},editWareFlag:!1,autoVisible:!1,deviceInfo:{}}},computed:{...(0,h.rn)(["userInfo"]),wares(){if(1==this.deviceForm.type){let e=[];return this.deviceForm.warehouseIds.forEach((t=>{let i=this.wareData.find((e=>e._id==t));e.push(i)})),e}return[]},editAntWares(){if(this.editWareFlag&&1==this.selectDevices[0].type){let e=[];return this.editWareForm.warehouseIds.forEach((t=>{let i=this.wareData.find((e=>e._id==t));i&&e.push(i)})),e}return[]}},watch:{"deviceForm.warehouseIds":{handler(e){if(1==this.deviceForm.type)for(const t in this.antennaForm)e.includes(Number(t))||delete this.antennaForm[t]}}},methods:{getDevice(){this.loading=!0,(0,c.Ys)({func:"S0073",userId:this.userInfo._id,token:this.userInfo.token,requstData:{}}).then((({data:e})=>{if(this.loading=!1,0!=e.code)return this.$message.error(e.data);e.data.forEach((e=>{let t=[];e.wareHouseDOS.forEach((e=>{t.push(e.warehouse_name)})),e.warehouseName=t.join(",")})),this.devices=e.data})).catch((()=>{this.loading=!1,this.$message.error(this.$t("h.tips18"))}))},handleSelectionChange(e){this.selectDevices=e},createDevice(){this.newBillsDialogVisible=!0},newBillsDialogOpened(){this.$refs.deviceFormRef.clearValidate()},newBillsDialogClose(){this.deviceForm.name="",this.deviceForm.cloudNumber="",this.deviceForm.model="",this.deviceForm.ip="",this.deviceForm.port="",this.deviceForm.type=0,this.deviceForm.timedInterval=1,this.deviceForm.inventoryDuration=30,this.deviceForm.antLength=null,this.deviceForm.warehouseIds=[],this.antennaForm={},this.deviceAntenna=[{label:this.$t("h.title140"),value:1,disabled:!1}]},connectingDevice(e,t,i,s,a){(0,c.eh)({rfidIp:e,rfidPort:t,rfidDevId:i,autoSubmit:s,submitUrl:a}).then((({data:e})=>{if(0!=e.code)return this.$message.error(e.message);this.$message.success(e.message)})).catch((()=>{this.$message.error(this.$t("h.tips18"))}))},sbumitDeviceForm(){this.$refs.deviceFormRef.validate((e=>{if(!e)return!1;if(1==this.deviceForm.type){let e=!0;for(const t in this.antennaForm)if(0==this.antennaForm[t].length){e=!1;break}if(!e)return this.$message.error(this.$t("h.tips233")),!1}const t=this.$loading(this.dialogLoading);let i=[];i=this.deviceForm.warehouseIds.map((e=>({warehouseId:e}))),1==this.deviceForm.type&&this.bingAntToString(i),(0,c.Vx)({func:"U0080",userId:this.userInfo._id,token:this.userInfo.token,requstData:{name:this.deviceForm.name,type:this.deviceForm.type,cloudNumber:this.deviceForm.cloudNumber,timedInterval:1==this.deviceForm.type?this.deviceForm.timedInterval:null,inventoryDuration:1==this.deviceForm.type?this.deviceForm.inventoryDuration:null,model:this.deviceForm.model,ip:this.deviceForm.ip,port:this.deviceForm.port,warehouseIds:i,antLength:this.deviceForm.antLength,permissonId:26}}).then((({data:e})=>{if(t.close(),0!=e.code)return this.$message.error(e.data);this.$message.success(e.data),this.getDevice(),0==this.deviceForm.type&&this.connectingDevice(this.deviceForm.ip,this.deviceForm.port,this.deviceForm.cloudNumber,!0,window.$BAER_URL.checkCode),this.newBillsDialogVisible=!1})).catch((e=>{t.close(),console.log(e),this.$message.error(this.$t("h.tips18"))}))}))},onChangeAntLength(e,t){let i=[];for(let s=0;s<e;s++){let e={label:`${s+1}${this.$t("h.title141")}`,value:s+1,disabled:!1};i.push(e)}this.deviceAntenna=i,this.antennaForm={}},onChangeAntenna(e){this.deviceAntenna.forEach((t=>{e.forEach((e=>{t.value==e&&(t.disabled=!0)}))}))},onRemoveAntennaTag(e){console.log("onRemoveAntennaTag>>>",e),this.deviceAntenna.forEach((t=>{t.value==e&&(t.disabled=!1)}))},onClearAntenna(){let e=[];for(const t in this.antennaForm)e=[...e,...this.antennaForm[t]];this.deviceAntenna.forEach((e=>{e.disabled=!1})),e.forEach((e=>{this.deviceAntenna.forEach((t=>{e==t.value&&(t.disabled=!0)}))}))},onRemoveWareTag(e){console.log(e),this.antennaForm[e].forEach((e=>{this.deviceAntenna.forEach((t=>{t.value==e&&(t.disabled=!1)}))}))},onClearWare(){this.deviceAntenna.forEach((e=>{e.disabled=!1})),this.antennaForm={}},checkAntennaBinding(e){if("1"!=e.type)return this.$message.info(this.$t("h.tips234"));this.antennaBindingData=e.wareHouseDOS.map((e=>({warehouse_id:e.warehouse_id,warehouse_name:e.warehouse_name}))),this.antennaBindingData.forEach((t=>{let i=e.warehouseIds.find((e=>t.warehouse_id==e.wareHouseId));t.ant="";let s=i.ant.split("").reverse();s.forEach(((e,i)=>{"1"==e&&(t.ant+=`${i+1}${this.$t("h.title141")}`)}))})),this.dialogAntennaVisible=!0},dialogAntennaVisibleClosed(){this.antennaBindingData=[]},deleteDialogVisibleClosed(){this.deleteErrorData=[]},deleteDevice(){if(0==this.selectDevices.length)return this.$message.error(this.$t("h.tips22"));this.$confirm(this.$t("h.tips235"),this.$t("h.title18"),{confirmButtonText:this.$t("h.confirmBtn"),cancelButtonText:this.$t("h.cancelBtn"),type:"warning"}).then((()=>{this.loading=!0,this.deleteErrorData=[],this.multiDeletaDevice(0)})).catch((()=>{this.$message.info(this.$t("h.tips98"))}))},multiDeletaDevice(e){if(e>this.selectDevices.length-1)return this.paginationForm.currentPage=1,this.getDevice(),this.$refs["deviceTableRef"].$refs["dsTableRef"].clearSelection(),void(this.deleteErrorData.length?this.deleteDialogVisible=!0:this.$message.success(this.$t("h.tips236")));(0,c.SR)({func:"D0032",userId:this.userInfo._id,token:this.userInfo.token,requstData:{equipmentId:this.selectDevices[e].equipmentId,permissonId:26}}).then((({data:t})=>{0!=t.code&&this.deleteErrorData.push({cloudNumber:this.selectDevices[e].cloudNumber,name:this.selectDevices[e].name,reason:t.data}),this.multiDeletaDevice(++e)})).catch((()=>{this.deleteErrorData.push({cloudNumber:this.selectDevices[e].cloudNumber,name:this.selectDevices[e].name,reason:this.$t("h.tips18")}),this.multiDeleteArea(++e)}))},editBaseInfo(){return 0===this.selectDevices.length?this.$message.error(this.$t("h.tips237")):this.selectDevices.length>1?this.$message.error(this.$t("h.tips238")):(this.baseForm.equipmentId=this.selectDevices[0].equipmentId,this.baseForm.name=this.selectDevices[0].name,this.baseForm.type=parseInt(this.selectDevices[0].type),this.baseForm.cloudNumber=this.selectDevices[0].cloudNumber,this.baseForm.model=this.selectDevices[0].model,this.baseForm.ip=this.selectDevices[0].ip,this.baseForm.port=this.selectDevices[0].port,this.baseForm.antLength=this.selectDevices[0].antLength,this.baseForm.timedInterval=this.selectDevices[0].timedInterval,this.baseForm.inventoryDuration=this.selectDevices[0].inventoryDuration,void(this.baseDialogVisible=!0))},baseDialogOpened(){this.$refs.baseFormRef.clearValidate()},baseDialogClose(){this.baseForm.equipmentId="",this.baseForm.name="",this.baseForm.type=0,this.baseForm.timedInterval=1,this.baseForm.inventoryDuration=30,this.baseForm.cloudNumber="",this.baseForm.model="",this.baseForm.ip="",this.baseForm.port="",this.baseForm.antLength=null,this.$refs["deviceTableRef"].$refs["dsTableRef"].clearSelection()},sbumitBaseForm(){this.$refs.baseFormRef.validate((e=>{if(!e)return!1}));const e=this.$loading({target:".base-dialog",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});(0,c.Vx)({func:"U0081",userId:this.userInfo._id,token:this.userInfo.token,requstData:{equipmentId:this.baseForm.equipmentId,name:this.baseForm.name,type:this.baseForm.type,cloudNumber:this.baseForm.cloudNumber,model:this.baseForm.model,timedInterval:1==this.baseForm.type?this.baseForm.timedInterval:null,inventoryDuration:1==this.baseForm.type?this.baseForm.inventoryDuration:null,ip:this.baseForm.ip,port:this.baseForm.port,antLength:this.baseForm.antLength,permissonId:26}}).then((({data:t})=>{if(e.close(),0!=t.code)return this.$message.error(t.data);this.baseDialogVisible=!1,this.$message.success(t.data),this.getDevice()})).catch((()=>{e.close(),this.$message.error(this.$t("h.tips18"))}))},editWareInfo(){return 0===this.selectDevices.length?this.$message.error(this.$t("h.tips237")):this.selectDevices.length>1?this.$message.error(this.$t("h.tips238")):(this.editWareFlag=!0,1==this.selectDevices[0].type&&(console.log("天线数量",this.selectDevices[0].antLength),this.onChangeAntLength(this.selectDevices[0].antLength),this.selectDevices[0].warehouseIds.forEach((e=>{this.antennaForm[e.wareHouseId]=[],e.ant.split("").reverse().forEach(((t,i)=>{1==t&&(this.antennaForm[e.wareHouseId].push(i+1),this.deviceAntenna[i].disabled=!0)}))}))),this.selectDevices[0].warehouseIds.forEach((e=>{this.editWareForm.warehouseIds.push(e.wareHouseId)})),this.wareDialogVisible=!0,void console.log(this.selectDevices[0]))},wareDialogOpened(){},wareDialogClose(){this.editWareForm.warehouseIds=[],this.antennaForm={},this.deviceAntenna=[{label:this.$t("h.title140"),value:1,disabled:!1}]},sbumitEditWareForm(){this.$refs.editAreaFormRef.validate((e=>{if(!e)return!1;if(1==this.selectDevices[0].type){let e=!0;for(const t in this.antennaForm)if(0==this.antennaForm[t].length){e=!1;break}if(!e)return this.$message.error(this.$t("h.tips233")),!1}let t=[];t=this.editWareForm.warehouseIds.map((e=>({warehouseId:e,equipmentId:this.selectDevices[0].equipmentId}))),1==this.selectDevices[0].type&&this.bingAntToString(t),(0,c.Vx)({func:"U0082",userId:this.userInfo._id,token:this.userInfo.token,requstData:{item:t,permissonId:26}}).then((({data:e})=>{if(0!=e.code)return this.$message.error(e.data);this.$message.success(e.data),this.wareDialogVisible=!1,this.getDevice()})).catch((()=>{this.$message.error(this.$t("h.tips18"))}))}))},bingAntToString(e){let t=[];for(const i in this.antennaForm)if(this.antennaForm[i].length){let e=[];for(let t=0;t<32;t++)e[t]=0;let s={key:i,ant:e};this.antennaForm[i].forEach((e=>s.ant[e-1]=1)),s.ant.reverse(),t.push(s)}e.forEach((e=>{t.forEach((t=>{e.warehouseId==t.key&&(e.ant=t.ant.join(""))}))}))},autoCheck(e){this.deviceInfo=e,this.autoVisible=!0}},created(){this.getDevice()}},y=I,_=(0,p.Z)(y,s,a,!1,null,"9e83992a",null),C=_.exports}}]);