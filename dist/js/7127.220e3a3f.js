"use strict";(self["webpackChunk_4010_assetweb"]=self["webpackChunk_4010_assetweb"]||[]).push([[7127],{5791:function(t,e,i){i.d(e,{Z:function(){return h}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"filter-drawer"},[e("el-drawer",{attrs:{title:t.$t("h.advancedBtn"),size:550,direction:"rtl",visible:t.drawer},on:{"update:visible":function(e){t.drawer=e}}},[e("div",{staticClass:"filter-form"},[t._t("default")],2),e("div",{staticClass:"filter-btn"},[t._t("set"),e("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.submitFilterForm}},[t._v(t._s(t.$t("h.saveBtn")))]),e("el-button",{attrs:{size:"small"},on:{click:t.resetFilterForm}},[t._v(t._s(t.$t("h.resetBtn")))])],2)])],1)},a=[],r={name:"DsFilterDrawer",data(){return{}},props:{filterDrawerVisible:{type:Boolean}},computed:{drawer:{get(){return this.filterDrawerVisible},set(t){this.$emit("update:filterDrawerVisible",t)}}},methods:{submitFilterForm(){this.$emit("submitFilterForm")},resetFilterForm(){this.$emit("resetFilterForm")}}},l=r,n=i(1001),o=(0,n.Z)(l,s,a,!1,null,"05535b94",null),h=o.exports},17817:function(t,e,i){i.d(e,{Z:function(){return h}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"ds-filter-tag"},t._l(t.tagsData,(function(i){return e("el-tag",{key:i.keyStr,attrs:{size:t.tagSize,effect:"dark",closable:""},on:{close:function(e){return t.handleClose(i)}}},[t._v(" "+t._s(i.name)+":"+t._s(i.value.length>8?i.value.substring(0,7)+"...":i.value)+" ")])})),1)},a=[],r={name:"DsFilterTag",data(){return{tags:[{name:this.$t("h.label1"),type:""},{name:this.$t("h.label2"),type:"success"},{name:this.$t("h.label3"),type:"info"},{name:this.$t("h.label4"),type:"warning"},{name:this.$t("h.label5"),type:"danger"}]}},props:{filterTagsData:{type:Array,default:()=>[]},tagSize:{type:String,default:"medium"}},computed:{tagsData:{get(){return this.filterTagsData},set(t){this.$emit("update:filterTagsData",t)}}},methods:{handleClose(t){this.$emit("handleCloseTag",t)}}},l=r,n=i(1001),o=(0,n.Z)(l,s,a,!1,null,"628dc1ca",null),h=o.exports},93082:function(t,e,i){i.d(e,{Z:function(){return h}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"ds-pagination"},[e("el-pagination",t._b({attrs:{background:t.background,"current-page":t.currentPage,"page-size":t.pageSize,layout:t.layout,"page-sizes":t.pageSizes,total:t.total},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"update:pageSize":function(e){t.pageSize=e},"update:page-size":function(e){t.pageSize=e},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},"el-pagination",t.$attrs,!1))],1)},a=[],r={name:"DsPagination",data(){return{}},props:{total:{required:!0,type:Number},pageSizes:{type:Array,default(){return[20,50,100]}},page:{type:Number,default:1},limit:{type:Number,default:20},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0}},computed:{currentPage:{get(){return this.page},set(t){this.$emit("update:page",t)}},pageSize:{get(){return this.limit},set(t){this.$emit("update:limit",t)}}},methods:{handleSizeChange(t){this.$emit("pagination",{page:this.currentPage,limit:t})},handleCurrentChange(t){this.$emit("pagination",{page:t,limit:this.pageSize})}}},l=r,n=i(1001),o=(0,n.Z)(l,s,a,!1,null,"2377c114",null),h=o.exports},92003:function(t,e,i){i.d(e,{Z:function(){return h}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"left-panel"},[t._t("default")],2)},a=[],r={name:"DsQueryFormLeftPanel"},l=r,n=i(1001),o=(0,n.Z)(l,s,a,!1,null,"71d76034",null),h=o.exports},89782:function(t,e,i){i.d(e,{Z:function(){return h}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"right-panel"},[t._t("default")],2)},a=[],r={name:"DsQueryFormRightPanel"},l=r,n=i(1001),o=(0,n.Z)(l,s,a,!1,null,"c6443ba6",null),h=o.exports},19698:function(t,e,i){i.d(e,{Z:function(){return h}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"ds-query-form"},[t._t("default")],2)},a=[],r={name:"DsQueryForm"},l=r,n=i(1001),o=(0,n.Z)(l,s,a,!1,null,"6c8bfb78",null),h=o.exports},6526:function(t,e,i){i.r(e),i.d(e,{default:function(){return N}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"item-list"},[e("el-card",{staticClass:"card"},[e("div",{staticClass:"operation-area"},[e("div",{staticClass:"right-header"},[e("ds-query-form",[e("ds-query-form-left-panel",[e("el-button",{attrs:{size:"small"},on:{click:t.exportFile}},[t._v(t._s(t.$t("h.title165")))]),e("el-button",{attrs:{size:"small"},on:{click:t.print}},[t._v(t._s(t.$t("h.title209")))])],1),e("ds-query-form-right-panel")],1)],1),e("div",{staticClass:"screen"},[e("ds-query-form",[e("ds-query-form-left-panel",[e("ds-filter-tag",{attrs:{filterTagsData:t.highFilterTags},on:{handleCloseTag:t.handleCloseFilterTag}})],1),e("ds-query-form-right-panel",[e("span",{staticClass:"advancedSearch",on:{click:function(e){t.bodyFilteringVisible=!0}}},[t._v(t._s(t.$t("h.advancedBtn")))])])],1)],1),e("div",{staticClass:"right-body"},[e("div",{staticClass:"table"},[e("ds-table",{ref:"tableDataDisplay",attrs:{tableData:t.tableDataDisplay,tableConfig:t.bodyTableConfig,columns:t.columns,rowKey:t=>t.code,onlyKey:"code"},on:{handleSelectionChange:t.itemListSelete}})],1),e("div",{staticClass:"pagination"},[e("ds-pagination",{attrs:{small:"",total:t.total,page:t.paginationForm.currentPage,limit:t.paginationForm.pageSize},on:{"update:page":function(e){return t.$set(t.paginationForm,"currentPage",e)},"update:limit":function(e){return t.$set(t.paginationForm,"pageSize",e)},pagination:t.changeSizePage}})],1)]),e("ds-filter-drawer",{staticClass:"ds-filter-drawer",attrs:{filterDrawerVisible:t.bodyFilteringVisible,modal:!1},on:{"update:filterDrawerVisible":function(e){t.bodyFilteringVisible=e},"update:filter-drawer-visible":function(e){t.bodyFilteringVisible=e},resetFilterForm:t.resetBodyFilterForm,submitFilterForm:t.submitBodyFilterForm}},[e("el-form",{ref:"body",attrs:{model:t.bodyFiltering,"label-width":"100px"}},[e("el-form-item",{attrs:{label:t.$t("h.categoryName"),prop:"sortingName"}},[e("el-select",{attrs:{placeholder:t.$t("h.tips4")+t.$t("h.criteria")},model:{value:t.bodyFiltering.sortingNameCondition,callback:function(e){t.$set(t.bodyFiltering,"sortingNameCondition",e)},expression:"bodyFiltering.sortingNameCondition"}},[e("el-option",{attrs:{label:t.$t("h.equal"),value:"IS"}}),e("el-option",{attrs:{label:t.$t("h.contain"),value:"ANDLIKE"}})],1),e("el-input",{attrs:{placeholder:t.$t("h.tips3")+t.$t("h.categoryName")},model:{value:t.bodyFiltering.sortingName,callback:function(e){t.$set(t.bodyFiltering,"sortingName",e)},expression:"bodyFiltering.sortingName"}})],1),e("el-form-item",{attrs:{label:t.$t("h.title166"),prop:"code"}},[e("el-select",{attrs:{placeholder:t.$t("h.tips4")+t.$t("h.criteria")},model:{value:t.bodyFiltering.codeCondition,callback:function(e){t.$set(t.bodyFiltering,"codeCondition",e)},expression:"bodyFiltering.codeCondition"}},[e("el-option",{attrs:{label:t.$t("h.equal"),value:"IS"}}),e("el-option",{attrs:{label:t.$t("h.contain"),value:"ANDLIKE"}})],1),e("el-input",{attrs:{placeholder:t.$t("h.tips3")+t.$t("h.title166")},model:{value:t.bodyFiltering.code,callback:function(e){t.$set(t.bodyFiltering,"code",e)},expression:"bodyFiltering.code"}})],1),e("el-form-item",{attrs:{label:t.$t("h.formTips38"),prop:"name"}},[e("el-select",{attrs:{placeholder:t.$t("h.tips4")+t.$t("h.criteria")},model:{value:t.bodyFiltering.nameCondition,callback:function(e){t.$set(t.bodyFiltering,"nameCondition",e)},expression:"bodyFiltering.nameCondition"}},[e("el-option",{attrs:{label:t.$t("h.equal"),value:"IS"}}),e("el-option",{attrs:{label:t.$t("h.contain"),value:"ANDLIKE"}})],1),e("el-input",{attrs:{placeholder:t.$t("h.tips3")+t.$t("h.formTips38")},model:{value:t.bodyFiltering.name,callback:function(e){t.$set(t.bodyFiltering,"name",e)},expression:"bodyFiltering.name"}})],1),e("el-form-item",{attrs:{label:t.$t("h.formTips63"),prop:"barCode"}},[e("el-select",{attrs:{placeholder:t.$t("h.tips4")+t.$t("h.criteria")},model:{value:t.bodyFiltering.barCodeCondition,callback:function(e){t.$set(t.bodyFiltering,"barCodeCondition",e)},expression:"bodyFiltering.barCodeCondition"}},[e("el-option",{attrs:{label:t.$t("h.equal"),value:"IS"}}),e("el-option",{attrs:{label:t.$t("h.contain"),value:"ANDLIKE"}})],1),e("el-input",{attrs:{placeholder:t.$t("h.tips3")+t.$t("h.formTips63")},model:{value:t.bodyFiltering.barCode,callback:function(e){t.$set(t.bodyFiltering,"barCode",e)},expression:"bodyFiltering.barCode"}})],1),e("el-form-item",{attrs:{label:t.$t("h.columns27"),prop:"specification"}},[e("el-select",{attrs:{placeholder:t.$t("h.tips4")+t.$t("h.criteria")},model:{value:t.bodyFiltering.specificationCondition,callback:function(e){t.$set(t.bodyFiltering,"specificationCondition",e)},expression:"bodyFiltering.specificationCondition"}},[e("el-option",{attrs:{label:t.$t("h.equal"),value:"IS"}}),e("el-option",{attrs:{label:t.$t("h.contain"),value:"ANDLIKE"}})],1),e("el-input",{attrs:{placeholder:t.$t("h.tips3")+t.$t("h.columns27")},model:{value:t.bodyFiltering.specification,callback:function(e){t.$set(t.bodyFiltering,"specification",e)},expression:"bodyFiltering.specification"}})],1),e("el-form-item",{attrs:{label:t.$t("h.title198"),prop:"logo"}},[e("el-select",{attrs:{placeholder:t.$t("h.tips4")+t.$t("h.criteria")},model:{value:t.bodyFiltering.logoCondition,callback:function(e){t.$set(t.bodyFiltering,"logoCondition",e)},expression:"bodyFiltering.logoCondition"}},[e("el-option",{attrs:{label:t.$t("h.equal"),value:"IS"}}),e("el-option",{attrs:{label:t.$t("h.contain"),value:"ANDLIKE"}})],1),e("el-input",{attrs:{placeholder:t.$t("h.tips3")+t.$t("h.title198")},model:{value:t.bodyFiltering.logo,callback:function(e){t.$set(t.bodyFiltering,"logo",e)},expression:"bodyFiltering.logo"}})],1),e("el-form-item",{attrs:{label:t.$t("h.columns28"),prop:"measureUnit"}},[e("el-select",{attrs:{placeholder:t.$t("h.tips4")+t.$t("h.criteria")},model:{value:t.bodyFiltering.measureUnitCondition,callback:function(e){t.$set(t.bodyFiltering,"measureUnitCondition",e)},expression:"bodyFiltering.measureUnitCondition"}},[e("el-option",{attrs:{label:t.$t("h.equal"),value:"IS"}}),e("el-option",{attrs:{label:t.$t("h.contain"),value:"ANDLIKE"}})],1),e("el-input",{attrs:{placeholder:t.$t("h.tips3")+t.$t("h.columns28")},model:{value:t.bodyFiltering.measureUnit,callback:function(e){t.$set(t.bodyFiltering,"measureUnit",e)},expression:"bodyFiltering.measureUnit"}})],1),e("el-form-item",{attrs:{label:t.$t("h.number"),prop:"amount"}},[e("el-select",{attrs:{placeholder:t.$t("h.tips4")+t.$t("h.criteria")},model:{value:t.bodyFiltering.amountCondition,callback:function(e){t.$set(t.bodyFiltering,"amountCondition",e)},expression:"bodyFiltering.amountCondition"}},[e("el-option",{attrs:{label:t.$t("h.equal"),value:"IS"}}),e("el-option",{attrs:{label:t.$t("h.title210"),value:"ANDLTE"}}),e("el-option",{attrs:{label:t.$t("h.title211"),value:"ANDGTE"}})],1),e("el-input",{attrs:{placeholder:t.$t("h.tips3")+t.$t("h.number")},model:{value:t.bodyFiltering.amount,callback:function(e){t.$set(t.bodyFiltering,"amount",e)},expression:"bodyFiltering.amount"}})],1),e("el-form-item",{attrs:{label:t.$t("h.price"),prop:"price"}},[e("el-select",{attrs:{placeholder:t.$t("h.tips4")+t.$t("h.criteria")},model:{value:t.bodyFiltering.priceCondition,callback:function(e){t.$set(t.bodyFiltering,"priceCondition",e)},expression:"bodyFiltering.priceCondition"}},[e("el-option",{attrs:{label:t.$t("h.equal"),value:"IS"}}),e("el-option",{attrs:{label:t.$t("h.title210"),value:"ANDLTE"}}),e("el-option",{attrs:{label:t.$t("h.title211"),value:"ANDGTE"}})],1),e("el-input",{attrs:{placeholder:t.$t("h.tips3")+t.$t("h.price")},model:{value:t.bodyFiltering.price,callback:function(e){t.$set(t.bodyFiltering,"price",e)},expression:"bodyFiltering.price"}})],1),e("el-form-item",{attrs:{label:t.$t("h.columns47"),prop:"money"}},[e("el-select",{attrs:{placeholder:t.$t("h.tips4")+t.$t("h.criteria")},model:{value:t.bodyFiltering.moneyCondition,callback:function(e){t.$set(t.bodyFiltering,"moneyCondition",e)},expression:"bodyFiltering.moneyCondition"}},[e("el-option",{attrs:{label:t.$t("h.equal"),value:"IS"}}),e("el-option",{attrs:{label:t.$t("h.title210"),value:"ANDLTE"}}),e("el-option",{attrs:{label:t.$t("h.title211"),value:"ANDGTE"}})],1),e("el-input",{attrs:{placeholder:t.$t("h.tips3")+t.$t("h.columns47")},model:{value:t.bodyFiltering.money,callback:function(e){t.$set(t.bodyFiltering,"money",e)},expression:"bodyFiltering.money"}})],1),e("el-form-item",{attrs:{label:t.$t("h.comment"),prop:"remark"}},[e("el-select",{attrs:{placeholder:t.$t("h.tips4")+t.$t("h.criteria")},model:{value:t.bodyFiltering.remarkCondition,callback:function(e){t.$set(t.bodyFiltering,"remarkCondition",e)},expression:"bodyFiltering.remarkCondition"}},[e("el-option",{attrs:{label:t.$t("h.equal"),value:"IS"}}),e("el-option",{attrs:{label:t.$t("h.contain"),value:"ANDLIKE"}})],1),e("el-input",{attrs:{placeholder:t.$t("h.comment")},model:{value:t.bodyFiltering.remark,callback:function(e){t.$set(t.bodyFiltering,"remark",e)},expression:"bodyFiltering.remark"}})],1)],1)],1)],1)]),e("inventory-print-components",{ref:"apdRef",attrs:{userInfo:t.userInfo,selectAssetsData:t.selectAssetsData},on:{refreshAssets:t.getData}})],1)},a=[],r=(i(57658),i(20629)),l=i(19698),n=i(92003),o=i(89782),h=i(93082),c=i(5791),u=i(60983),d=function(){var t=this,e=t._self._c;return e("div",{staticClass:"print"},[e("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{title:t.$t("h.title04"),"custom-class":"settingPrintDialog",visible:t.dialogVisible,fullscreen:""},on:{"update:visible":function(e){t.dialogVisible=e},closed:t.lookClose,opened:t.openPrint}},[e("div",{staticClass:"box"},[e("div",{staticClass:"box-1"},[e("div",{staticClass:"tags"},[e("el-row",{attrs:{gutter:10}},t._l(t.pagMultipleSelection,(function(i,s){return e("el-col",{key:s,attrs:{xs:t.colSize,sm:t.colSize,lg:t.colSize}},[e("el-image",{attrs:{src:i.base,lazy:"","preview-src-list":t.assetTagsSrcList}})],1)})),1)],1),e("div",{staticClass:"pag"},[e("el-pagination",{attrs:{"current-page":t.cruuentSize,"page-sizes":[10,20,50],"page-size":t.pageSize,background:"",layout:"total, sizes, prev, pager, next, jumper",total:t.multipleSelection.length},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)]),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.refreshLoading,expression:"refreshLoading"}],staticClass:"box-2"},[e("el-form",{ref:"ruleFormRef",attrs:{model:t.ruleForm,rules:t.ruleFormRules,"label-width":"110px"}},[e("el-form-item",{attrs:{label:t.$t("h.formTips1"),prop:"printName"}},[e("el-select",{ref:"printerSelectRef",attrs:{disabled:t.isTrueImg,placeholder:t.$t("h.tips4")+t.$t("h.formTips1"),clearable:""},on:{change:t.selectChange,clear:t.printSelectClear},model:{value:t.ruleForm.printName,callback:function(e){t.$set(t.ruleForm,"printName",e)},expression:"ruleForm.printName"}},t._l(t.symbol,(function(i,s){return e("el-option",{key:s,attrs:{label:i.name,value:i.value}},[t._v(" "+t._s("RFID"==i.deType?i.name+" - RFID"+t.$t("h.formTips1"):i.name+" "+t.$t("h.tips47")+" RFID"+t.$t("h.formTips1"))+" ")])})),1),e("el-popover",{attrs:{placement:"top-start",title:t.$t("h.formTips76"),width:"200",trigger:"hover"}},[e("div",[t._v(" "+t._s(t.$t("h.formTips77"))+":"+t._s(t.printerName)),e("br"),t._v(t._s(t.$t("h.formTips78"))+":"+t._s("RFID"==t.printerType?"RFID"+t.$t("h.formTips1"):t.$t("h.tips47")+"RFID"+t.$t("h.formTips1"))+" ")]),e("img",{staticClass:"printerInfoIcon",attrs:{slot:"reference",src:i(78509),alt:t.$t("h.tips46")},slot:"reference"})]),e("i",{staticClass:"el-icon-refresh refresh_icon",on:{click:t.refreshPrinter}})],1),e("el-form-item",{attrs:{label:t.$t("h.formTips2"),prop:"printNum"}},[e("el-input-number",{attrs:{min:1,precision:0,size:"small"},model:{value:t.ruleForm.printNum,callback:function(e){t.$set(t.ruleForm,"printNum",e)},expression:"ruleForm.printNum"}})],1),e("el-form-item",{attrs:{label:t.$t("h.formTips3"),prop:"moban"}},[e("el-select",{ref:"printTempSelectRef",attrs:{placeholder:t.$t("h.tips4")+t.$t("h.formTips3")},on:{change:t.templateSelectChange},model:{value:t.ruleForm.moban,callback:function(e){t.$set(t.ruleForm,"moban",e)},expression:"ruleForm.moban"}},t._l(t.assetTagsTemplate,(function(t,i){return e("el-option",{key:i,attrs:{label:t.title||t.name,value:t._id}})})),1)],1),e("el-form-item",{attrs:{label:t.$t("h.formTips4"),prop:"mobanSize"}},[e("el-radio-group",{attrs:{size:"medium"},on:{change:t.mobanSizeChange},model:{value:t.ruleForm.mobanSize,callback:function(e){t.$set(t.ruleForm,"mobanSize",e)},expression:"ruleForm.mobanSize"}},[e("el-radio-button",{attrs:{label:"100%"}}),e("el-radio-button",{attrs:{label:"75%"}}),e("el-radio-button",{attrs:{label:"50%"}}),e("el-radio-button",{attrs:{label:"25%"}})],1)],1),e("el-form-item",[e("el-button",{attrs:{disabled:0==t.exportPrintResultData.length},on:{click:t.catchLastPrintResult}},[t._v(t._s(t.$t("h.viewRecentPrintResults")))])],1),e("el-collapse",{attrs:{accordion:""},model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[e("el-collapse-item",{attrs:{title:t.$t("h.formTips5"),name:"1"}},[e("el-form-item",{attrs:{label:t.$t("h.formTips6"),prop:"transverse"}},[e("el-input-number",{attrs:{size:"small",precision:0},model:{value:t.ruleForm.transverse,callback:function(e){t.$set(t.ruleForm,"transverse",e)},expression:"ruleForm.transverse"}}),e("span",{staticStyle:{"margin-left":"10px","font-size":"12px"}},[t._v(t._s(t.$t("h.formTips7")))])],1),e("el-form-item",{attrs:{label:t.$t("h.formTips10"),prop:"longitudinal"}},[e("el-input-number",{attrs:{size:"small",precision:0},model:{value:t.ruleForm.longitudinal,callback:function(e){t.$set(t.ruleForm,"longitudinal",e)},expression:"ruleForm.longitudinal"}}),e("span",{staticStyle:{"margin-left":"10px","font-size":"12px"}},[t._v(t._s(t.$t("h.formTips8")))])],1),e("el-form-item",{attrs:{label:t.$t("h.formTips11"),prop:"concentration"}},[e("el-input-number",{attrs:{max:16,precision:0,min:0,size:"small"},model:{value:t.ruleForm.concentration,callback:function(e){t.$set(t.ruleForm,"concentration",e)},expression:"ruleForm.concentration"}}),e("span",{staticStyle:{"margin-left":"10px","font-size":"12px"}},[t._v(t._s(t.$t("h.formTips9")))])],1),e("el-button",{staticStyle:{"margin-left":"40px"},attrs:{disabled:t.isSave,type:"text"},on:{click:t.saveMarginParam}},[t._v(t._s(t.$t("h.saveCurrentPrintSettings")))])],1),e("el-collapse-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{title:"RFID"+t.$t("h.setBtn"),name:"2"}},[e("el-form-item",{attrs:{label:"RFID"}},[e("el-checkbox",{model:{value:t.ruleForm.Rfid,callback:function(e){t.$set(t.ruleForm,"Rfid",e)},expression:"ruleForm.Rfid"}})],1),e("el-form-item",{attrs:{label:t.$t("h.title212"),prop:"userData"}},[e("el-checkbox",{model:{value:t.ruleForm.desc,callback:function(e){t.$set(t.ruleForm,"desc",e)},expression:"ruleForm.desc"}}),t.ruleForm.desc?e("el-input",{attrs:{placeholder:t.$t("h.tips3")+t.$t("h.title212"),type:"textarea"},model:{value:t.ruleForm.userData,callback:function(e){t.$set(t.ruleForm,"userData",e)},expression:"ruleForm.userData"}}):t._e()],1),e("el-form-item",{attrs:{label:t.$t("h.acessPassword"),prop:"oldResvSect"}},[e("el-input",{staticStyle:{width:"45%"},attrs:{placeholder:t.$t("h.tips3")+t.$t("h.acessPassword")},model:{value:t.ruleForm.oldResvSect,callback:function(e){t.$set(t.ruleForm,"oldResvSect",e)},expression:"ruleForm.oldResvSect"}})],1)],1),e("el-collapse-item",{attrs:{title:t.$t("h.formTips12"),name:"3"}},[e("el-form-item",{attrs:{label:t.$t("h.formTips13")}},[e("el-button",{attrs:{disabled:""==t.facilityKey},on:{click:t.checkRFIDTag}},[t._v(t._s("RFID"==t.printerType?t.$t("h.formTips13")+"RFID"+t.$t("h.formTips14"):t.$t("h.formTips13")+t.$t("h.formTips14")))])],1),e("el-form-item",[e("el-button",{on:{click:t.restartPrinter}},[t._v(t._s(t.$t("h.restartThePrinter")))])],1)],1)],1)],1),e("div",{staticClass:"box2_foot"},[e("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v(t._s(t.$t("h.cancelBtn")))]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.printingSetout("资产打印")}}},[t._v(t._s(t.$t("h.confirmBtn")))])],1)],1)]),e("div",{staticClass:"version"},[e("div",[t._v(" "+t._s(t.$t("h.title34"))+":"),e("span",[t._v(t._s(t.rfidVersio.rfid_version))])]),e("div",[t._v(" "+t._s(t.$t("h.title35"))+":"),e("span",[t._v(t._s(t.rfidVersio.service_version))])])])]),e("el-dialog",{attrs:{"custom-class":"progressDialog",visible:t.printProgressDialogVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,top:"0"},on:{"update:visible":function(e){t.printProgressDialogVisible=e},close:function(e){t.printText=""}}},[e("div",{staticClass:"icon"},[e("img",{attrs:{src:i(33642),alt:""}})]),e("div",{staticClass:"planInfo",domProps:{innerHTML:t._s(t.printText)},on:{click:t.closePrintPlan}}),e("div",{staticClass:"ptintTable"},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.resultList,height:"100%","row-class-name":t.tableRowClassName}},[e("el-table-column",{attrs:{type:"index",width:"50"}}),e("el-table-column",{attrs:{prop:"ackCode",label:t.$t("h.state"),width:"160"},scopedSlots:t._u([{key:"default",fn:function(i){return["0000"==i.row.ackCode?[e("el-tag",{attrs:{size:"mini"}},[t._v(t._s(t.$t("h.title36")))])]:"01"==i.row.ackCode.substring(0,2)?[e("el-tag",{attrs:{size:"mini"}},[t._v(t._s(t.$t("h.title37")))])]:"02"==i.row.ackCode.substring(0,2)?[e("el-tag",{attrs:{size:"mini"}},[t._v(t._s(t.$t("h.title38")))])]:"04"==i.row.ackCode.substring(0,2)?[e("el-tag",{attrs:{size:"mini"}},[t._v(t._s(t.$t("h.title39")))])]:"08"==i.row.ackCode.substring(0,2)?[e("el-tag",{attrs:{size:"mini"}},[t._v(t._s(t.$t("h.title40")))])]:"10"==i.row.ackCode.substring(0,2)?[e("el-tag",{attrs:{size:"mini"}},[t._v(t._s(t.$t("h.title41")))])]:"ffff"==i.row.ackCode&&"End"==t.printStat?[e("el-tag",{attrs:{size:"mini"}},[t._v(t._s(t.$t("h.title42")))])]:"ffff"==i.row.ackCode&&"End"!=t.printStat?[e("el-tag",{attrs:{size:"mini"}},[t._v(t._s(t.$t("h.title43")))])]:[e("el-tag",{attrs:{size:"mini"}},[t._v(t._s(t.$t("h.title44")))])]]}}])}),e("el-table-column",{attrs:{label:t.$t("h.formTips15"),width:"65px"},scopedSlots:t._u([{key:"default",fn:function(i){return["ffff"!=i.row.ackCode&&"00"!=i.row.ackCode.substring(.2)&&"00"!=i.row.ackCode.substring(2)?e("el-tag",{attrs:{size:"mini",type:"danger",effect:"dark"}},[t._v(" "+t._s(i.row.ackCode.substring(2))+" ")]):t._e()]}}])}),e("el-table-column",{attrs:{prop:"name",label:t.$t("h.assetName"),"min-width":"100"}}),e("el-table-column",{attrs:{prop:"epc",label:"EPC","min-width":"230"}})],1)],1),e("div",{staticClass:"printBtn"},[e("el-button",{attrs:{disabled:t.exportFlag,type:"success"},on:{click:function(e){t.exportResultDialogVisible=!0}}},[t._v(t._s(t.$t("h.title165")))]),e("el-button",{staticStyle:{background:"#473bb4",color:"#fff"},on:{click:function(e){t.printProgressDialogVisible=!1}}},[t._v(t._s(t.$t("h.confirmBtn")))])],1)]),e("el-dialog",{attrs:{top:"0",title:t.$t("h.exportPrintingResults"),"custom-class":"exportResultDialog",visible:t.exportResultDialogVisible},on:{"update:visible":function(e){t.exportResultDialogVisible=e},close:function(e){t.exportForm.fileName=""}}},[e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-form",{ref:"exportFormRef",attrs:{model:t.exportForm,rules:t.exportFormRules}},[e("el-form-item",{attrs:{label:t.$t("h.formTips16"),"label-width":"110px",prop:"fileName"}},[e("el-input",{attrs:{placeholder:t.$t("h.tips3")+t.$t("h.formTips16")},model:{value:t.exportForm.fileName,callback:function(e){t.$set(t.exportForm,"fileName",e)},expression:"exportForm.fileName"}})],1)],1),e("div",{staticClass:"btn"},[e("el-button",{attrs:{type:"primary",disabled:0==t.exportForm.fileName.length},on:{click:t.exportPrintResult}},[t._v(" "+t._s(t.$t("h.confirmBtn"))+" ")])],1)],1)]),e("true-progress-dialog",{ref:"tpdRef",attrs:{loadingTitle:t.$t("h.title45"),successTitle:t.$t("h.title46"),errorTitle:t.$t("h.title47"),percentage:t.percentageNum}})],1)},p=[],m=(i(82801),i(76080)),g=i(40926),f=i(92243),b=i(79992),y=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{visible:t.trueProgressDialogVisible,"show-close":!1,"close-on-click-modal":!1,"close-on-press-escape":!1,"custom-class":"ture_ProgressDialog",top:"35vh"},on:{"update:visible":function(e){t.trueProgressDialogVisible=e},closed:function(e){t.resultIcon="loading"}}},["loading"==t.resultIcon?e("div",{staticClass:"loading"},[e("span",[t._v(t._s(t.loadingTitle)),e("i",{staticClass:"el-icon-loading"})]),e("el-progress",{attrs:{"text-inside":!0,"stroke-width":26,percentage:t.percentage}})],1):t._e(),"success"==t.resultIcon?e("div",[e("i",{staticClass:"el-icon-success"}),e("span",[t._v(t._s(t.successTitle)+"}")])]):t._e(),"error"==t.resultIcon?e("div",[e("i",{staticClass:"el-icon-error"}),e("span",[t._v(t._s(t.errorTitle))])]):t._e()])},$=[],v={data(){return{trueProgressDialogVisible:!1,resultIcon:"loading"}},props:{percentage:{type:Number,default:0},loadingTitle:{type:String,default:"正在加载中"},successTitle:{type:String,default:"成功"},errorTitle:{type:String,default:"失败"}},methods:{}},F=v,k=i(1001),D=(0,k.Z)(F,y,$,!1,null,"59f45458",null),C=D.exports,T={data(){var t=(t,e,i)=>{const s=/^[A-Za-z0-9]+$/;!s.test(e)&&e||i(),i(new Error(this.$t("h.tips188")))},e=(t,e,i)=>{const s=/^[A-Za-z0-9]{4,4}$/;!s.test(e)&&e||i(),i(new Error(this.$t("h.tips189")))};return{tableData:[],exportResultDialogVisible:!1,exportForm:{fileName:""},exportFormRules:{fileName:[{required:!0,message:this.$t("h.tips3")+this.$t("h.formTips16"),trigger:"blur"}]},exportPrintResultData:[],loading:!1,refreshLoading:!1,pageSize:10,cruuentSize:1,exportFlag:!0,resultList:[],printProgressDialogVisible:!1,printText:"",dialogVisible:!1,multipleSelection:[],ruleForm:{printName:"",printNum:"",moban:"",mobanSize:"50%",transverse:"0",longitudinal:"0",concentration:"8",Rfid:!0,desc:!1,password:"",userData:"",oldResvSect:""},ruleFormRules:{printName:[{required:!0,message:this.$t("h.tips4")+this.$t("h.formTips1"),trigger:"change"}],moban:[{required:!0,message:this.$t("h.tips4")+this.$t("h.formTips17"),trigger:"change"}],userData:[{required:!1,message:this.$t("h.tips3")+this.$t("h.formTips18"),trigger:"blur"},{validator:t,trigger:"blur"}],oldResvSect:[{validator:e,trigger:"blur"}]},colSize:8,timer:"",activeNames:["1"],body:{printLab:[]},symbol:[],printer:"",facilityKey:"",ListIndex:"",printerDpi:"",NUMList:[],printerType:"",printerName:"",assetTagsTemplate:[],assetTagsSrcList:[],printSelectList:[],printAssetNames:[],tagsloading:null,percentageNum:0,printStat:null,rfidVersio:{rfid_version:"",service_version:""}}},components:{TrueProgressDialog:C},computed:{pagMultipleSelection(){return this.multipleSelection.slice((this.cruuentSize-1)*this.pageSize,this.cruuentSize*this.pageSize)},isTrueImg(){for(let t=0;t<this.multipleSelection.length;t++)if(this.multipleSelection[t].err)return!0;return!1},isSave(){return!this.printerName}},props:{userInfo:{type:Object,default(){return{}}},selectAssetsData:{type:Array,default(){return[]}}},watch:{"ruleForm.printName"(t){""!=t&&(this.loading=!0,this.printSelectList=[],this.facilityKey?(0,m._u)({code:3,key:this.facilityKey}).then((()=>{this.facilityKey="",(0,m._u)({code:2,devType:this.symbol[this.ListIndex].deType,param:t}).then((async t=>{if(this.$message.success(this.$t("h.tips51")),this.facilityKey=t.data,this.printerName=this.symbol[this.ListIndex].name,this.printerType=this.symbol[this.ListIndex].deType,this.printerName){let t=this.assetTagsTemplate.find((t=>t._id==this.ruleForm.moban)).deviceRelate,e=t.find((t=>-1!=this.printerName.indexOf(t.printModel)));e&&(this.ruleForm.transverse=e.leftMargin,this.ruleForm.longitudinal=e.topMargin,this.ruleForm.concentration=e.printDarkness)}window.localStorage.setItem("facilityKey",t.data),await this.lookPrint(2)})).catch((()=>(this.loading=!1,this.$alert(this.$t("h.tips52"),"Tips",{showClose:!1,confirmButtonText:this.$t("h.confirmBtn"),callback:()=>{this.dialogVisible=!1}}),this.$message(this.$t("h.tips53")))))})).catch((()=>{this.$message.error(this.$t("h.tips54")),(0,m._u)({code:2,devType:this.symbol[this.ListIndex].deType,param:t}).then((async t=>{if(this.$message.success(this.$t("h.tips51")),this.facilityKey=t.data,this.printerName=this.symbol[this.ListIndex].name,this.printerType=this.symbol[this.ListIndex].deType,this.printerName){let t=this.assetTagsTemplate.find((t=>t._id==this.ruleForm.moban)).deviceRelate,e=t.find((t=>-1!=this.printerName.indexOf(t.printModel)));e&&(this.ruleForm.transverse=e.leftMargin,this.ruleForm.longitudinal=e.topMargin,this.ruleForm.concentration=e.printDarkness)}window.localStorage.setItem("facilityKey",t.data),await this.lookPrint(2)})).catch((()=>(this.loading=!1,this.$alert(this.$t("h.tips52"),"Tips",{showClose:!1,confirmButtonText:this.$t("h.confirmBtn"),callback:()=>{this.dialogVisible=!1}}),this.$message(this.$t("h.tips53")))))})):(0,m._u)({code:2,devType:this.symbol[this.ListIndex].deType,param:t}).then((async t=>{if(this.$message.success(this.$t("h.tips51")),this.facilityKey=t.data,this.printerName=this.symbol[this.ListIndex].name,this.printerType=this.symbol[this.ListIndex].deType,this.printerName){let t=this.assetTagsTemplate.find((t=>t._id==this.ruleForm.moban)).deviceRelate,e=t.find((t=>-1!=this.printerName.indexOf(t.printModel)));e&&(this.ruleForm.transverse=e.leftMargin,this.ruleForm.longitudinal=e.topMargin,this.ruleForm.concentration=e.printDarkness)}window.localStorage.setItem("facilityKey",t.data),await this.lookPrint(2)})).catch((t=>(console.log(t),this.loading=!1,this.$alert(this.$t("h.tips52"),"Tips",{showClose:!1,confirmButtonText:this.$t("h.confirmBtn"),callback:()=>{this.dialogVisible=!1}}),this.$message(this.$t("h.tips53"))))))},printSelectList(t,e){let i=this.selectAssetsData.length,s=t.length;this.percentageNum=Math.trunc(s/i*100),i==s&&(this.$refs["tpdRef"].trueProgressDialogVisible=!1,this.print())}},methods:{async getAssetTagsTemplate(){const{data:t}=await(0,m.Ys)({func:"S0019",userId:this.userInfo._id,token:this.userInfo.token,requstData:{type:1}}).catch((()=>this.$message.error(this.$t("h.tips18"))));if(0!=t.code)return this.$message.error(t.data);this.assetTagsTemplate=t.data},lookClose(){this.exportPrintResultData=[],this.multipleSelection=[],this.printSelectList=[],this.printerDpi="",this.printerName="",this.assetTagsSrcList=[],this.printAssetNames=[],this.symbol=[],this.facilityKey&&this.closePrint(),this.ruleForm.password="",this.$refs["ruleFormRef"].resetFields(),this.$emit("refreshAssets"),clearInterval(this.timer)},printingSetout(){this.$refs["ruleFormRef"].validate((t=>{if(!t)return!1;this.selectAssetsData.length==this.printSelectList.length?(this.printStat=null,this.print()):(this.$refs["tpdRef"].trueProgressDialogVisible=!0,this.createPrintTags(this.printerDpi))}))},print(){if(this.printText=this.$t("h.title48"),this.printProgressDialogVisible=!0,this.ruleForm.oldResvSect?this.ruleForm.password="00F300A2"+this.strToHexCharCode(this.ruleForm.oldResvSect):this.ruleForm.password="","RFID"==this.printerType)for(let t=0;t<this.printSelectList.length;t++){let e=this.selectAssetsData[t].printAmount?Number(this.selectAssetsData[t].printAmount):0;this.body.printLab[t]={tag:8,printDpi:parseInt(this.printerDpi),xOffset:parseInt(this.ruleForm.transverse),yOffset:parseInt(this.ruleForm.longitudinal),density:parseInt(this.ruleForm.concentration),epcSect:this.printSelectList[t].epc,userSect:this.strToHexCharCode(this.ruleForm.userData),lockLab:0,encodeLab:0,startIndex:e,labAmount:this.ruleForm.printNum,datEncode:"Base64",datFmt:"Img",prnDats:this.printSelectList[t].base.split(",")[1]},0==this.ruleForm.Rfid?this.body.printLab[t].epcSect="":0==this.ruleForm.desc&&(this.body.printLab[t].userSect=""),(0,m.C3)({func:"SU0003",userId:this.userInfo._id,token:this.userInfo.token,requstData:{substanceId:this.selectAssetsData[t].substanceId,printAmount:e+this.ruleForm.printNum}}).then((({data:t})=>{if("-1"==t.code)return this.$message.error(t.data)})).catch((t=>{this.$message.error(t)}))}this.NUMList=this.body.printLab,(0,m.aJ)("post",{key:this.facilityKey,sendCode:"1"},this.base64Encode(JSON.stringify(this.body))).then((t=>{this.resultList=[],this.exportFlag=!0,this.timer=setInterval((async()=>{await this.lookPrint(0)}),2400),this.body.printLab=[]})).catch((t=>{this.body.printLab=[],this.printText=`${this.$t("h.tips55")}，<span class='colseSpan'>${this.$t("h.tips56")}<span>`}))},selectChange(t){this.ListIndex=this.symbol.findIndex((e=>e.value==t))},printSelectClear(){this.closePrint()},closePrint(){(0,m._u)({code:3,key:this.facilityKey}).then((t=>{this.ruleForm.printName="",this.facilityKey="",this.printerName="",this.printerType="",this.$message.success(this.$t("h.tips57"))})).catch((t=>this.$message.error(this.$t("h.tips58"))))},strToHexCharCode(t){if(""===t)return"";for(var e=[],i=0;i<t.length;i++)e.push(t.charCodeAt(i).toString(16));return e.join("")},openPrint(){this.getRfidVersion(),this.ruleForm.moban=parseInt(window.localStorage.getItem("inventoryTemaplateId")),this.assetTagsTemplate.some((t=>t._id==this.ruleForm.moban))||(this.ruleForm.moban=this.assetTagsTemplate[0]._id||1),this.openApplyAssetTags();const t=window.localStorage.getItem("facilityKey");t&&(0,m._u)({code:3,key:t}),(0,m._u)({code:1}).then((t=>{t.data.symbol.forEach((t=>{t.split(";")[0].toLowerCase()!="MFG:DASCOM".toLowerCase()&&t.split(";")[0].toLowerCase()!="MFG:Tally Dascom".toLowerCase()||-1==t.split(";")[1].indexOf("RFID")||this.symbol.push({name:t.split(";")[2].split(":")[1],value:t,deType:t.split(";")[1].split(":")[1]})})),this.$message.success("枚举成功")})).catch((t=>{if(void 0!=t.response)return 400==t.response.status?this.$notify.error({title:this.$t("h.title27"),message:this.$t("h.tips63")}):this.$notify.error({title:this.$t("h.title27"),message:this.$t("h.tips60")+","+this.$t("h.restartThePrinter")});this.$confirm(this.$t("h.tips61"),this.$t("h.title18"),{confirmButtonText:this.$t("h.confirmBtn"),cancelButtonText:this.$t("h.cancelBtn"),type:"warning"}).then((()=>{const t=document.createElement("a"),e=`https://asset.dascomyun.com/websocket/upload/${this.$t("h.assetTemplate6")}.msi`;t.style.display="none",t.href=e,t.setAttribute(`${this.$t("h.assetTemplate6")}.msi`,name),document.body.appendChild(t),t.click(),window.URL.revokeObjectURL(t.href),document.body.removeChild(t)})).catch((()=>{this.$message({type:"info",message:this.$t("h.tips62")})}))}))},refreshPrinter(){this.refreshLoading=!0,this.facilityKey&&this.closePrint(),this.ruleForm.printName="",this.printerDpi="",this.printerName="",this.symbol=[],(0,m._u)({code:1}).then((t=>{t.data.symbol.forEach((t=>{t.split(";")[0].toLowerCase()!="MFG:DASCOM".toLowerCase()&&t.split(";")[0].toLowerCase()!="MFG:Tally Dascom".toLowerCase()||-1==t.split(";")[1].indexOf("RFID")||this.symbol.push({name:t.split(";")[2].split(":")[1],value:t,deType:t.split(";")[1].split(":")[1]})})),this.refreshLoading=!1,this.$message.success(this.$t("h.tips64"))})).catch((t=>{if(this.refreshLoading=!1,void 0!=t.response)return 400==t.response.status?this.$notify.error({title:this.$t("h.title27"),message:this.$t("h.tips63")}):this.$notify.error({title:this.$t("h.title27"),message:this.$t("h.tips60")+","+this.$t("h.restartThePrinter")});this.$confirm(this.$t("h.tips61"),this.$t("h.title18"),{confirmButtonText:this.$t("h.confirmBtn"),cancelButtonText:this.$t("h.cancelBtn"),type:"warning"}).then((()=>{const t=document.createElement("a"),e=`https://asset.dascomyun.com/websocket/upload/${this.$t("h.assetTemplate6")}.msi`;t.style.display="none",t.href=e,t.setAttribute(`${this.$t("h.assetTemplate6")}.msi`,name),document.body.appendChild(t),t.click(),window.URL.revokeObjectURL(t.href),document.body.removeChild(t)})).catch((()=>{this.$message({type:"info",message:this.$t("h.tips62")})}))}))},lookPrint(t,e){(0,m._u)({code:4,key:this.facilityKey,param:parseInt(t)}).then((async i=>{if(2==t)null==i.data.DeviceDPI||void 0==i.data.DeviceDPI||""==i.data.DeviceDPI?this.printerDpi=203:this.printerDpi=i.data.DeviceDPI,this.loading=!1;else if(0==t){const t=i.data.statInfo.stat;this.printStat=i.data.statInfo.stat;const e=i.data.statInfo.errCode,s=i.data.statInfo.labs,a=i.data.statInfo.totals;this.printText=`${this.$t("h.tips65")}<span>${s}</span>/<span>${a}</span>${this.$t("h.tips66")} ... `,"End"==t&&0==e?(clearInterval(this.timer),this.lookPrint(1,!0),this.printText=`${this.$t("h.tips67")}`):"Ready"==t?(clearInterval(this.timer),this.printText=`${this.$t("h.tips68")}`,this.lookPrint(1,!0)):"End"==t&&0!=e&&0==s&&0==a?(clearInterval(this.timer),this.lookPrint(1,!0),1==e?this.printText=`${this.$t("h.tips70")} + ${this.$t("h.tips69")}`:2==e?this.printText=`${this.$t("h.tips71")} + ${this.$t("h.tips69")}`:3==e&&(this.printText=`${this.$t("h.tips72")} + ${this.$t("h.tips69")}`)):"End"==t&&0!=e&&(clearInterval(this.timer),this.lookPrint(1,!0),this.printText=`${this.$t("h.tips67")}`)}else if(1==t){this.resultList=i.data.labInfo;for(let t=0;t<this.resultList.length;t++)for(let e=0;e<this.selectAssetsData.length;e++)this.resultList[t].epc.slice(0,12)==this.selectAssetsData[e].epc&&(this.resultList[t].name=this.selectAssetsData[e].name);if(e){this.exportFlag=!1,this.exportPrintResultData=this.printAssetNames,this.resultList.forEach(((t,e)=>{for(let i=0;i<this.resultList.length;i++)i!=e&&(this.resultList[i].tid==this.resultList[e].tid?t.tips=this.$t("h.tips73"):t.tips=this.$t("h.tips74"))}));for(let t=0;t<this.resultList.length;t++)for(let e in this.resultList[t])this.exportPrintResultData[t]&&(this.exportPrintResultData[t][e]=this.resultList[t][e])}}})).catch((e=>{2==t&&(this.$message.error(this.$t("h.tips75")),this.loading=!1),clearInterval(this.timer),this.printText=`${this.$t("h.tips76")},<span class='colseSpan'>${this.$t("h.tips56")}<span>`}))},closePrintPlan(t){const e=t.target.className;"colseSpan"==e&&(this.printProgressDialogVisible=!1)},async recordPrintHistory(t){"RFID"!=this.printerType&&t.forEach(((t,e)=>{t.epc=this.printSelectList[e].epc}));const e=this.$refs["printerSelectRef"].selected.label,i=this.$refs["printTempSelectRef"].selected.label,{data:s}=await(0,m.Vx)({func:"U0028",userId:this.userInfo._id,token:this.userInfo.token,requstData:{label:t,_id:this.userInfo.staffId,printer:e,templateName:i,horizontalPosition:this.ruleForm.transverse,verticalPosition:this.ruleForm.longitudinal,printDensity:this.ruleForm.concentration,userArea:this.ruleForm.userData,accessPassword:this.ruleForm.oldResvSect}}).catch((t=>(clearInterval(this.timer),!1)));if(0!=s.code)return clearInterval(this.timer),this.$notify.error({title:this.$t("h.title27"),message:s.data+this.$t("h.tips77")});clearInterval(this.timer)},SplitDemo(t){let e=t.split(";");return e},base64Encode(t){var e;return e=encodeURIComponent(t),e=unescape(e),e=window.btoa(e),e},reBytesStrArr1(t,e){if(!e||void 0==e)return"";let i=0,s=0;for(let r=0;r<e.length;r++){var a=e.charCodeAt(r);if(48<=a&&a<=58)i+=a-48;else if(97<=a&&a<=102)i+=a-97+10;else{if(!(65<=a&&a<=70))return;i+=a-65+10}r%2!=0?(t[s++]=i,i=0):i*=16}return 0!=e.length&&e.length%2!=0&&(t[s]=i),t},templateSelectChange(t){if(this.multipleSelection=[],this.printSelectList=[],this.printAssetNames=[],this.printerName){let e=this.assetTagsTemplate.find((e=>e._id==t)).deviceRelate,i=e.find((t=>-1!=this.printerName.indexOf(t.printModel)));i&&(this.ruleForm.transverse=i.leftMargin,this.ruleForm.longitudinal=i.topMargin,this.ruleForm.concentration=i.printDarkness)}this.openApplyAssetTags(),this.$confirm(this.$t("h.tips78"),this.$t("h.title18"),{confirmButtonText:this.$t("h.confirmBtn"),cancelButtonText:this.$t("h.cancelBtn"),cancelButtonClass:"changeCancelButton",type:"warning"}).then((()=>{this.checkRFIDTag()})).catch((()=>{this.$message({type:"info",message:this.$t("h.tips79")})}))},async openApplyAssetTags(){let t=document.createElement("CANVAS");await this.recApplyData(this.selectAssetsData,t,0,!1)},async createPrintTags(t){const e=document.createElement("canvas");await this.recApplyData(this.selectAssetsData,e,0,!0,t)},async recApplyData(t,e,i,s,a){if(i>t.length-1||!this.dialogVisible)return this.dialogVisible||(this.exportPrintResultData=[],this.multipleSelection=[],this.printSelectList=[],this.printerDpi="",this.assetTagsSrcList=[],this.printAssetNames=[]),!1;let r=this.assetTagsTemplate.find((t=>t._id==this.ruleForm.moban)),l={};if(r.html){let e=document.createElement("div");e.style.position="fixed",e.style.top="-1000px",document.body.appendChild(e),l=await(0,f.X)(r,e,t[i],a),document.body.removeChild(e)}else l=await(0,g.h)(r,e,t[i],s,a);0==s?(this.multipleSelection.push(l),this.assetTagsSrcList.push(l.base)):(this.printSelectList.push(l),this.printAssetNames.push(l)),i++,this.recApplyData(t,e,i,s,a)},mobanSizeChange(t){switch(t){case"100%":this.colSize=24;break;case"75%":this.colSize=12;break;case"50%":this.colSize=8;break;case"25%":this.colSize=6;break}},handleSizeChange(t){this.pageSize=t},handleCurrentChange(t){this.cruuentSize=t},checkRFIDTag(){if(!this.facilityKey)return this.$notify.error({title:this.$t("h.title27"),message:this.$t("h.tips80")});let t=0;"RFID"==this.printerType&&(t=1),this.loading=!0,(0,m._u)({code:5,key:this.facilityKey,param:5,type:t}).then((t=>{this.loading=!1,this.$message.success(this.$t("h.tips81"))})).catch((t=>{this.loading=!1,this.$message.error(this.$t("h.tips82"))}))},exportPrintResult(){this.$refs["exportFormRef"].validate((t=>{if(!t)return!1;const e=this.exportPrintResultData.map(((t,e)=>({index:e+1,code:t.code,name:t.name,EPC:t.epc,tid:t.tid,ackCode:t.ackCode}))),i="序号,物品编码,物品名称,物品EPC,标签TID,校验码\n";(0,b.zb)(i,e,this.exportForm.fileName),this.exportResultDialogVisible=!1}))},restartPrinter(){this.$refs["ruleFormRef"].validate((t=>{if(!t)return this.$notify.error({title:this.$t("h.title27"),message:this.$t("h.tips80")});this.$confirm(this.$t("h.tips83"),this.$t("h.title18"),{confirmButtonText:this.$t("h.confirmBtn"),cancelButtonText:this.$t("h.cancelBtn"),type:"warning"}).then((()=>{(0,m._u)({code:5,param:1,key:this.facilityKey}).then((t=>{this.$message.success(this.$t("h.tips84")),this.dialogVisible=!1})).catch((t=>{this.$message.error(this.$t("h.tips85"))}))})).catch((()=>{this.$message({type:"info",message:this.$t("h.tips86")})}))}))},tableRowClassName({row:t,rowIndex:e}){if("是"==t.tips)return"repetition-row"},catchLastPrintResult(){this.printProgressDialogVisible=!0},async saveMarginParam(){let t=this.assetTagsTemplate.find((t=>t._id==this.ruleForm.moban)).deviceRelate;t.forEach((t=>{-1!=this.printerName.indexOf(t.printModel)&&(t.leftMargin=this.ruleForm.transverse,t.topMargin=this.ruleForm.longitudinal,t.printDarkness=this.ruleForm.concentration)}));const{data:e}=await(0,m.Vx)({func:"U0018",userId:this.userInfo._id,token:this.userInfo.token,requstData:{_id:this.ruleForm.moban,deviceRelate:t,permissonId:23,type:1}});if(0!=e.code)return this.$message.error(e.data);this.$message.success(e.data)},getRfidVersion(){(0,m._u)({code:4,param:4}).then((t=>{this.rfidVersio.rfid_version=t.data.rfid_version,this.rfidVersio.service_version=t.data.service_version})).catch((t=>{this.rfidVersio="未知版本"}))}},created(){this.getAssetTagsTemplate()},mounted(){},beforeDestroy(){clearInterval(this.timer)}},S=T,x=(0,k.Z)(S,d,p,!1,null,"d33831fe",null),I=x.exports,R=i(17817),_=i(83151),w={components:{DsQueryForm:l.Z,DsQueryFormLeftPanel:n.Z,DsQueryFormRightPanel:o.Z,DsPagination:h.Z,DsTable:u.Z,DsFilterDrawer:c.Z,InventoryPrintComponents:I,DsFilterTag:R.Z},computed:{...(0,r.rn)(["userInfo"]),tableDataDisplay(){let t=[],e=0,i=this.paginationForm.pageSize-1;if(1==this.paginationForm.currentPage)for(let s=e;s<i;s++)this.tableData[s]&&t.push(this.tableData[s]);else for(let s=i*(this.paginationForm.currentPage-1);s<i*this.paginationForm.currentPage;s++)this.tableData[s]&&t.push(this.tableData[s]);return t},total(){return this.tableData.length}},data(){return{userId:"",token:"",employeeData:[],tableData:[],bodyFilteringVisible:!1,bodyFiltering:{sortingNameCondition:"IS",sortingName:"",codeCondition:"IS",code:"",nameCondition:"IS",name:"",barCodeCondition:"IS",barCode:"",specificationCondition:"IS",specification:"",logoCondition:"IS",logo:"",measureUnitCondition:"IS",measureUnit:"",amountCondition:"IS",amount:"",priceCondition:"IS",price:"",moneyCondition:"IS",money:"",remarkCondition:"IS",remark:"",houseId:""},bodyTableConfig:{selection:!0},columns:_.Od,selectAssetsData:[],paginationForm:{currentPage:1,pageSize:20},highFilterTags:[],warehouseData:[],houseId:"",houseNameData:[]}},methods:{handleCloseFilterTag(t){switch(t.keyStr){case"sortingName":this.bodyFiltering.sortingName="";break;case"code":this.bodyFiltering.code="";break;case"name":this.bodyFiltering.name="";break;case"barCode":this.bodyFiltering.barCode="";break;case"specification":this.bodyFiltering.specification="";break;case"logo":this.bodyFiltering.logo="";break;case"measureUnit":this.bodyFiltering.measureUnit="";break;case"amount":this.bodyFiltering.amount="";break;case"price":this.bodyFiltering.price="";break;case"money":this.bodyFiltering.money="";break;case"remark":this.bodyFiltering.remark="";break;default:this.bodyFiltering.houseId="";break}this.highFilterTags.splice(this.highFilterTags.indexOf(t),1);let e=[{key:"sortingName",value:"",handle:""},{key:"code",value:"",handle:""},{key:"name",value:"",handle:""},{key:"barCode",value:"",handle:""},{key:"specification",value:"",handle:""},{key:"logo",value:"",handle:""},{key:"measureUnit",value:"",handle:""},{key:"amount",value:"",handle:""},{key:"price",value:"",handle:""},{key:"money",value:"",handle:""},{key:"remark",value:"",handle:""},{key:"houseId",value:"",handle:""}];this.highFilterTags.forEach((t=>{e.forEach((e=>{t.keyStr==e.key&&("houseId"==e.key?e.value=t.uploadValue:e.value=t.value,e.handle=t.handle)}))})),e=e.filter((t=>{if(t.value)return t})),(0,m.C3)({func:"SA0001",userId:this.userId,token:this.token,requstData:{params:e}}).then((({data:t})=>{if("-1"==t.code)return this.$message.error(t.data);this.tableData=t.data,this.tableData&&0!=this.tableData.length||(this.tableData=[]),this.tableData.forEach((t=>{t.image&&"h"!=t.image[0]&&(t.image=window.$EXCEL_URL+"image/"+t.image,t.prop=t.image)}))})).catch((t=>{this.$message.error(t)}))},changeSizePage(t){this.paginationForm.currentPage=t.page,this.paginationForm.pageSize=t.limit},exportFile(){(0,m.C3)({func:"SA0001",userId:this.userId,token:this.token,requstData:{params:[],pull:1}}).then((({data:t})=>{if("-1"==t.code)return this.$message.error(t.data);(0,b.M)(window.$EXCEL_URL+t.data),this.$message.success(this.$t("h.exportSuccessful"))})).catch((t=>{this.$message.error(t)}))},getEmployeeData(){(0,m.Ys)({func:"S0005",userId:this.userId,token:this.token,requstData:{_id:""}}).then((({data:t})=>{if("-1"==t.code)return this.$message.error(t.data);t.data?this.employeeData=t.data:this.employeeData=[]})).catch((t=>{this.$message.error(t)}))},getWarehouseData(){(0,m.C3)({func:"ST0001",userId:this.userId,token:this.token,requstData:{}}).then((({data:t})=>{if("-1"==t.code)return this.$message.error(t.data);if(t.data){let e=t.data;e.forEach((t=>{this.warehouseData.push({name:t.name,value:t.houseId,state:t.state})}))}})).catch((t=>{this.$message.error(t)}))},getData(){(0,m.C3)({func:"SA0001",userId:this.userId,token:this.token,requstData:{params:[]}}).then((({data:t})=>{this.tableData=t.data,this.tableData||(this.tableData=[]),this.tableData.forEach((t=>{t.image&&"h"!=t.image[0]&&(t.image=window.$EXCEL_URL+"image/"+t.image,t.prop=t.image)}))})).catch((t=>{this.$message.error(t)}))},resetBodyFilterForm(){this.highFilterTags=[],this.$refs["body"].resetFields(),(0,m.C3)({func:"SA0001",userId:this.userId,token:this.token,requstData:{params:[]}}).then((({data:t})=>{if("-1"==t.code)return this.$message.error(t.data);this.tableData=t.data,this.tableData&&0!=this.tableData.length||(this.tableData=[]),this.tableData.forEach((t=>{t.image&&"h"!=t.image[0]&&(t.image=window.$EXCEL_URL+"image/"+t.image,t.prop=t.image)})),this.$refs["body"].resetFields(),this.bodyFilteringVisible=!1})).catch((t=>{this.$message.error(t)}))},submitBodyFilterForm(){let t=[{key:"sortingName",value:this.bodyFiltering.sortingName,handle:this.bodyFiltering.sortingNameCondition},{key:"code",value:this.bodyFiltering.code,handle:this.bodyFiltering.codeCondition},{key:"name",value:this.bodyFiltering.name,handle:this.bodyFiltering.nameCondition},{key:"barCode",value:this.bodyFiltering.barCode,handle:this.bodyFiltering.barCodeCondition},{key:"specification",value:this.bodyFiltering.specification,handle:this.bodyFiltering.specificationCondition},{key:"logo",value:this.bodyFiltering.logo,handle:this.bodyFiltering.logoCondition},{key:"measureUnit",value:this.bodyFiltering.measureUnit,handle:this.bodyFiltering.measureUnitCondition},{key:"amount",value:this.bodyFiltering.amount,handle:this.bodyFiltering.amountCondition},{key:"price",value:this.bodyFiltering.price,handle:this.bodyFiltering.priceCondition},{key:"money",value:this.bodyFiltering.money,handle:this.bodyFiltering.moneyCondition},{key:"remark",value:this.bodyFiltering.remark,handle:this.bodyFiltering.remarkCondition},{key:"houseId",value:this.bodyFiltering.houseId,handle:"IS"}];t=t.filter((t=>{if(t.value)return t})),(0,m.C3)({func:"SA0001",userId:this.userId,token:this.token,requstData:{params:t}}).then((({data:e})=>{if(this.highFilterTags=[],"-1"==e.code)return this.$message.error(e.data);this.tableData=e.data,this.tableData&&0!=this.tableData.length||(this.tableData=[]),t.forEach((t=>{if("sortingName"==t.key)this.highFilterTags.push({name:this.$t("h.categoryName"),value:t.value,keyStr:t.key,handle:t.handle});else if("code"==t.key)this.highFilterTags.push({name:this.$t("h.title166"),value:t.value,keyStr:t.key,handle:t.handle});else if("name"==t.key)this.highFilterTags.push({name:this.$t("h.formTips38"),value:t.value,keyStr:t.key,handle:t.handle});else if("barCode"==t.key)this.highFilterTags.push({name:this.$t("h.formTips63"),value:t.value,keyStr:t.key,handle:t.handle});else if("specification"==t.key)this.highFilterTags.push({name:this.$t("h.columns27"),value:t.value,keyStr:t.key,handle:t.handle});else if("logo"==t.key)this.highFilterTags.push({name:this.$t("h.title198"),value:t.value,keyStr:t.key,handle:t.handle});else if("measureUnit"==t.key)this.highFilterTags.push({name:this.$t("h.columns28"),value:t.value,keyStr:t.key,handle:t.handle});else if("amount"==t.key)this.highFilterTags.push({name:this.$t("h.number"),value:t.value,keyStr:t.key,handle:t.handle});else if("price"==t.key)this.highFilterTags.push({name:this.$t("h.price"),value:t.value,keyStr:t.key,handle:t.handle});else if("money"==t.key)this.highFilterTags.push({name:this.$t("h.columns47"),value:t.value,keyStr:t.key,handle:t.handle});else if("remark"==t.key)this.highFilterTags.push({name:this.$t("h.comment"),value:t.value,keyStr:t.key,handle:t.handle});else if("houseId"==t.key){let e="";this.warehouseData.forEach((i=>{i.value==t.value&&(e=i.name)})),this.highFilterTags.push({name:this.$t("h.formTips54"),value:e,keyStr:t.key,uploadValue:t.value,handle:t.handle})}})),this.bodyFilteringVisible=!1})).catch((t=>{this.$message.error(t)}))},itemListSelete(t){this.selectAssetsData=t},print(){return 0==this.selectAssetsData.length?this.$message.error(this.$t("h.tips121")):this.selectAssetsData.length>10?this.$message.error(this.$t("h.tips122")+10+this.$t("h.tips123")):void(this.$refs.apdRef.dialogVisible=!0)}},created(){this.userId=JSON.parse(sessionStorage.getItem("vuex")).userInfo._id,this.token=JSON.parse(sessionStorage.getItem("vuex")).userInfo.token,this.getData(this.userId,this.token),this.getEmployeeData(),this.getWarehouseData()}},A=w,z=(0,k.Z)(A,s,a,!1,null,"3a096359",null),N=z.exports},78509:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAMAAADXqc3KAAAAAXNSR0IArs4c6QAAANtQTFRFAAAAQEC/MzPMKiqqQCqqQEC/PDy0QjmzRjWwRDOyRDuySDivRjayQzy1ST22RDm1QzexRjy0RTi2Qzi0Rzi0Rzm1RjmyRjm1Rjm2RTmyRTm1RTy1SDm1Rzm1RjuzRzq1Rzq1Rjm0Rjq0Rjq1Rzq0Rzq0RjmyRju1RjuzRTm0Rzu0Rjq1Rzq0RzuzRzu1Rjq0Rjq0Rzq0Rjq0RjqzRzu0Rju1RjqzRju0Rzu0Rzu0Rzu0Rju0Rzu1Rju0RjuzRzq0Rjq0Rzu0Rzu0Rzu0Rzu0Rzq0Rju1Rzu0Rzu0GyDpQAAAAEh0Uk5TAAQFBgwMERsdHh4gISYqLS4zO0RESExMUFlZWVlaW11hZmpuc3d4eHl9fX+MlJSVnaanqKmyubq6u7/M2N3e4+Tq6+74+fr743uhXQAAAQ5JREFUGBkFwYtC0mAYANCDmwFz1bKEbl5SpNjSldS6uvkjyvf+T+Q5AOVlN2y3Q3dZAoDie2rn0yybztt0UwDwPtU5QF6nE4BFXwFA1S+A434MAIz7YyhSBfA1/oygSgXWNcDriHgB6jXlJgc4ivg3AvmmtGwBOL14Bmg/6+YAADD75W4COI2IOANMBrsMMBrdR7wCZDu7DGA/4nEfkG3dTQAOI/4DTAbdHOBTxE+A2W/LFuA6ogG4+qLc5IC/EW8BeSpZ14D7iOeA1RpFquDsW0RcvwEvUwHvbsc4b5qmaQ5hfPsRWPQVAFT9AuBDWuUA+SqdAHBwk9rZdG9vOmvTjwMAUC674eFh6JYl4Al+PCInOKf+DQAAAABJRU5ErkJggg=="},33642:function(t,e,i){t.exports=i.p+"img/printLoading.cb21d28f.gif"}}]);