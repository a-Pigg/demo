"use strict";(self["webpackChunk_4010_assetweb"]=self["webpackChunk_4010_assetweb"]||[]).push([[3798],{42041:function(e,t,a){a.d(t,{Z:function(){return c}});var s=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{top:"0","custom-class":"dialog",fullscreen:"",visible:e.dialogVisible,"show-close":!1},on:{"update:visible":function(t){e.dialogVisible=t},opened:e.dialogVisibleOpened,close:e.dialogVisibleClose,closed:e.dialogVisibleClosed}},[t("div",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[t("div",{staticClass:"left"},[t("el-button",{attrs:{type:"primary",icon:"el-icon-arrow-left",circle:""},on:{click:function(t){e.dialogVisible=!1}}}),t("span",{staticClass:"title"},[e._v(e._s(e.title))])],1),t("div",{staticClass:"right"},[t("el-button",{attrs:{size:"small"},on:{click:e.cancalFrom}},[e._v(e._s(e.$t("h.cancelBtn")))]),t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.sbumitForm}},[e._v(e._s(e.$t("h.confirmBtn")))])],1)]),t("div",{ref:"dialogbodyRef",staticClass:"dialog-body"},[t("div",{staticClass:"content",style:"width:"+e.contentWidth},[t("div",{staticClass:"form-label"},[e._t("form")],2),t("div",{staticClass:"table-label"},[t("div",{staticClass:"table-label-head"},[e._t("btns")],2),t("div",{staticClass:"table-label-content"},[e._t("table")],2)])])])])},i=[],o=a(63042),n={data(){return{}},props:{title:{type:String,default:o.a.t("h.title12")},newBillsDialogVisible:{type:Boolean,default:!1},contentWidth:{type:String,default:"950px"}},computed:{dialogVisible:{get(){return this.newBillsDialogVisible},set(e){this.$emit("update:newBillsDialogVisible",e)}}},methods:{cancalFrom(){this.dialogVisible=!1},sbumitForm(){this.$emit("sbumitForm")},dialogVisibleClose(){this.$emit("close"),this.$refs.dialogbodyRef.scrollTop=0},dialogVisibleClosed(){this.$emit("closed")},dialogVisibleOpened(){this.$emit("opened")}}},r=n,l=a(1001),d=(0,l.Z)(r,s,i,!1,null,"130c4832",null),c=d.exports},88565:function(e,t,a){a.d(t,{Z:function(){return p}});var s=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{top:"0","custom-class":"changeGoodsDialog","show-close":!1,visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t},opened:e.dialogVisibleOpened}},[t("div",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[t("div",{staticClass:"left"},[t("span",[e._v(e._s(e.$t("h.title150"))+" "+e._s(e.$t("h.formTips46")))])]),t("div",{staticClass:"right"},[t("i",{staticClass:"el-icon-close",on:{click:function(t){e.dialogVisible=!1}}})])]),t("div",{staticClass:"dialog-body"},[t("div",{staticClass:"change-goods-filter"},[t("el-button",{staticClass:"advanced-filter-btn",attrs:{type:"text",size:"small"}},[e._v(e._s(e.$t("h.advancedBtn")))])],1),t("div",{staticClass:"change-goods-table"},[t("ds-table",{ref:"billsTableRef",attrs:{loading:e.loading,tableData:e.requstBills,columns:e.requstBillsColumns,tableConfig:e.requstBillsConfig,rowKey:e=>e.id},on:{handleSelectionChange:e.handleSelectionChange},scopedSlots:e._u([{key:"select",fn:function({scope:a}){return[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.purchasingSelect(a.row)}}},[e._v(e._s(e.$t("h.title150")))])]}},{key:"expand",fn:function({scope:a}){return t("div",{staticClass:"detail-table"},[t("ds-table",{attrs:{tableData:a.row.details,tableConfig:e.detailsConfig,columns:e.detailColumns}})],1)}}])})],1)]),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("ds-pagination",{attrs:{small:"",total:e.total,page:e.paginationForm.currentPage,limit:e.paginationForm.pageSize},on:{"update:page":function(t){return e.$set(e.paginationForm,"currentPage",t)},"update:limit":function(t){return e.$set(e.paginationForm,"pageSize",t)},pagination:e.getRequstBills}}),t("div",{staticClass:"btns"},[t("el-button",{attrs:{size:"mini"},on:{click:function(t){e.dialogVisible=!1}}},[e._v(e._s(e.$t("h.cancelBtn")))]),t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.save}},[e._v(e._s(e.$t("h.confirmBtn")))])],1)],1)])},i=[],o=(a(57658),a(20629)),n=a(83151),r=a(60983),l=a(93082),d=a(76080),c={components:{DsTable:r.Z,DsPagination:l.Z},data(){return{loading:!1,total:0,paginationForm:{currentPage:1,pageSize:20},requstBills:[],selectRequstBills:[],detailColumns:n.jW,detailsConfig:{index:!0}}},props:{changeDialogVisible:{type:Boolean,default:!1},requstBillsConfig:{type:Object,default:()=>{}},requstBillsColumns:{type:Array,default:()=>[]},updateRequstSelectState:{type:Array,default:()=>[]}},computed:{...(0,o.rn)(["userInfo"]),dialogVisible:{get(){return this.changeDialogVisible},set(e){this.$emit("update:changeDialogVisible",e)}}},methods:{getRequstBills(){this.loading=!0,(0,d.Ys)({func:"S0062",userId:this.userInfo._id,token:this.userInfo.token,requstData:{page:this.paginationForm.pageSize,index:this.paginationForm.currentPage}}).then((({data:e})=>{if(this.loading=!1,0!=e.code)return this.$message.error(e.data);this.total=e.data[0],this.requstBills=e.data[1],this.requstBills.forEach((e=>{let t=[];e.details.forEach((e=>{t.push(e.skuName)})),e.goodDetails=t.join("/")}))})).catch((()=>{this.loading=!1,this.$message.error(this.$t("h.tips18"))}))},purchasingSelect(e){this.$emit("select",e)},save(){this.$emit("save",this.selectRequstBills)},handleSelectionChange(e){this.selectRequstBills=e},dialogVisibleOpened(){this.$refs.billsTableRef.$refs.dsTableRef.clearSelection(),this.updateRequstSelectState.forEach((e=>{let t=this.requstBills.find((t=>t.id==e.purchasingId));this.$refs.billsTableRef.$refs.dsTableRef.toggleRowSelection(t,!0)})),this.getRequstBills()}}},u=c,h=a(1001),g=(0,h.Z)(u,s,i,!1,null,"a66ad6d2",null),p=g.exports},93082:function(e,t,a){a.d(t,{Z:function(){return d}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"ds-pagination"},[t("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},i=[],o={name:"DsPagination",data(){return{}},props:{total:{required:!0,type:Number},pageSizes:{type:Array,default(){return[20,50,100]}},page:{type:Number,default:1},limit:{type:Number,default:20},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0}},computed:{currentPage:{get(){return this.page},set(e){this.$emit("update:page",e)}},pageSize:{get(){return this.limit},set(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange(e){this.$emit("pagination",{page:this.currentPage,limit:e})},handleCurrentChange(e){this.$emit("pagination",{page:e,limit:this.pageSize})}}},n=o,r=a(1001),l=(0,r.Z)(n,s,i,!1,null,"2377c114",null),d=l.exports},92003:function(e,t,a){a.d(t,{Z:function(){return d}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"left-panel"},[e._t("default")],2)},i=[],o={name:"DsQueryFormLeftPanel"},n=o,r=a(1001),l=(0,r.Z)(n,s,i,!1,null,"71d76034",null),d=l.exports},89782:function(e,t,a){a.d(t,{Z:function(){return d}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"right-panel"},[e._t("default")],2)},i=[],o={name:"DsQueryFormRightPanel"},n=o,r=a(1001),l=(0,r.Z)(n,s,i,!1,null,"c6443ba6",null),d=l.exports},19698:function(e,t,a){a.d(t,{Z:function(){return d}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"ds-query-form"},[e._t("default")],2)},i=[],o={name:"DsQueryForm"},n=o,r=a(1001),l=(0,r.Z)(n,s,i,!1,null,"6c8bfb78",null),d=l.exports},66403:function(e,t,a){a.d(t,{Z:function(){return d}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"ds-search"},[t("el-input",{attrs:{size:"small",placeholder:e.$t("h.keyword"),"prefix-icon":"el-icon-search"},on:{input:e.onInput},model:{value:e.value,callback:function(t){e.value="string"===typeof t?t.trim():t},expression:"value"}},[t("el-button",{attrs:{slot:"suffix",type:"text",size:"small"},on:{click:e.search},slot:"suffix"},[e._v(e._s(e.$t("h.Search")))])],1)],1)},i=[],o={name:"DsSearchBtn",data(){return{}},props:{searchValue:{type:String}},computed:{value:{get(){return this.searchValue},set(e){this.$emit("update:searchValue",e)}}},methods:{search(){this.$emit("search")},onInput(e){""==e&&this.search()}}},n=o,r=a(1001),l=(0,r.Z)(n,s,i,!1,null,"5bd7b965",null),d=l.exports},39714:function(e,t,a){a.r(t),a.d(t,{default:function(){return $}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"change"},[t("el-card",{staticClass:"change-card"},[t("div",{staticClass:"change-card-header",attrs:{slot:"header"},slot:"header"},[t("ds-query-form",[t("ds-query-form-left-panel",[t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.newOrderChangeForm}},[e._v(e._s(e.$t("h.newBtn")))]),t("el-dropdown",{attrs:{trigger:"click"}},[t("el-button",{attrs:{size:"small"}},[e._v(" "+e._s(e.$t("h.editBtn"))),t("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",[e._v(e._s(e.$t("h.changeBtn")))]),t("el-dropdown-item",[e._v(e._s(e.$t("h.delBtn")))])],1)],1),t("el-dropdown",{attrs:{trigger:"click"}},[t("el-button",{attrs:{size:"small"}},[e._v(" "+e._s(e.$t("h.formTips5"))),t("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",[e._v(e._s(e.$t("h.printDoucmentBtn")))]),t("el-dropdown-item",[e._v(e._s(e.$t("h.tempSetBtn")))])],1)],1)],1),t("ds-query-form-right-panel",[t("ds-search-btn")],1)],1)],1),t("div",{staticClass:"change-card-content"},[t("div",{staticClass:"change-filter"},[t("el-button",{staticClass:"advanced-filter-btn",attrs:{type:"text",size:"small"}},[e._v(e._s(e.$t("h.advancedBtn")))])],1),t("div",{staticClass:"change-table"},[t("ds-table",{ref:"billsTableRef",attrs:{loading:e.tableLoading,tableData:e.orderChangeBills,columns:e.orderChangeBillsColumns,tableConfig:e.orderChangeBillsConfig,rowKey:e=>e.id}})],1),t("div",{staticClass:"change-pagination"},[t("ds-pagination",{attrs:{small:"",total:e.total,page:e.paginationForm.currentPage,limit:e.paginationForm.pageSize},on:{"update:page":function(t){return e.$set(e.paginationForm,"currentPage",t)},"update:limit":function(t){return e.$set(e.paginationForm,"pageSize",t)},pagination:e.getOrderChangeBills}})],1)])]),t("new-bills-dialog",{staticClass:"new-bill-dialog",attrs:{newBillsDialogVisible:e.newBillsDialogVisible},on:{"update:newBillsDialogVisible":function(t){e.newBillsDialogVisible=t},"update:new-bills-dialog-visible":function(t){e.newBillsDialogVisible=t},opened:e.newBillsDialogOpened,close:e.newBillsDialogClose,sbumitForm:e.sbumitOrderChangeForm}},[t("template",{slot:"form"},[t("el-form",{ref:"orderChangeFormRef",attrs:{"label-width":"100px",model:e.orderChangeForm,rules:e.orderChangeRules}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$t("h.changeDate"),prop:"date"}},[t("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:e.$t("h.tips4")+e.$t("h.changeDate")},model:{value:e.orderChangeForm.date,callback:function(t){e.$set(e.orderChangeForm,"date",t)},expression:"orderChangeForm.date"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$t("h.assetAttributes"),prop:"goodsId"}},[t("el-select",{attrs:{placeholder:e.$t("h.tips4")+e.$t("h.assetAttributes"),filterable:"",clearable:""},model:{value:e.orderChangeForm.goodsId,callback:function(t){e.$set(e.orderChangeForm,"goodsId",t)},expression:"orderChangeForm.goodsId"}},e._l(e.goodsData,(function(e){return t("el-option",{key:e.goodsqId,attrs:{label:e.name,value:e.goodsqId}})})),1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$t("h.changePerson"),prop:"staffId"}},[t("el-select",{directives:[{name:"load-more",rawName:"v-load-more",value:{options:e.staffData,modelField:"_id",model:e.orderChangeForm.staffId,searchField:"andLike",func:"S0005",userInfo:e.userInfo},expression:"{\n                  options: staffData,\n                  modelField: '_id',\n                  model: orderChangeForm.staffId,\n                  searchField: 'andLike',\n                  func: 'S0005',\n                  userInfo: userInfo,\n                }"}],attrs:{disabled:"",placeholder:e.$t("h.tips4")+e.$t("h.changePerson"),clearable:"",filterable:"","filter-method":()=>{}},model:{value:e.orderChangeForm.staffId,callback:function(t){e.$set(e.orderChangeForm,"staffId",t)},expression:"orderChangeForm.staffId"}},e._l(e.staffData,(function(a){return t("el-option",{key:a._id,attrs:{label:a.name,value:a._id}},[t("span",[e._v(e._s(a.name+"("+a.code+")")+" -"+e._s(a.deptName))])])})),1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$t("h.formTips46"),prop:"roleRule"}},[t("el-input",{staticClass:"purchasingId-input",attrs:{disabled:"",clearable:""},model:{value:e.orderChangeForm.roleRule,callback:function(t){e.$set(e.orderChangeForm,"roleRule",t)},expression:"orderChangeForm.roleRule"}}),t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.changeDialogVisible=!0}}},[e._v(e._s(e.$t("h.title150")))])],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$t("h.supplier"),prop:"vendorId"}},[t("el-select",{attrs:{disabled:"",placeholder:e.$t("h.tips4")+e.$t("h.supplier"),filterable:"",clearable:""},model:{value:e.orderChangeForm.vendorId,callback:function(t){e.$set(e.orderChangeForm,"vendorId",t)},expression:"orderChangeForm.vendorId"}},e._l(e.vendorData,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:e.$t("h.changeDescription"),prop:"coment"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.orderChangeForm.coment,callback:function(t){e.$set(e.orderChangeForm,"coment",t)},expression:"orderChangeForm.coment"}})],1)],1)],1)],1)],1),t("template",{slot:"btns"},[t("div",[t("span",{staticClass:"title"},[e._v(e._s(e.$t("h.title146"))+" - "+e._s(e.$t("h.title147")))])]),t("div",{staticClass:"btns"},[t("el-button",{attrs:{type:"text",size:"small"},on:{click:e.changeGoodsDelete}},[e._v(e._s(e.$t("h.delBtn")))])],1)]),t("template",{slot:"table"},[t("div",{staticClass:"bill-table"},[t("ds-table",{ref:"changeGoodsTableRef",attrs:{tableConfig:e.orderChangeBillsConfig,columns:e.changeGoodsColumns,tableData:e.changeGoodsData,rowKey:e=>e.purchasingId,sums:e.sums,summary:""},on:{getSummaries:e.getSummaries,handleSelectionChange:e.changeGoodsSelectionChange},scopedSlots:e._u([{key:"quantity",fn:function({scope:a}){return[t("span",[t("el-input-number",{attrs:{precision:2,step:1,min:1,size:"mini"},model:{value:a.row.quantity,callback:function(t){e.$set(a.row,"quantity",t)},expression:"scope.row.quantity"}})],1)]}},{key:"amount",fn:function({scope:a}){return[t("span",[t("el-input-number",{attrs:{precision:2,step:1,min:1,size:"mini"},model:{value:a.row.amount,callback:function(t){e.$set(a.row,"amount",t)},expression:"scope.row.amount"}})],1)]}}])})],1)])],2),t("change-goods-dialog",{attrs:{changeDialogVisible:e.changeDialogVisible,requstBillsConfig:e.requstBillsConfig,requstBillsColumns:e.requstBillsColumns},on:{"update:changeDialogVisible":function(t){e.changeDialogVisible=t},"update:change-dialog-visible":function(t){e.changeDialogVisible=t},select:e.requstGoodsSelect}})],1)},i=[],o=(a(57658),a(30541),a(20629)),n=a(76080),r=a(83151),l=a(39622),d=a(88565),c=a(42041),u=a(66403),h=a(60983),g=a(93082),p=a(19698),m=a(92003),f=a(89782),b={components:{ChangeGoodsDialog:d.Z,NewBillsDialog:c.Z,DsSearchBtn:u.Z,DsTable:h.Z,DsPagination:g.Z,DsQueryForm:p.Z,DsQueryFormLeftPanel:m.Z,DsQueryFormRightPanel:f.Z},data(){return{total:0,paginationForm:{currentPage:1,pageSize:20},tableLoading:!1,orderChangeBillsColumns:r.Xo,orderChangeBillsConfig:{selection:!0,reserveSelection:!0},orderChangeBills:[],staffData:[],goodsData:[],vendorData:[],dialogLoading:{target:".new-bill-dialog",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"},newBillsDialogVisible:!1,orderChangeForm:{deptId:"",staffId:"",goodsId:"",date:"",coment:"",vendorId:"",purchasingId:"",roleRule:"",permissonId:26},orderChangeRules:{goodsId:[{required:!0,message:this.$t("h.tips4")+this.$t("h.assetAttributes"),trigger:"change"}],date:[{required:!0,message:this.$t("h.tips4")+this.$t("h.changeDate"),trigger:"change"}]},changeGoodsColumns:r.nm,changeGoodsData:[],selectChangeGoodsData:[],sums:[],changeDialogVisible:!1,requstBillsConfig:{expand:!0,expandName:"",expandWidth:"50px",expandFixed:!1,soltName:"expand"},requstBillsColumns:[]}},computed:{...(0,o.rn)(["userInfo"])},methods:{getOrderChangeBills(){this.tableLoading=!0,(0,n.Ys)({func:"S0065",userId:this.userInfo._id,token:this.userInfo.token,requstData:{page:this.paginationForm.pageSize,index:this.paginationForm.currentPage}}).then((({data:e})=>{if(this.tableLoading=!1,0!=e.code)return this.$message.error(e.data);this.total=e.data[0],this.orderChangeBills=e.data[1],this.orderChangeBills.forEach((e=>{let t=[];e.details.forEach((e=>{t.push(e.skuName)})),e.goodDetails=t.join("/")}))})).catch((()=>{this.tableLoading=!1,this.$message.error(this.$t("h.tips18"))}))},getGoods(){(0,n.Ys)({func:"S0022",userId:this.userInfo._id,token:this.userInfo.token,requstData:{}}).then((({data:e})=>{if(0!=e.code)return this.$message.error(e.data);this.goodsData=e.data})).catch((()=>{this.$message.error(this.$t("h.tips18"))}))},getVendors(){(0,n.Ys)({func:"S0061",userId:this.userInfo._id,token:this.userInfo.token,requstData:{}}).then((({data:e})=>{if(0!=e.code)return this.$message.error(e.data);this.vendorData=e.data[1]})).catch((()=>{this.$message.error(this.$t("h.tips18"))}))},newOrderChangeForm(){this.newBillsDialogVisible=!0,this.orderChangeForm.staffId=this.userInfo._id},requstGoodsSelect(e){this.orderChangeForm.roleRule=e.roleRule,this.orderChangeForm.purchasingId=e.id,this.orderChangeForm.vendorId=e.vendorId,this.changeGoodsData=e.details.map((e=>({purchasingId:e.id,proId:e.proId,skuName:e.skuName,skuType:e.skuType,skuUnit:e.skuUnit,frontQuantity:e.quantity,price:e.price,frontAmount:e.amount,quantity:e.quantity,amount:e.amount}))),this.changeDialogVisible=!1},changeGoodsSelectionChange(e){this.selectChangeGoodsData=e},changeGoodsDelete(){this.selectChangeGoodsData.forEach((e=>{this.changeGoodsData.splice(this.changeGoodsData.findIndex((t=>t.purchasingId==e.purchasingId)),1)})),this.$refs.changeGoodsTableRef.$refs.dsTableRef.clearSelection()},getSummaries(e){const{columns:t,data:a}=e;t.forEach(((e,t)=>{if(0===t)return void(this.sums[t]=this.$t("h.totalAmount"));const s=a.map((t=>Number(t[e.property])));s.every((e=>isNaN(e)))?this.sums[t]="N/A":this.sums[t]=s.reduce(((e,t)=>{const a=Number(t);return isNaN(a)?e:e+t}),0)}))},newBillsDialogOpened(){this.$refs.orderChangeFormRef.clearValidate()},newBillsDialogClose(){this.changeGoodsData=[],this.selectChangeGoodsData=[],this.sums=[],this.orderChangeForm.deptId="",this.orderChangeForm.staffId="",this.orderChangeForm.goodsId="",this.orderChangeForm.date="",this.orderChangeForm.coment="",this.orderChangeForm.vendorId="",this.orderChangeForm.purchasingId="",this.orderChangeForm.roleRule=""},sbumitOrderChangeForm(){this.$refs.orderChangeFormRef.validate((e=>{if(!e)return!1;if(!this.changeGoodsData.length)return this.$notify.error({title:this.$t("h.title27"),message:this.$t("h.tips246")});const t=this.$loading(this.dialogLoading);let a=this.staffData.find((e=>e._id==this.userInfo._id)).deptId;(0,n.Vx)({func:"U0072",token:this.userInfo.token,userId:this.userInfo._id,requstData:{deptId:a,staffId:this.orderChangeForm.staffId,goodsId:this.orderChangeForm.goodsId,date:this.orderChangeForm.date,coment:this.orderChangeForm.coment,vendorId:this.orderChangeForm.vendorId,purchasingId:this.orderChangeForm.purchasingId,amount:this.sums[8],orderAmount:this.sums[6],details:this.changeGoodsData,permissonId:this.orderChangeForm.permissonId}}).then((({data:e})=>{if(t.close(),0!=e.code)return this.$message.error(e.data);this.$message.success(e.data),this.newBillsDialogVisible=!1,this.paginationForm.currentPage=1,this.getOrderChangeBills()})).catch((()=>{t.close(),this.$message.error(this.$t("h.tips18"))}))}))}},created(){this.getOrderChangeBills(),this.getGoods(),this.getVendors(),this.requstBillsColumns=(0,l.Z)(r.hf),this.requstBillsColumns.unshift({label:this.$t("h.title150"),slotName:"select",width:"100"})}},C=b,v=a(1001),y=(0,v.Z)(C,s,i,!1,null,"5fbc8d59",null),$=y.exports},85117:function(e,t,a){var s=a(66330),i=TypeError;e.exports=function(e,t){if(!delete e[t])throw i("Cannot delete property "+s(t)+" of "+s(e))}},30541:function(e,t,a){var s=a(82109),i=a(47908),o=a(26244),n=a(83658),r=a(85117),l=a(7207),d=1!==[].unshift(0),c=!function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(e){return e instanceof TypeError}}();s({target:"Array",proto:!0,arity:1,forced:d||c},{unshift:function(e){var t=i(this),a=o(t),s=arguments.length;if(s){l(a+s);var d=a;while(d--){var c=d+s;d in t?t[c]=t[d]:r(t,c)}for(var u=0;u<s;u++)t[u]=arguments[u]}return n(t,a+s)}})},39622:function(e,t){function a(e){const t=typeof e;return null!==e&&("object"===t||"function"===t)}function s(e,t=new WeakMap){if("symbol"===typeof e)return Symbol(e.description);if(!a(e))return e;if(e instanceof Set){const t=new Set;for(const a of e)t.add(s(a));return t}if(e instanceof Map){const t=new Map;for(const a of e)t.set(a[0],a[1]);return t}if("function"===typeof e)return e;if(t.get(e))return t.get(e);const i=Array.isArray(e)?[]:{};t.set(e,i);for(const a in e)i[a]=s(e[a],t);const o=Object.getOwnPropertySymbols(e);for(const a of o)i[Symbol(a.description)]=s(e[a],t);return i}t["Z"]=s}}]);