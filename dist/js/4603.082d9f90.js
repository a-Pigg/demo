"use strict";(self["webpackChunk_4010_assetweb"]=self["webpackChunk_4010_assetweb"]||[]).push([[4603],{42041:function(e,t,n){n.d(t,{Z:function(){return c}});var a=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{top:"0","custom-class":"dialog",fullscreen:"",visible:e.dialogVisible,"show-close":!1},on:{"update:visible":function(t){e.dialogVisible=t},opened:e.dialogVisibleOpened,close:e.dialogVisibleClose,closed:e.dialogVisibleClosed}},[t("div",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[t("div",{staticClass:"left"},[t("el-button",{attrs:{type:"primary",icon:"el-icon-arrow-left",circle:""},on:{click:function(t){e.dialogVisible=!1}}}),t("span",{staticClass:"title"},[e._v(e._s(e.title))])],1),t("div",{staticClass:"right"},[t("el-button",{attrs:{size:"small"},on:{click:e.cancalFrom}},[e._v(e._s(e.$t("h.cancelBtn")))]),t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.sbumitForm}},[e._v(e._s(e.$t("h.confirmBtn")))])],1)]),t("div",{ref:"dialogbodyRef",staticClass:"dialog-body"},[t("div",{staticClass:"content",style:"width:"+e.contentWidth},[t("div",{staticClass:"form-label"},[e._t("form")],2),t("div",{staticClass:"table-label"},[t("div",{staticClass:"table-label-head"},[e._t("btns")],2),t("div",{staticClass:"table-label-content"},[e._t("table")],2)])])])])},i=[],o=n(63042),s={data(){return{}},props:{title:{type:String,default:o.a.t("h.title12")},newBillsDialogVisible:{type:Boolean,default:!1},contentWidth:{type:String,default:"950px"}},computed:{dialogVisible:{get(){return this.newBillsDialogVisible},set(e){this.$emit("update:newBillsDialogVisible",e)}}},methods:{cancalFrom(){this.dialogVisible=!1},sbumitForm(){this.$emit("sbumitForm")},dialogVisibleClose(){this.$emit("close"),this.$refs.dialogbodyRef.scrollTop=0},dialogVisibleClosed(){this.$emit("closed")},dialogVisibleOpened(){this.$emit("opened")}}},r=s,l=n(1001),d=(0,l.Z)(r,a,i,!1,null,"130c4832",null),c=d.exports},93082:function(e,t,n){n.d(t,{Z:function(){return d}});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"ds-pagination"},[t("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},i=[],o={name:"DsPagination",data(){return{}},props:{total:{required:!0,type:Number},pageSizes:{type:Array,default(){return[20,50,100]}},page:{type:Number,default:1},limit:{type:Number,default:20},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0}},computed:{currentPage:{get(){return this.page},set(e){this.$emit("update:page",e)}},pageSize:{get(){return this.limit},set(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange(e){this.$emit("pagination",{page:this.currentPage,limit:e})},handleCurrentChange(e){this.$emit("pagination",{page:e,limit:this.pageSize})}}},s=o,r=n(1001),l=(0,r.Z)(s,a,i,!1,null,"2377c114",null),d=l.exports},92003:function(e,t,n){n.d(t,{Z:function(){return d}});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"left-panel"},[e._t("default")],2)},i=[],o={name:"DsQueryFormLeftPanel"},s=o,r=n(1001),l=(0,r.Z)(s,a,i,!1,null,"71d76034",null),d=l.exports},89782:function(e,t,n){n.d(t,{Z:function(){return d}});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"right-panel"},[e._t("default")],2)},i=[],o={name:"DsQueryFormRightPanel"},s=o,r=n(1001),l=(0,r.Z)(s,a,i,!1,null,"c6443ba6",null),d=l.exports},19698:function(e,t,n){n.d(t,{Z:function(){return d}});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"ds-query-form"},[e._t("default")],2)},i=[],o={name:"DsQueryForm"},s=o,r=n(1001),l=(0,r.Z)(s,a,i,!1,null,"6c8bfb78",null),d=l.exports},66403:function(e,t,n){n.d(t,{Z:function(){return d}});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"ds-search"},[t("el-input",{attrs:{size:"small",placeholder:e.$t("h.keyword"),"prefix-icon":"el-icon-search"},on:{input:e.onInput},model:{value:e.value,callback:function(t){e.value="string"===typeof t?t.trim():t},expression:"value"}},[t("el-button",{attrs:{slot:"suffix",type:"text",size:"small"},on:{click:e.search},slot:"suffix"},[e._v(e._s(e.$t("h.Search")))])],1)],1)},i=[],o={name:"DsSearchBtn",data(){return{}},props:{searchValue:{type:String}},computed:{value:{get(){return this.searchValue},set(e){this.$emit("update:searchValue",e)}}},methods:{search(){this.$emit("search")},onInput(e){""==e&&this.search()}}},s=o,r=n(1001),l=(0,r.Z)(s,a,i,!1,null,"5bd7b965",null),d=l.exports},89219:function(e,t,n){n.r(t),n.d(t,{default:function(){return F}});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"vendor"},[t("el-card",{staticClass:"vendor-card"},[t("div",{staticClass:"vendor-card-header",attrs:{slot:"header"},slot:"header"},[t("ds-query-form",[t("ds-query-form-left-panel",[t("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.newVendorDialogVisible=!0}}},[e._v(e._s(e.$t("h.newBtn")))]),t("el-dropdown",{attrs:{trigger:"click"}},[t("el-button",{attrs:{size:"small"}},[e._v(" "+e._s(e.$t("h.editBtn"))),t("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{nativeOn:{click:function(t){return e.editVendorForm.apply(null,arguments)}}},[e._v(e._s(e.$t("h.changeBtn")))]),t("el-dropdown-item",[e._v(e._s(e.$t("h.delBtn")))])],1)],1)],1),t("ds-query-form-right-panel",[t("ds-search-btn")],1)],1)],1),t("div",{staticClass:"vendor-card-content"},[t("div",{staticClass:"vendor-filter"},[t("el-button",{staticClass:"advanced-filter-btn",attrs:{type:"text",size:"small"}},[e._v(e._s(e.$t("h.advancedBtn")))])],1),t("div",{staticClass:"vendor-table"},[t("ds-table",{ref:"vendorTableRef",attrs:{loading:e.tableLoading,tableData:e.vendors,columns:e.vendorsColumns,tableConfig:e.vendorsConfig,rowKey:e=>e.id,onlyKey:"id"},on:{handleSelectionChange:e.handleSelectionChange}})],1),t("div",{staticClass:"vendor-pagination"},[t("ds-pagination",{attrs:{small:"",total:e.total,page:e.paginationForm.currentPage,limit:e.paginationForm.pageSize},on:{"update:page":function(t){return e.$set(e.paginationForm,"currentPage",t)},"update:limit":function(t){return e.$set(e.paginationForm,"pageSize",t)},pagination:e.getVendors}})],1)])]),t("new-bills-dialog",{staticClass:"new-vendor-dialog",attrs:{newBillsDialogVisible:e.newVendorDialogVisible},on:{"update:newBillsDialogVisible":function(t){e.newVendorDialogVisible=t},"update:new-bills-dialog-visible":function(t){e.newVendorDialogVisible=t},sbumitForm:e.sbumitVendorForm,close:e.newVendorDialogVisibleClosed}},[t("template",{slot:"form"},[t("el-form",{ref:"vendorFormRef",attrs:{"label-width":"120px",model:e.vendorForm,rules:e.vendorFormRules}},[t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$t("h.formTips47"),prop:"name"}},[t("el-input",{attrs:{placeholder:e.$t("h.tips3")+e.$t("h.formTips47")},model:{value:e.vendorForm.name,callback:function(t){e.$set(e.vendorForm,"name",t)},expression:"vendorForm.name"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$t("h.formTips48"),prop:"contacts"}},[t("el-input",{attrs:{placeholder:e.$t("h.tips3")+e.$t("h.formTips48")},model:{value:e.vendorForm.contacts,callback:function(t){e.$set(e.vendorForm,"contacts",t)},expression:"vendorForm.contacts"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$t("h.formTips49"),prop:"phone"}},[t("el-input",{attrs:{placeholder:e.$t("h.tips3")+e.$t("h.formTips49")},model:{value:e.vendorForm.phone,callback:function(t){e.$set(e.vendorForm,"phone",t)},expression:"vendorForm.phone"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$t("h.formTips50"),prop:"email"}},[t("el-input",{attrs:{placeholder:e.$t("h.tips3")+e.$t("h.formTips50")},model:{value:e.vendorForm.email,callback:function(t){e.$set(e.vendorForm,"email",t)},expression:"vendorForm.email"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$t("h.formTips51"),prop:"bankName"}},[t("el-input",{attrs:{placeholder:e.$t("h.tips3")+e.$t("h.formTips51")},model:{value:e.vendorForm.bankName,callback:function(t){e.$set(e.vendorForm,"bankName",t)},expression:"vendorForm.bankName"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$t("h.formTips52"),prop:"bankAccount"}},[t("el-input",{attrs:{placeholder:e.$t("h.tips3")+e.$t("h.formTips52")},model:{value:e.vendorForm.bankAccount,callback:function(t){e.$set(e.vendorForm,"bankAccount",t)},expression:"vendorForm.bankAccount"}})],1)],1)],1)],1)],1)],2)],1)},i=[],o=n(76080),s=n(20629),r=n(83151),l=n(60983),d=n(66403),c=n(19698),u=n(93082),m=n(42041),h=n(92003),p=n(89782),g={components:{DsTable:l.Z,DsSearchBtn:d.Z,DsQueryForm:c.Z,DsPagination:u.Z,NewBillsDialog:m.Z,DsQueryFormLeftPanel:h.Z,DsQueryFormRightPanel:p.Z},data(){return{total:0,paginationForm:{currentPage:1,pageSize:20},tableLoading:!1,vendorsColumns:r.PN,vendorsConfig:{selection:!0,reserveSelection:!0},selectVendors:[],vendors:[],newVendorDialogVisible:!1,dialogLoading:{target:".new-vendor-dialog",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"},vendorForm:{id:null,name:"",bankAccount:"",bankName:"",contacts:"",email:"",phone:""},vendorFormRules:{name:[{required:!0,message:this.$t("h.tips3")+this.$t("h.formTips47"),trigger:"blur"}]}}},computed:{...(0,s.rn)(["userInfo"])},methods:{getVendors(){this.tableLoading=!0,(0,o.Ys)({func:"S0061",userId:this.userInfo._id,token:this.userInfo.token,requstData:{page:this.paginationForm.pageSize,index:this.paginationForm.currentPage}}).then((({data:e})=>{if(this.tableLoading=!1,0!=e.code)return this.$message.error(e.data);this.total=e.data[0],this.vendors=e.data[1]})).catch((()=>{this.tableLoading=!1,this.$message.error(this.$t("h.tips18"))}))},sbumitVendorForm(){this.$refs.vendorFormRef.validate((e=>{if(!e)return!1;const t=this.$loading(this.dialogLoading);(0,o.Vx)({func:"U0064",userId:this.userInfo._id,token:this.userInfo.token,requstData:{id:this.vendorForm.id,name:this.vendorForm.name,bankAccount:this.vendorForm.bankAccount,bankName:this.vendorForm.bankName,contacts:this.vendorForm.contacts,email:this.vendorForm.email,phone:this.vendorForm.phone,permissonId:26}}).then((({data:e})=>{if(t.close(),0!=e.code)return this.$message.error(e.data);this.newVendorDialogVisible=!1,this.getVendors(),this.$refs.vendorTableRef.$refs.dsTableRef.clearSelection()})).catch((()=>{t.close(),this.$message.error(this.$t("h.tips18"))}))}))},newVendorDialogVisibleClosed(){this.vendorForm._id=null,this.vendorForm.name="",this.vendorForm.bankAccount="",this.vendorForm.bankName="",this.vendorForm.contacts="",this.vendorForm.email="",this.vendorForm.phone=""},handleSelectionChange(e){this.selectVendors=e},editVendorForm(){return this.selectVendors.length?this.selectVendors.length>1?this.$message.error(this.$t("h.tips253")):(this.vendorForm.id=this.selectVendors[0].id,this.vendorForm.name=this.selectVendors[0].name,this.vendorForm.bankAccount=this.selectVendors[0].bankAccount,this.vendorForm.bankName=this.selectVendors[0].bankName,this.vendorForm.contacts=this.selectVendors[0].contacts,this.vendorForm.email=this.selectVendors[0].email,this.vendorForm.phone=this.selectVendors[0].phone,void(this.newVendorDialogVisible=!0)):this.$message.error(this.$t("h.tips252"))}},created(){this.getVendors()}},f=g,v=n(1001),b=(0,v.Z)(f,a,i,!1,null,"16d15ac7",null),F=b.exports}}]);