"use strict";(self["webpackChunk_4010_assetweb"]=self["webpackChunk_4010_assetweb"]||[]).push([[2793],{42041:function(t,e,s){s.d(e,{Z:function(){return d}});var a=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{top:"0","custom-class":"dialog",fullscreen:"",visible:t.dialogVisible,"show-close":!1},on:{"update:visible":function(e){t.dialogVisible=e},opened:t.dialogVisibleOpened,close:t.dialogVisibleClose,closed:t.dialogVisibleClosed}},[e("div",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[e("div",{staticClass:"left"},[e("el-button",{attrs:{type:"primary",icon:"el-icon-arrow-left",circle:""},on:{click:function(e){t.dialogVisible=!1}}}),e("span",{staticClass:"title"},[t._v(t._s(t.title))])],1),e("div",{staticClass:"right"},[e("el-button",{attrs:{size:"small"},on:{click:t.cancalFrom}},[t._v(t._s(t.$t("h.cancelBtn")))]),e("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.sbumitForm}},[t._v(t._s(t.$t("h.confirmBtn")))])],1)]),e("div",{ref:"dialogbodyRef",staticClass:"dialog-body"},[e("div",{staticClass:"content",style:"width:"+t.contentWidth},[e("div",{staticClass:"form-label"},[t._t("form")],2),e("div",{staticClass:"table-label"},[e("div",{staticClass:"table-label-head"},[t._t("btns")],2),e("div",{staticClass:"table-label-content"},[t._t("table")],2)])])])])},i=[],l=s(63042),n={data(){return{}},props:{title:{type:String,default:l.a.t("h.title12")},newBillsDialogVisible:{type:Boolean,default:!1},contentWidth:{type:String,default:"950px"}},computed:{dialogVisible:{get(){return this.newBillsDialogVisible},set(t){this.$emit("update:newBillsDialogVisible",t)}}},methods:{cancalFrom(){this.dialogVisible=!1},sbumitForm(){this.$emit("sbumitForm")},dialogVisibleClose(){this.$emit("close"),this.$refs.dialogbodyRef.scrollTop=0},dialogVisibleClosed(){this.$emit("closed")},dialogVisibleOpened(){this.$emit("opened")}}},o=n,r=s(1001),c=(0,r.Z)(o,a,i,!1,null,"130c4832",null),d=c.exports},40466:function(t,e,s){s.d(e,{Z:function(){return f}});var a=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{top:"0","custom-class":"dialog","show-close":!1,visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e},opened:t.dialogVisibleOpened}},[e("div",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[e("div",{staticClass:"left"},[e("span",[t._v(t._s(t.$t("h.title150")+t.$t("h.asset")))])]),e("div",{staticClass:"right"},[e("i",{staticClass:"el-icon-close",on:{click:function(e){t.dialogVisible=!1}}})])]),e("div",{staticClass:"dialog-body"},[e("div",{staticClass:"sku-tree"},[e("div",{staticClass:"title"},[e("span",[t._v(t._s(t.$t("h.assetCategory")))])]),e("div",{staticClass:"content"},[e("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:t.treeLoading,expression:"treeLoading"}],ref:"typeTree",attrs:{"node-key":"_id","highlight-current":"","expand-on-click-node":!1,data:t.assetTypes,props:t.typeProps},on:{"node-click":t.handleNodeClick},scopedSlots:t._u([{key:"default",fn:function({node:s,data:a}){return e("span",{},[e("span",{staticClass:"icon"},[null==a.children?["G"==(a.hierarchy||"").split("|")[0]?e("svg-icon",{staticClass:"childIcon",attrs:{"icon-file-name":"childGb"}}):e("svg-icon",{staticClass:"childIcon",attrs:{"icon-file-name":"childQb"}})]:["G"==a.hierarchy.split("|")[0]?e("svg-icon",{staticClass:"parentIcon",attrs:{"icon-file-name":"gb"}}):e("svg-icon",{staticClass:"parentIcon",attrs:{"icon-file-name":"qb"}})]],2),e("span",{staticClass:"text",staticStyle:{"font-size":"14px"}},[t._v(" "+t._s(a.code+"-"+s.label)+" ")])])}}])})],1)]),e("div",{staticClass:"sku-table"},[e("div",{staticClass:"btns"},[e("el-button",{attrs:{size:"small",type:"primary"}},[t._v(t._s(t.$t("h.newBtn")))]),e("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.showALlSku}},[t._v(t._s(t.$t("h.showAllItems")))])],1),e("div",{staticClass:"filter"},[e("el-button",{staticClass:"advanced-filter-btn",attrs:{type:"text",size:"small"}},[t._v(t._s(t.$t("h.advancedBtn")))])],1),e("div",{staticClass:"table"},[e("ds-table",{ref:"assetTableRef",attrs:{loading:t.tableLoading,tableData:t.assets,columns:t.assetsColumns,tableConfig:t.assetsConfig,rowKey:t=>t.id,onlyKey:"id"},on:{handleSelectionChange:t.handleSelectionChange}},[e("template",{slot:"operation"},[e("el-button",{attrs:{type:"text",size:"small"}},[t._v(t._s(t.$t("h.changeBtn")))]),e("el-button",{attrs:{type:"text",size:"small"}},[t._v(t._s(t.$t("h.delBtn")))])],1)],2)],1),e("div",{staticClass:"pagination"},[e("ds-pagination",{attrs:{small:"",total:t.total,page:t.paginationForm.currentPage,limit:t.paginationForm.pageSize},on:{"update:page":function(e){return t.$set(t.paginationForm,"currentPage",e)},"update:limit":function(e){return t.$set(t.paginationForm,"pageSize",e)},pagination:t.getAssets}})],1)])]),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{size:"small"},on:{click:function(e){t.dialogVisible=!1}}},[t._v(t._s(t.$t("h.cancelBtn")))]),e("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.save}},[t._v(t._s(t.$t("h.confirmBtn")))])],1)])},i=[],l=s(20629),n=s(76080),o=s(55886),r=s(83151),c=s(60983),d=s(93082),u={components:{DsTable:c.Z,DsPagination:d.Z},data(){return{treeLoading:!1,typeProps:{value:"_id",label:"classifyName",children:"children"},assetTypes:[],tableLoading:!1,total:0,paginationForm:{currentPage:1,pageSize:20},assetsColumns:r.rp,assetsConfig:{selection:!0,reserveSelection:!0},filtetClassId:"",assets:[],selectAssets:[]}},props:{skuDialogVisible:{type:Boolean,default:!1},updateSkuSelectState:{type:Array,default:()=>[]}},computed:{...(0,l.rn)(["userInfo"]),dialogVisible:{get(){return this.skuDialogVisible},set(t){this.$emit("update:skuDialogVisible",t)}}},methods:{getAssetType(){this.treeLoading=!0,(0,n.Ys)({func:"S0006",userId:this.userInfo._id,token:this.userInfo.token,requstData:{}}).then((({data:t})=>{if(this.treeLoading=!1,0!=t.code)return this.$message.error(t.data);this.assetTypes=(0,o.M)(t.data,null)})).catch((()=>{this.treeLoading=!1,this.$message.error(this.$t("h.tips18"))}))},getAssets(){this.tableLoading=!0,(0,n.Ys)({func:"S0060",userId:this.userInfo._id,token:this.userInfo.token,requstData:{index:this.paginationForm.currentPage,page:this.paginationForm.pageSize,assetClassifyId:this.filtetClassId}}).then((({data:t})=>{if(this.tableLoading=!1,0!=t.code)return this.$message.error(t.data);this.total=t.data[0],this.assets=t.data[1]})).catch((()=>{this.tableLoading=!1}))},handleNodeClick(t){this.filtetClassId=t._id,this.paginationForm.currentPage=1,this.getAssets()},showALlSku(){this.filtetClassId="",this.$refs.typeTree.setCurrentKey(null),this.paginationForm.currentPage=1,this.getAssets()},handleSelectionChange(t){this.selectAssets=t},dialogVisibleOpened(){this.$refs.assetTableRef.$refs.dsTableRef.clearSelection(),this.updateSkuSelectState.forEach((t=>{let e=this.assets.find((e=>e.id==t.proId));this.$refs.assetTableRef.$refs.dsTableRef.toggleRowSelection(e,!0)})),this.getAssetType(),this.getAssets()},save(){this.$emit("save",this.selectAssets)}}},p=u,g=s(1001),h=(0,g.Z)(p,a,i,!1,null,"35439ce8",null),f=h.exports},93082:function(t,e,s){s.d(e,{Z:function(){return c}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"ds-pagination"},[e("el-pagination",t._b({attrs:{background:t.background,"current-page":t.currentPage,"page-size":t.pageSize,layout:t.layout,"page-sizes":t.pageSizes,total:t.total},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"update:pageSize":function(e){t.pageSize=e},"update:page-size":function(e){t.pageSize=e},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},"el-pagination",t.$attrs,!1))],1)},i=[],l={name:"DsPagination",data(){return{}},props:{total:{required:!0,type:Number},pageSizes:{type:Array,default(){return[20,50,100]}},page:{type:Number,default:1},limit:{type:Number,default:20},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0}},computed:{currentPage:{get(){return this.page},set(t){this.$emit("update:page",t)}},pageSize:{get(){return this.limit},set(t){this.$emit("update:limit",t)}}},methods:{handleSizeChange(t){this.$emit("pagination",{page:this.currentPage,limit:t})},handleCurrentChange(t){this.$emit("pagination",{page:t,limit:this.pageSize})}}},n=l,o=s(1001),r=(0,o.Z)(n,a,i,!1,null,"2377c114",null),c=r.exports},92003:function(t,e,s){s.d(e,{Z:function(){return c}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"left-panel"},[t._t("default")],2)},i=[],l={name:"DsQueryFormLeftPanel"},n=l,o=s(1001),r=(0,o.Z)(n,a,i,!1,null,"71d76034",null),c=r.exports},89782:function(t,e,s){s.d(e,{Z:function(){return c}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"right-panel"},[t._t("default")],2)},i=[],l={name:"DsQueryFormRightPanel"},n=l,o=s(1001),r=(0,o.Z)(n,a,i,!1,null,"c6443ba6",null),c=r.exports},19698:function(t,e,s){s.d(e,{Z:function(){return c}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"ds-query-form"},[t._t("default")],2)},i=[],l={name:"DsQueryForm"},n=l,o=s(1001),r=(0,o.Z)(n,a,i,!1,null,"6c8bfb78",null),c=r.exports},66403:function(t,e,s){s.d(e,{Z:function(){return c}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"ds-search"},[e("el-input",{attrs:{size:"small",placeholder:t.$t("h.keyword"),"prefix-icon":"el-icon-search"},on:{input:t.onInput},model:{value:t.value,callback:function(e){t.value="string"===typeof e?e.trim():e},expression:"value"}},[e("el-button",{attrs:{slot:"suffix",type:"text",size:"small"},on:{click:t.search},slot:"suffix"},[t._v(t._s(t.$t("h.Search")))])],1)],1)},i=[],l={name:"DsSearchBtn",data(){return{}},props:{searchValue:{type:String}},computed:{value:{get(){return this.searchValue},set(t){this.$emit("update:searchValue",t)}}},methods:{search(){this.$emit("search")},onInput(t){""==t&&this.search()}}},n=l,o=s(1001),r=(0,o.Z)(n,a,i,!1,null,"5bd7b965",null),c=r.exports},55886:function(t,e,s){s.d(e,{M:function(){return a}});s(57658);const a=(t,e)=>{const s=[];return t.forEach(((i,l)=>{if(i.subId==e){const e=a(t,i._id);e.length>0&&(i.children=e),s.push(i)}})),s}}}]);