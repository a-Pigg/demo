"use strict";(self["webpackChunk_4010_assetweb"]=self["webpackChunk_4010_assetweb"]||[]).push([[2219],{5791:function(t,e,s){s.d(e,{Z:function(){return h}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"filter-drawer"},[e("el-drawer",{attrs:{title:t.$t("h.advancedBtn"),size:550,direction:"rtl",visible:t.drawer},on:{"update:visible":function(e){t.drawer=e}}},[e("div",{staticClass:"filter-form"},[t._t("default")],2),e("div",{staticClass:"filter-btn"},[t._t("set"),e("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.submitFilterForm}},[t._v(t._s(t.$t("h.saveBtn")))]),e("el-button",{attrs:{size:"small"},on:{click:t.resetFilterForm}},[t._v(t._s(t.$t("h.resetBtn")))])],2)])],1)},i=[],r={name:"DsFilterDrawer",data(){return{}},props:{filterDrawerVisible:{type:Boolean}},computed:{drawer:{get(){return this.filterDrawerVisible},set(t){this.$emit("update:filterDrawerVisible",t)}}},methods:{submitFilterForm(){this.$emit("submitFilterForm")},resetFilterForm(){this.$emit("resetFilterForm")}}},l=r,n=s(1001),o=(0,n.Z)(l,a,i,!1,null,"05535b94",null),h=o.exports},17817:function(t,e,s){s.d(e,{Z:function(){return h}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"ds-filter-tag"},t._l(t.tagsData,(function(s){return e("el-tag",{key:s.keyStr,attrs:{size:t.tagSize,effect:"dark",closable:""},on:{close:function(e){return t.handleClose(s)}}},[t._v(" "+t._s(s.name)+":"+t._s(s.value.length>8?s.value.substring(0,7)+"...":s.value)+" ")])})),1)},i=[],r={name:"DsFilterTag",data(){return{tags:[{name:this.$t("h.label1"),type:""},{name:this.$t("h.label2"),type:"success"},{name:this.$t("h.label3"),type:"info"},{name:this.$t("h.label4"),type:"warning"},{name:this.$t("h.label5"),type:"danger"}]}},props:{filterTagsData:{type:Array,default:()=>[]},tagSize:{type:String,default:"medium"}},computed:{tagsData:{get(){return this.filterTagsData},set(t){this.$emit("update:filterTagsData",t)}}},methods:{handleClose(t){this.$emit("handleCloseTag",t)}}},l=r,n=s(1001),o=(0,n.Z)(l,a,i,!1,null,"628dc1ca",null),h=o.exports},92003:function(t,e,s){s.d(e,{Z:function(){return h}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"left-panel"},[t._t("default")],2)},i=[],r={name:"DsQueryFormLeftPanel"},l=r,n=s(1001),o=(0,n.Z)(l,a,i,!1,null,"71d76034",null),h=o.exports},89782:function(t,e,s){s.d(e,{Z:function(){return h}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"right-panel"},[t._t("default")],2)},i=[],r={name:"DsQueryFormRightPanel"},l=r,n=s(1001),o=(0,n.Z)(l,a,i,!1,null,"c6443ba6",null),h=o.exports},19698:function(t,e,s){s.d(e,{Z:function(){return h}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"ds-query-form"},[t._t("default")],2)},i=[],r={name:"DsQueryForm"},l=r,n=s(1001),o=(0,n.Z)(l,a,i,!1,null,"6c8bfb78",null),h=o.exports},79476:function(t,e,s){s.r(e),s.d(e,{default:function(){return C}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"AnalysisReport"},[e("el-card",{staticClass:"box-card"},[e("div",{staticClass:"header"},[e("el-button",{attrs:{size:"small"}},[t._v(t._s(t.$t("h.exportBtn")))])],1),e("div",{staticClass:"screen"},[e("ds-query-form",[e("ds-query-form-left-panel",[e("ds-filter-tag",{attrs:{filterTagsData:t.highFilterTags},on:{handleCloseTag:t.handleCloseFilterTag}})],1),e("ds-query-form-right-panel",[e("span",{staticClass:"advancedSearch",on:{click:function(e){t.bodyFilteringVisible=!0}}},[t._v(t._s(t.$t("h.advancedBtn")))])])],1)],1),e("div",{staticClass:"body"},[e("div",{staticClass:"echarts-box"},[e("div",{staticClass:"left"},[e("div",{staticClass:"title"},[e("ds-query-form",[e("ds-query-form-left-panel",[e("div",{staticClass:"text_box"},[e("span",[t._v(t._s(t.$t("h.inboundAdbOutbound")))])])]),e("ds-query-form-right-panel",[e("div",{staticClass:"title_right"},[e("span",{staticClass:"right_font",class:{con:1==t.leftFontCon},on:{click:function(e){t.leftFontCon=1}}},[t._v(t._s(t.$t("h.number")))]),e("span",{staticClass:"right_font margin",class:{con:2==t.leftFontCon},on:{click:function(e){t.leftFontCon=2}}},[t._v(t._s(t.$t("h.columns47")))])])])],1)],1),e("inventory-operations",{attrs:{title:t.leftEchartsTitle,showData:t.showData}})],1)]),e("div",{staticClass:"table"},[e("ds-table",{ref:"tableDisplay",attrs:{tableData:t.tableDataDisplay,columns:t.columns}})],1),e("div",{staticClass:"dataStatistics"},t._l(t.statisticsData,(function(s,a){return e("div",{key:a,staticClass:"Statistics"},[e("span",{staticClass:"title"},[t._v(t._s(s.title))]),e("span",{staticClass:"dataDisplay"},[t._v(t._s(s.value))])])})),0)])]),e("ds-filter-drawer",{attrs:{filterDrawerVisible:t.bodyFilteringVisible},on:{"update:filterDrawerVisible":function(e){t.bodyFilteringVisible=e},"update:filter-drawer-visible":function(e){t.bodyFilteringVisible=e},resetFilterForm:t.resetBodyFilterForm,submitFilterForm:t.submitBodyFilterForm}},[e("el-form",{ref:"bodyFiltering",attrs:{model:t.bodyFiltering,"label-width":"80px"}},[e("el-form-item",{attrs:{label:t.$t("h.formTips54"),prop:"houseIds"}},[e("el-cascader",{attrs:{options:t.warehouseData,props:{checkStrictly:!0}},model:{value:t.bodyFiltering.houseIds,callback:function(e){t.$set(t.bodyFiltering,"houseIds",e)},expression:"bodyFiltering.houseIds"}})],1),e("el-form-item",{attrs:{label:t.$t("h.formTips55"),prop:"sortIds"}},[e("el-cascader",{attrs:{options:t.subMenuTreeList,props:{checkStrictly:!0}},model:{value:t.bodyFiltering.sortIds,callback:function(e){t.$set(t.bodyFiltering,"sortIds",e)},expression:"bodyFiltering.sortIds"}})],1)],1)],1)],1)},i=[],r=(s(57658),s(19698)),l=s(92003),n=s(89782),o=s(17817),h=function(){var t=this,e=t._self._c;return e("div",{staticClass:"com_container"},[e("div",{ref:"inventoryOperations",staticClass:"echarts"})])},u=[],d={components:{},props:{title:{type:Array,default:()=>[]},showData:{type:Array,default:()=>[]}},data(){return{rightFontCon:1,chartInstance:null}},watch:{showData:function(){this.initECharts()}},methods:{initECharts(){this.chartInstance=this.$echarts.init(this.$refs["inventoryOperations"]);let t=[],e=["product"];this.title.forEach((t=>{e.push(t)})),t.push(e),this.showData.forEach((e=>{let s=[];s.push(e.name),s.push(e.in),s.push(e.out),t.push(s)}));let s={legend:{},tooltip:{},dataset:{source:t},xAxis:{type:"category"},yAxis:{},series:[{type:"bar"},{type:"bar"}]};this.chartInstance.setOption(s)}}},c=d,f=s(1001),m=(0,f.Z)(c,h,u,!1,null,"29b330df",null),p=m.exports,b=s(60983),g=s(5791),y=s(83151),F=s(76080),v=s(20629),D={components:{DsQueryForm:r.Z,DsQueryFormLeftPanel:l.Z,DsQueryFormRightPanel:n.Z,DsFilterTag:o.Z,InventoryOperations:p,DsTable:b.Z,DsFilterDrawer:g.Z},data(){return{bodyFilteringVisible:!1,leftFontCon:1,leftEchartsTitle:[this.$t("h.title158"),this.$t("h.title159")],rightEchartsTitle:[this.$t("h.title160"),this.$t("h.title161")],columns:y.Ap,tableData:[],statisticsData:[{title:this.$t("h.title162"),value:""},{title:this.$t("h.title163"),value:""}],highFilterTags:[],bodyFiltering:{houseIds:[],sortIds:[]},subMenuList:[],subMenuTreeList:[],warehouseData:[],houseNameData:[]}},computed:{...(0,v.rn)(["userInfo"]),tableDataDisplay(){return this.tableData},showData(){let t=[];return 1==this.leftFontCon?this.tableData.forEach((e=>{let s={};s.name=e.sortingName,s.in=e.inAmount,s.out=e.outAmount,t.push(s)})):this.tableData.forEach((e=>{let s={};s.name=e.sortingName,s.in=e.inMoney,s.out=e.outMoney,t.push(s)})),t}},methods:{getData(){(0,F.C3)({func:"STR0000",userId:this.userInfo._id,token:this.userInfo.token,requstData:{}}).then((({data:t})=>{if("-1"==t.code)return this.$message.error(t.data);if(t.data){this.tableData=t.data;let e=0,s=0;this.tableData.forEach((t=>{e+=t.inMoney,s+=t.outMoney})),this.statisticsData[0].value=e,this.statisticsData[1].value=s}})).catch((t=>{this.$message.error(t)}))},handleCloseFilterTag(t){switch(t.keyStr){case"houseIds":this.bodyFiltering.houseIds=[];break;default:this.bodyFiltering.sortIds=[]}this.highFilterTags.splice(this.highFilterTags.indexOf(t),1);let e={houseIds:"",sortIds:""};this.highFilterTags.forEach((t=>{for(let s in e)t.keyStr==s&&(e[s]=t.uploadValue)}));for(let s in e)""==e[s]&&delete e[s];(0,F.C3)({func:"STR0000",userId:this.userInfo._id,token:this.userInfo.token,requstData:e}).then((({data:t})=>{if(this.highFilterTags=[],"-1"==t.code)return this.$message.error(t.data);if(t.data){this.tableData=t.data;let e=0,s=0;this.tableData.forEach((t=>{e+=t.inMoney,s+=t.outMoney})),this.statisticsData[0].value=e,this.statisticsData[1].value=s}for(let s in e)if("houseIds"==s){let t=e[s].split(","),a=[];this.houseNameData.forEach((e=>{t.forEach((t=>{e.value==t&&a.push(e.name)}))})),this.highFilterTags.push({name:this.$t("h.formTips54"),value:a.join(),uploadValue:e[s],keyStr:s})}else if("sortIds"==s){let t=e[s].split(","),a=[];this.subMenuList.forEach((e=>{t.forEach((t=>{e.sortingId==t&&a.push(e.name)}))})),this.highFilterTags.push({name:this.$t("h.formTips55"),value:a.join(),uploadValue:e[s],keyStr:s})}this.bodyFilteringVisible=!1})).catch((t=>{this.$message.error(t)}))},getWarehouseData(){(0,F.C3)({func:"ST0001",userId:this.userInfo._id,token:this.userInfo.token,requstData:{}}).then((({data:t})=>{if("-1"==t.code)return this.$message.error(t.data);if(t.data){let e=[];t.data.forEach((t=>{t.disabled||"0"!=t.state||e.push({name:t.name,label:t.name,value:t.houseId,state:t.state,subId:t.subId}),this.houseNameData.push({name:t.name,value:t.houseId,state:t.state})})),this.warehouseData=this.tree(e,"-","value")}})).catch((t=>{this.$message.error(t)}))},tree(t,e,s){const a=[];return t.forEach((i=>{if(i.subId==e){const e=this.tree(t,i[s],s);e.length>0&&(i.children=e),a.push(i)}})),a},getClassificationData(){(0,F.C3)({func:"SO0001",userId:this.userInfo._id,token:this.userInfo.token,requstData:{}}).then((({data:t})=>{if("-1"==t.code)return this.$message.error(t.data);t.data&&(t.data.forEach((t=>{t.label=t.name,t.value=t.sortingId})),this.subMenuTreeList=this.tree(JSON.parse(JSON.stringify(t.data)),"-","sortingId"),this.subMenuList=t.data)})).catch((t=>{this.$message.error(t)}))},resetBodyFilterForm(){this.$refs["bodyFiltering"].resetFields(),this.highFilterTags=[],this.getData()},submitBodyFilterForm(){let t={houseIds:this.bodyFiltering.houseIds?this.bodyFiltering.houseIds.join():this.bodyFiltering.houseIds,sortIds:this.bodyFiltering.sortIds?this.bodyFiltering.sortIds.join():this.bodyFiltering.sortIds};for(let e in t)""==t[e]&&delete t[e];(0,F.C3)({func:"STR0000",userId:this.userInfo._id,token:this.userInfo.token,requstData:t}).then((({data:e})=>{if(this.highFilterTags=[],"-1"==e.code)return this.$message.error(e.data);if(e.data){this.tableData=e.data;let t=0,s=0;this.tableData.forEach((e=>{t+=e.inMoney,s+=e.outMoney})),this.statisticsData[0].value=t,this.statisticsData[1].value=s}for(let s in t)if("houseIds"==s){let e=t[s].split(","),a=[];this.houseNameData.forEach((t=>{e.forEach((e=>{t.value==e&&a.push(t.name)}))})),this.highFilterTags.push({name:this.$t("h.formTips54"),value:a.join(),uploadValue:t[s],keyStr:s})}else if("sortIds"==s){let e=t[s].split(","),a=[];this.subMenuList.forEach((t=>{e.forEach((e=>{t.sortingId==e&&a.push(t.name)}))})),this.highFilterTags.push({name:this.$t("h.formTips55"),value:a.join(),uploadValue:t[s],keyStr:s})}this.bodyFilteringVisible=!1})).catch((t=>{this.$message.error(t)}))}},created(){this.getData(),this.getWarehouseData(),this.getClassificationData()},watch:{}},I=D,_=(0,f.Z)(I,a,i,!1,null,"a1026fb8",null),C=_.exports}}]);