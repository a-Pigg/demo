"use strict";(self["webpackChunk_4010_assetweb"]=self["webpackChunk_4010_assetweb"]||[]).push([[85],{78067:function(t,e,i){i.d(e,{Z:function(){return u}});var a=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{top:"0","custom-class":"dialog","show-close":!1,visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e},opened:t.dialogVisibleOpened,close:t.dialogVisibleClose,closed:t.dialogVisibleClosed}},[e("div",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[e("div",{staticClass:"left"},[e("span",[t._v(t._s(t.$t("h.title15")))])]),e("div",{staticClass:"right"},[e("i",{staticClass:"el-icon-close",on:{click:function(e){t.dialogVisible=!1}}})])]),e("div",{staticClass:"dialog-body"},[e("el-tabs",{staticStyle:{height:"100%"},attrs:{"tab-position":"left"},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[e("el-tab-pane",{attrs:{label:t.$t("h.basicInformation"),name:"base"}},[e("div",{staticClass:"tab-pane-titel"},[e("span",[t._v(t._s(t.$t("h.basicInformation")))])]),e("div",{staticClass:"tab-pane-content"},[e("el-row",{attrs:{gutter:20}},t._l(t.billFormDetail,(function(i,a){return e("el-col",{key:a,class:i.class,attrs:{span:i.span}},[t._v(" "+t._s(i.val)+" ")])})),1)],1),e("div",{staticClass:"tab-pane-titel"},[e("span",[t._v(t._s(t.$t("h.List")))]),e("el-button",{directives:[{name:"show",rawName:"v-show",value:t.print,expression:"print"}],staticStyle:{"margin-left":"10px"},attrs:{type:"text"},on:{click:t.printAssetCard}},[t._v(t._s(t.$t("h.printLabelBtn")))])],1),e("div",{staticClass:"tab-pane-table"},[t._t("table")],2),e("div",{staticClass:"tab-pane-pagination"},[t._t("pagination")],2)]),t.audit?e("el-tab-pane",{attrs:{label:t.$t("h.auditInformation"),name:"audit"}},[e("el-timeline",t._l(t.auditStep,(function(a,n){return e("el-timeline-item",{key:n},["pedding"==a.state?e("div",{staticClass:"audit-info"},[e("div",{staticClass:"audit-staff"},[e("img",{attrs:{src:i(36108),alt:""}}),e("span",[t._v(t._s(a.auditStaffName))]),e("i",{class:"icon el-icon-"+a.auditState})]),e("div",{staticClass:"popconfirm"},["success"==a.auditState?e("h5",[t._v(" "+t._s(t.$t("h.agree"))+" ")]):t._e(),"error"==a.auditState?e("h5",[t._v(" "+t._s(t.$t("h.reject"))+" ")]):t._e(),"more"==a.auditState?e("h5",[t._v(" "+t._s(t.$t("h.PendingApproval"))+" ")]):t._e(),e("span",[t._v(t._s(a.message))])])]):e("span",[t._v(t._s(t.$t("h.end")))])])})),1)],1):t._e()],1)],1)])},n=[],s={components:{},data(){return{activeName:"base"}},props:{billDetailDialogVisible:{type:Boolean,default:!1},billFormDetail:{type:Array,default:()=>[]},audit:{type:Boolean,default:!0},auditStep:{type:Array,default:()=>[]},print:{type:Boolean,default:!1}},computed:{dialogVisible:{get(){return this.billDetailDialogVisible},set(t){this.$emit("update:billDetailDialogVisible",t)}}},methods:{dialogVisibleOpened(){this.$emit("opened")},dialogVisibleClose(){document.querySelector(".el-tabs__content").scrollTop=0},dialogVisibleClosed(){this.activeName="base",this.$emit("closed")},printAssetCard(){console.log(this.billFormDetail),this.$emit("print")}}},l=s,r=i(1001),o=(0,r.Z)(l,a,n,!1,null,"7bd948f5",null),u=o.exports},5791:function(t,e,i){i.d(e,{Z:function(){return u}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"filter-drawer"},[e("el-drawer",{attrs:{title:t.$t("h.advancedBtn"),size:550,direction:"rtl",visible:t.drawer},on:{"update:visible":function(e){t.drawer=e}}},[e("div",{staticClass:"filter-form"},[t._t("default")],2),e("div",{staticClass:"filter-btn"},[t._t("set"),e("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.submitFilterForm}},[t._v(t._s(t.$t("h.saveBtn")))]),e("el-button",{attrs:{size:"small"},on:{click:t.resetFilterForm}},[t._v(t._s(t.$t("h.resetBtn")))])],2)])],1)},n=[],s={name:"DsFilterDrawer",data(){return{}},props:{filterDrawerVisible:{type:Boolean}},computed:{drawer:{get(){return this.filterDrawerVisible},set(t){this.$emit("update:filterDrawerVisible",t)}}},methods:{submitFilterForm(){this.$emit("submitFilterForm")},resetFilterForm(){this.$emit("resetFilterForm")}}},l=s,r=i(1001),o=(0,r.Z)(l,a,n,!1,null,"05535b94",null),u=o.exports},17817:function(t,e,i){i.d(e,{Z:function(){return u}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"ds-filter-tag"},t._l(t.tagsData,(function(i){return e("el-tag",{key:i.keyStr,attrs:{size:t.tagSize,effect:"dark",closable:""},on:{close:function(e){return t.handleClose(i)}}},[t._v(" "+t._s(i.name)+":"+t._s(i.value.length>8?i.value.substring(0,7)+"...":i.value)+" ")])})),1)},n=[],s={name:"DsFilterTag",data(){return{tags:[{name:this.$t("h.label1"),type:""},{name:this.$t("h.label2"),type:"success"},{name:this.$t("h.label3"),type:"info"},{name:this.$t("h.label4"),type:"warning"},{name:this.$t("h.label5"),type:"danger"}]}},props:{filterTagsData:{type:Array,default:()=>[]},tagSize:{type:String,default:"medium"}},computed:{tagsData:{get(){return this.filterTagsData},set(t){this.$emit("update:filterTagsData",t)}}},methods:{handleClose(t){this.$emit("handleCloseTag",t)}}},l=s,r=i(1001),o=(0,r.Z)(l,a,n,!1,null,"628dc1ca",null),u=o.exports},93082:function(t,e,i){i.d(e,{Z:function(){return u}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"ds-pagination"},[e("el-pagination",t._b({attrs:{background:t.background,"current-page":t.currentPage,"page-size":t.pageSize,layout:t.layout,"page-sizes":t.pageSizes,total:t.total},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"update:pageSize":function(e){t.pageSize=e},"update:page-size":function(e){t.pageSize=e},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},"el-pagination",t.$attrs,!1))],1)},n=[],s={name:"DsPagination",data(){return{}},props:{total:{required:!0,type:Number},pageSizes:{type:Array,default(){return[20,50,100]}},page:{type:Number,default:1},limit:{type:Number,default:20},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0}},computed:{currentPage:{get(){return this.page},set(t){this.$emit("update:page",t)}},pageSize:{get(){return this.limit},set(t){this.$emit("update:limit",t)}}},methods:{handleSizeChange(t){this.$emit("pagination",{page:this.currentPage,limit:t})},handleCurrentChange(t){this.$emit("pagination",{page:t,limit:this.pageSize})}}},l=s,r=i(1001),o=(0,r.Z)(l,a,n,!1,null,"2377c114",null),u=o.exports},92003:function(t,e,i){i.d(e,{Z:function(){return u}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"left-panel"},[t._t("default")],2)},n=[],s={name:"DsQueryFormLeftPanel"},l=s,r=i(1001),o=(0,r.Z)(l,a,n,!1,null,"71d76034",null),u=o.exports},89782:function(t,e,i){i.d(e,{Z:function(){return u}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"right-panel"},[t._t("default")],2)},n=[],s={name:"DsQueryFormRightPanel"},l=s,r=i(1001),o=(0,r.Z)(l,a,n,!1,null,"c6443ba6",null),u=o.exports},19698:function(t,e,i){i.d(e,{Z:function(){return u}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"ds-query-form"},[t._t("default")],2)},n=[],s={name:"DsQueryForm"},l=s,r=i(1001),o=(0,r.Z)(l,a,n,!1,null,"6c8bfb78",null),u=o.exports},66403:function(t,e,i){i.d(e,{Z:function(){return u}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"ds-search"},[e("el-input",{attrs:{size:"small",placeholder:t.$t("h.keyword"),"prefix-icon":"el-icon-search"},on:{input:t.onInput},model:{value:t.value,callback:function(e){t.value="string"===typeof e?e.trim():e},expression:"value"}},[e("el-button",{attrs:{slot:"suffix",type:"text",size:"small"},on:{click:t.search},slot:"suffix"},[t._v(t._s(t.$t("h.Search")))])],1)],1)},n=[],s={name:"DsSearchBtn",data(){return{}},props:{searchValue:{type:String}},computed:{value:{get(){return this.searchValue},set(t){this.$emit("update:searchValue",t)}}},methods:{search(){this.$emit("search")},onInput(t){""==t&&this.search()}}},l=s,r=i(1001),o=(0,r.Z)(l,a,n,!1,null,"5bd7b965",null),u=o.exports},35978:function(t,e,i){i.r(e),i.d(e,{default:function(){return $}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"Inventory"},[e("el-card",{staticClass:"box-card"},[e("div",{staticClass:"operation-area"},[e("div",{staticClass:"right-header"},[e("ds-query-form",[e("ds-query-form-left-panel",[e("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){t.dialogVisible=!0}}},[t._v(t._s(t.$t("h.newBtn")))]),e("el-button",{attrs:{size:"small"},on:{click:t.exportFile}},[t._v(t._s(t.$t("h.exportBtn")))])],1),e("ds-query-form-right-panel",[e("ds-search-btn",{attrs:{searchValue:t.andLike},on:{"update:searchValue":function(e){t.andLike=e},"update:search-value":function(e){t.andLike=e},search:t.search}})],1)],1)],1),e("div",{staticClass:"screen"},[e("ds-query-form",[e("ds-query-form-left-panel",[e("ds-filter-tag",{attrs:{filterTagsData:t.highFilterTags},on:{handleCloseTag:t.handleCloseFilterTag}})],1),e("ds-query-form-right-panel",[e("span",{staticClass:"advancedSearch",on:{click:function(e){t.bodyFilteringVisible=!0}}},[t._v(t._s(t.$t("h.advancedBtn")))])])],1)],1),e("div",{staticClass:"right-body"},[e("el-table",{staticStyle:{width:"100%",height:"100%"},attrs:{data:t.tableDataDisplay,"header-cell-class-name":"table-header","cell-class-name":"table-content",border:"",align:"center"}},[e("el-table-column",{attrs:{prop:"name",label:t.$t("h.stocktakingSheetName"),align:"center"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("p",{staticClass:"inventory-name",on:{click:function(e){return t.openBillsDialog(i.row)}}},[t._v(" "+t._s(i.row.name)+" ")])]}}])}),e("el-table-column",{attrs:{prop:"roleRule",label:t.$t("h.title176"),align:"center"}}),e("el-table-column",{attrs:{prop:"staffName",label:t.$t("h.creator"),align:"center"}}),e("el-table-column",{attrs:{prop:"houseName",label:t.$t("h.title177"),align:"center"}}),e("el-table-column",{attrs:{prop:"createDate",label:t.$t("h.title178"),align:"center"}}),e("el-table-column",{attrs:{prop:"useDate",label:t.$t("h.title179"),align:"center"}}),e("el-table-column",{attrs:{prop:"statusName",label:t.$t("h.state"),align:"center"}}),e("el-table-column",{attrs:{label:t.$t("h.action"),align:"center"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.deleteInventory(i.row)}}},[t._v(t._s(t.$t("h.delBtn")))])]}}])}),e("template",{slot:"empty"},[e("ds-default-page",{attrs:{defaultPageImgUrl:t.defaultPageImgUrl,defaultPageTips:t.defaultPageTips}})],1)],2),e("div",{staticClass:"pagination"},[e("ds-pagination",{attrs:{small:"",total:t.total,page:t.paginationForm.currentPage,limit:t.paginationForm.pageSize},on:{"update:page":function(e){return t.$set(t.paginationForm,"currentPage",e)},"update:limit":function(e){return t.$set(t.paginationForm,"pageSize",e)},pagination:t.changeSizePage}})],1)],1),e("ds-filter-drawer",{attrs:{filterDrawerVisible:t.bodyFilteringVisible,modal:!1},on:{"update:filterDrawerVisible":function(e){t.bodyFilteringVisible=e},"update:filter-drawer-visible":function(e){t.bodyFilteringVisible=e},resetFilterForm:t.resetBodyFilterForm,submitFilterForm:t.submitBodyFilterForm}},[e("el-form",{ref:"body",attrs:{model:t.bodyFiltering,"label-width":"100px"}},[e("el-form-item",{attrs:{label:t.$t("h.state"),prop:"status"}},[e("el-select",{attrs:{placeholder:t.$t("h.tips4")+t.$t("h.state")},model:{value:t.bodyFiltering.status,callback:function(e){t.$set(t.bodyFiltering,"status",e)},expression:"bodyFiltering.status"}},[e("el-option",{attrs:{label:t.$t("h.title135"),value:"0"}}),e("el-option",{attrs:{label:t.$t("h.title180"),value:"-1"}})],1)],1),e("el-form-item",{attrs:{label:t.$t("h.creationTime"),prop:"createDate"}},[e("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"daterange",placeholder:t.$t("h.tips4")+t.$t("h.creationTime"),clearable:"","start-placeholder":t.$t("h.startDate"),"end-placeholder":t.$t("h.endDate"),"value-format":"yyyy-MM-dd"},model:{value:t.bodyFiltering.createDate,callback:function(e){t.$set(t.bodyFiltering,"createDate",e)},expression:"bodyFiltering.createDate"}})],1),e("el-form-item",{attrs:{label:t.$t("h.title179"),prop:"completeDate"}},[e("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"daterange",placeholder:t.$t("h.tips4")+t.$t("h.title179"),clearable:"","start-placeholder":t.$t("h.startDate"),"end-placeholder":t.$t("h.endDate"),"value-format":"yyyy-MM-dd"},model:{value:t.bodyFiltering.completeDate,callback:function(e){t.$set(t.bodyFiltering,"completeDate",e)},expression:"bodyFiltering.completeDate"}})],1),e("el-form-item",{attrs:{label:t.$t("h.inventoryChecker"),prop:"staffId"}},[e("el-select",{attrs:{multiple:"",placeholder:t.$t("h.tips4")},model:{value:t.bodyFiltering.staffId,callback:function(e){t.$set(t.bodyFiltering,"staffId",e)},expression:"bodyFiltering.staffId"}},t._l(t.employeeData,(function(t){return e("el-option",{key:t._id,attrs:{label:t.name,value:t._id}})})),1)],1),e("el-form-item",{attrs:{label:t.$t("h.formTips54"),prop:"houseId"}},[e("el-cascader",{attrs:{options:t.superiorWarehouseData,props:{checkStrictly:!0},"show-all-levels":!1},model:{value:t.bodyFiltering.houseId,callback:function(e){t.$set(t.bodyFiltering,"houseId",e)},expression:"bodyFiltering.houseId"}})],1),e("el-form-item",{attrs:{label:t.$t("h.fuzzyQuery"),prop:"andLike"}},[e("el-input",{model:{value:t.bodyFiltering.andLike,callback:function(e){t.$set(t.bodyFiltering,"andLike",e)},expression:"bodyFiltering.andLike"}})],1)],1)],1),e("el-dialog",{attrs:{title:t.$t("h.title181"),visible:t.dialogVisible,width:"50%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[t.warning?e("p",{staticClass:"warning"},[t._v(" "+t._s(t.$t("h.formTips54"))+t._s(t.warningTitle)+t._s(t.$t("h.title169"))+" ")]):t._e(),e("el-form",{ref:"warehouseData",attrs:{model:t.warehouseData,rules:t.warehouseRules,"label-width":"100px"}},[e("el-form-item",{attrs:{label:t.$t("h.stocktakingSheetName"),prop:"name"}},[e("el-input",{model:{value:t.warehouseData.name,callback:function(e){t.$set(t.warehouseData,"name",e)},expression:"warehouseData.name"}})],1),e("el-form-item",{attrs:{label:t.$t("h.title177"),prop:"houseId"}},[e("el-cascader",{attrs:{options:t.superiorWarehouseData,props:{checkStrictly:!0},"show-all-levels":!1},model:{value:t.warehouseData.houseId,callback:function(e){t.$set(t.warehouseData,"houseId",e)},expression:"warehouseData.houseId"}})],1),e("el-form-item",{attrs:{label:t.$t("h.title182"),prop:"staffId"}},[e("el-select",{attrs:{placeholder:t.$t("h.tips4")+t.$t("h.title182")},model:{value:t.warehouseData.staffId,callback:function(e){t.$set(t.warehouseData,"staffId",e)},expression:"warehouseData.staffId"}},t._l(t.employeeData,(function(t){return e("el-option",{key:t._id,attrs:{label:t.name,value:t._id}})})),1)],1),e("el-form-item",{attrs:{label:t.$t("h.creationDate"),prop:"createDate"}},[e("el-date-picker",{attrs:{disabled:"",type:"date"},model:{value:t.warehouseData.createDate,callback:function(e){t.$set(t.warehouseData,"createDate",e)},expression:"warehouseData.createDate"}})],1)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.closeDialog}},[t._v(t._s(t.$t("h.cancelBtn")))]),e("el-button",{attrs:{type:"primary",disabled:t.warning},on:{click:t.addInventory}},[t._v(t._s(t.$t("h.confirmBtn")))])],1)],1),e("el-dialog",{attrs:{title:t.$t("h.title181"),visible:t.batchVisible,fullscreen:""},on:{"update:visible":function(e){t.batchVisible=e}}}),e("bill-detail-dialog",{attrs:{billDetailDialogVisible:t.newBillsDialogVisible,billFormDetail:t.billFormDetail,audit:!1},on:{"update:billDetailDialogVisible":function(e){t.newBillsDialogVisible=e},"update:bill-detail-dialog-visible":function(e){t.newBillsDialogVisible=e},closed:t.bulkBillsDialogClose}},[e("template",{slot:"table"},[e("div",{staticClass:"bill-table"},[e("ds-query-form",[e("ds-query-form-left-panel"),e("ds-query-form-right-panel",[e("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":t.activeIndex,mode:"horizontal","background-color":"#f2f2f2","active-background-color":"#fff"},on:{select:t.inventoryHandleSelect}},[e("el-menu-item",{attrs:{index:"1"}},[t._v(t._s(t.$t("h.title174"))+"("+t._s(t.newBillsNumDisplay.all)+")")]),e("el-menu-item",{attrs:{index:"2"}},[t._v(t._s(t.$t("h.title135"))+"("+t._s(t.newBillsNumDisplay.countedAmount)+")")]),e("el-menu-item",{attrs:{index:"3"}},[t._v(t._s(t.$t("h.title134"))+"("+t._s(t.newBillsNumDisplay.unpackedAmount)+")")]),e("el-menu-item",{attrs:{index:"4"}},[t._v(t._s(t.$t("h.title136"))+"("+t._s(t.newBillsNumDisplay.inventoryProfit)+")")]),e("el-menu-item",{attrs:{index:"5"}},[t._v(t._s(t.$t("h.title175"))+"("+t._s(t.newBillsNumDisplay.inventoryAmount)+")")])],1)],1)],1),e("div",{staticClass:"screen"},[e("ds-query-form",[e("ds-query-form-left-panel",[e("ds-filter-tag",{attrs:{filterTagsData:t.articleHighFilterTags},on:{handleCloseTag:t.articleHandleCloseFilterTag}})],1),e("ds-query-form-right-panel",[e("span",{staticClass:"advancedSearch",on:{click:function(e){t.newBillsFilteringVisible=!0}}},[t._v(t._s(t.$t("h.advancedBtn")))])])],1)],1),e("div",{staticClass:"table"},[e("ds-table",{ref:"assetTableDataDisplay",attrs:{tableData:t.inventoryTableDataDisplay,tableConfig:t.inventoryTableConfig,columns:t.columns,rowKey:t=>t.articleInventoryId,onlyKey:"articleInventoryId"},on:{handleSelectionChange:t.inventorySelete}}),e("div",{staticClass:"pagination"},[e("ds-pagination",{attrs:{small:"",total:t.inventoryTotal,page:t.inventoryPaginationForm.currentPage,limit:t.inventoryPaginationForm.pageSize},on:{"update:page":function(e){return t.$set(t.inventoryPaginationForm,"currentPage",e)},"update:limit":function(e){return t.$set(t.inventoryPaginationForm,"pageSize",e)},pagination:t.inventoryChangeSizePage}})],1)],1)],1)])],2),e("ds-filter-drawer",{attrs:{filterDrawerVisible:t.newBillsFilteringVisible,modal:!1},on:{"update:filterDrawerVisible":function(e){t.newBillsFilteringVisible=e},"update:filter-drawer-visible":function(e){t.newBillsFilteringVisible=e},resetFilterForm:t.resetNewBillsFilterForm,submitFilterForm:t.submitNewBillsFilterForm}},[e("el-form",{ref:"newBills",attrs:{model:t.newBillsFiltering,"label-width":"80px"}},[e("el-form-item",{attrs:{label:t.$t("h.state"),prop:"status"}},[e("el-select",{attrs:{placeholder:t.$t("h.tips4")+t.$t("h.state")},model:{value:t.newBillsFiltering.status,callback:function(e){t.$set(t.newBillsFiltering,"status",e)},expression:"newBillsFiltering.status"}},[e("el-option",{attrs:{label:t.$t("h.title135"),value:"0"}}),e("el-option",{attrs:{label:t.$t("h.title180"),value:"-1"}}),e("el-option",{attrs:{label:t.$t("h.title136"),value:"1"}}),e("el-option",{attrs:{label:t.$t("h.title175"),value:"-2"}})],1)],1),e("el-form-item",{attrs:{label:t.$t("h.title183"),prop:"minUnpackedAmount"}},[e("div",{staticClass:"inp-box"},[e("el-input",{staticClass:"input-small",attrs:{placeholder:t.$t("h.formTips72"),type:"number",min:"0"},on:{change:t.changeMinUnpackedAmount},model:{value:t.newBillsFiltering.minUnpackedAmount,callback:function(e){t.$set(t.newBillsFiltering,"minUnpackedAmount",e)},expression:"newBillsFiltering.minUnpackedAmount"}}),t._v("    -     "),e("el-input",{staticClass:"input-small",attrs:{placeholder:t.$t("h.formTips73"),type:"number"},on:{change:t.changeMaxUnpackedAmount},model:{value:t.newBillsFiltering.maxUnpackedAmount,callback:function(e){t.$set(t.newBillsFiltering,"maxUnpackedAmount",e)},expression:"newBillsFiltering.maxUnpackedAmount"}})],1)]),e("el-form-item",{attrs:{label:t.$t("h.title184"),prop:"minUnpackedMoney"}},[e("div",{staticClass:"inp-box"},[e("el-input",{staticClass:"input-small",attrs:{placeholder:t.$t("h.formTips72"),type:"number",min:"0"},on:{change:t.changeMinUnpackedMoney},model:{value:t.newBillsFiltering.minUnpackedMoney,callback:function(e){t.$set(t.newBillsFiltering,"minUnpackedMoney",e)},expression:"newBillsFiltering.minUnpackedMoney"}}),t._v("    -     "),e("el-input",{staticClass:"input-small",attrs:{placeholder:t.$t("h.formTips73"),type:"number"},on:{change:t.changeMaxUnpackedMoney},model:{value:t.newBillsFiltering.maxUnpackedMoney,callback:function(e){t.$set(t.newBillsFiltering,"maxUnpackedMoney",e)},expression:"newBillsFiltering.maxUnpackedMoney"}})],1)]),e("el-form-item",{attrs:{label:t.$t("h.inventoryLossQuantity"),prop:"minInventoryAmount"}},[e("div",{staticClass:"inp-box"},[e("el-input",{staticClass:"input-small",attrs:{placeholder:t.$t("h.formTips72"),type:"number",min:"0"},on:{change:t.changeMinInventoryAmount},model:{value:t.newBillsFiltering.minInventoryAmount,callback:function(e){t.$set(t.newBillsFiltering,"minInventoryAmount",e)},expression:"newBillsFiltering.minInventoryAmount"}}),t._v("    -     "),e("el-input",{staticClass:"input-small",attrs:{placeholder:t.$t("h.formTips73"),type:"number"},on:{change:t.changeMaxInventoryAmount},model:{value:t.newBillsFiltering.maxInventoryAmount,callback:function(e){t.$set(t.newBillsFiltering,"maxInventoryAmount",e)},expression:"newBillsFiltering.maxInventoryAmount"}})],1)]),e("el-form-item",{attrs:{label:t.$t("h.title185"),prop:"minCountedAmount"}},[e("div",{staticClass:"inp-box"},[e("el-input",{staticClass:"input-small",attrs:{placeholder:t.$t("h.formTips72"),type:"number",min:"0"},on:{change:t.changeMinCountedAmount},model:{value:t.newBillsFiltering.minCountedAmount,callback:function(e){t.$set(t.newBillsFiltering,"minCountedAmount",e)},expression:"newBillsFiltering.minCountedAmount"}}),t._v("    -     "),e("el-input",{staticClass:"input-small",attrs:{placeholder:t.$t("h.formTips73"),type:"number"},on:{change:t.changeMaxCountedAmount},model:{value:t.newBillsFiltering.maxCountedAmount,callback:function(e){t.$set(t.newBillsFiltering,"maxCountedAmount",e)},expression:"newBillsFiltering.maxCountedAmount"}})],1)]),e("el-form-item",{attrs:{label:t.$t("h.title186"),prop:"minCountedMoney"}},[e("div",{staticClass:"inp-box"},[e("el-input",{staticClass:"input-small",attrs:{placeholder:t.$t("h.formTips72"),type:"number",min:"0"},on:{change:t.changeMinCountedMoney},model:{value:t.newBillsFiltering.minCountedMoney,callback:function(e){t.$set(t.newBillsFiltering,"minCountedMoney",e)},expression:"newBillsFiltering.minCountedMoney"}}),t._v("    -     "),e("el-input",{staticClass:"input-small",attrs:{placeholder:t.$t("h.formTips73"),type:"number"},on:{change:t.changeMaxCountedMoney},model:{value:t.newBillsFiltering.maxCountedMoney,callback:function(e){t.$set(t.newBillsFiltering,"maxCountedMoney",e)},expression:"newBillsFiltering.maxCountedMoney"}})],1)]),e("el-form-item",{attrs:{label:t.$t("h.fuzzyQuery"),prop:"andLike"}},[e("el-input",{model:{value:t.newBillsFiltering.andLike,callback:function(e){t.$set(t.newBillsFiltering,"andLike",e)},expression:"newBillsFiltering.andLike"}})],1)],1)],1)],1)])],1)},n=[],s=(i(57658),i(19698)),l=i(92003),r=i(89782),o=i(66403),u=i(93082),h=i(5791),d=i(60983),m=i(17817),c=i(42950),g=i(78067),p=i(76080),y=i(79992),f=i(83151),b={components:{DsQueryForm:s.Z,DsQueryFormLeftPanel:l.Z,DsQueryFormRightPanel:r.Z,DsSearchBtn:o.Z,DsPagination:u.Z,DsTable:d.Z,DsFilterDrawer:h.Z,DsFilterTag:m.Z,DsDefaultPage:c.Z,BillDetailDialog:g.Z},data(){return{userId:"",token:"",employeeData:[],warning:!1,warningTitle:"",newBillsDialogVisible:!1,inventoryTableData:[],inventoryTableConfig:{},columns:f.RU,displayData:{houseName:"",staffName:""},newBillsFilteringVisible:!1,newBillsFiltering:{status:"",andLike:"",houseId:"",minUnpackedAmount:"",maxUnpackedAmount:"",minUnpackedMoney:"",maxUnpackedMoney:"",minInventoryAmount:"",maxInventoryAmount:"",minCountedAmount:"",maxCountedAmount:"",minCountedMoney:"",maxCountedMoney:""},newBillsNumDisplay:{all:0,countedAmount:0,unpackedAmount:0,inventoryProfit:0,inventoryAmount:0,Identified:0},inventoryPaginationForm:{currentPage:1,pageSize:20},articleHighFilterTags:[],billFormDetail:[],andLike:"",tableData:[],warehouseData:{name:"",staffId:"",createDate:(0,y.X$)(),houseId:[]},warehouseRules:{name:[{required:!0,message:this.$t("h.tips3")+this.$t("h.stocktakingSheetName"),trigger:["blur","change"]}],staffId:[{required:!0,message:this.$t("h.tips4")+this.$t("h.inventoryChecker"),trigger:"change"}],houseId:[{required:!0,message:this.$t("h.tips3")+this.$t("h.formTips54"),trigger:"change"}]},bodyFilteringVisible:!1,bodyFiltering:{andLike:"",status:"",createDate:"",staffId:"",houseId:[],completeDate:""},paginationForm:{currentPage:1,pageSize:20},highFilterTags:[],houseNameData:[],activeIndex:"1",superiorWarehouseData:[],dialogVisible:!1,batchVisible:!1,houseId:"",defaultPageImgUrl:"",defaultPageTips:""}},computed:{total(){return this.tableData.length},tableDataDisplay(){let t=[],e=0,i=this.paginationForm.pageSize-1;if(1==this.paginationForm.currentPage)for(let a=e;a<i;a++)this.tableData[a]&&t.push(this.tableData[a]);else for(let a=i*(this.paginationForm.currentPage-1);a<i*this.paginationForm.currentPage;a++)this.tableData[a]&&t.push(this.tableData[a]);return t},inventoryTotal(){return this.inventoryTableData.length},inventoryTableDataDisplay(){let t=[],e=0,i=this.inventoryPaginationForm.pageSize-1;if(1==this.inventoryPaginationForm.currentPage)for(let a=e;a<i;a++)this.inventoryTableData[a]&&t.push(this.inventoryTableData[a]);else for(let a=i*(this.inventoryPaginationForm.currentPage-1);a<i*this.inventoryPaginationForm.currentPage;a++)this.inventoryTableData[a]&&t.push(this.inventoryTableData[a]);return t}},methods:{articleHandleCloseFilterTag(t){switch(t.keyStr){case"status":this.newBillsFiltering.status="";break;case"andLike":this.newBillsFiltering.andLike="";break;case"unpackedAmount":this.newBillsFiltering.minUnpackedAmount="",this.newBillsFiltering.maxUnpackedAmount="";break;case"unpackedMoney":this.newBillsFiltering.minUnpackedMoney="",this.newBillsFiltering.maxUnpackedMoney="";break;case"inventoryAmount":this.newBillsFiltering.minInventoryAmount="",this.newBillsFiltering.maxInventoryAmount="";break;case"countedAmount":this.newBillsFiltering.minCountedAmount="",this.newBillsFiltering.maxCountedAmount="";break;default:this.newBillsFiltering.minCountedMoney="",this.newBillsFiltering.maxCountedMoney=""}this.articleHighFilterTags.splice(this.articleHighFilterTags.indexOf(t),1);let e={inventoryId:this.displayData.inventoryId,status:"",andLike:"",unpackedAmount:"",unpackedMoney:"",inventoryAmount:"",countedAmount:"",countedMoney:""};this.articleHighFilterTags.forEach((t=>{for(let i in e)t.keyStr==i&&(e[i]="status"==i?t.uploadValue:t.value)}));for(let i in e)""!=e[i]&&","!=e[i]||delete e[i];(0,p.C3)({func:"AT0001",userId:this.userId,token:this.token,requstData:e}).then((({data:t})=>{if("-1"==t.code)return this.$message.error(t.data);this.inventoryTableData=t.data;let e=0,i=0,a=0,n=0;this.inventoryTableData.forEach((t=>{t.status&&"-1"==t.status?(t.statusName=this.$t("h.title180"),i+=1):t.status&&"0"==t.status?(t.statusName=this.$t("h.title135"),e+=1):t.status&&"1"==t.status?(t.statusName=this.$t("h.title136"),a+=1):t.status&&"-2"==t.status&&(t.statusName=this.$t("h.title175"),n+=1)})),this.newBillsNumDisplay={all:this.inventoryTableData.length,countedAmount:e,unpackedAmount:i,inventoryProfit:a,inventoryAmount:n,Identified:0},this.inventoryTableData.forEach((t=>{t.image&&(t.image=window.$EXCEL_URL+"image/"+t.image,t.prop=t.image)})),this.inventoryTableData&&0!=this.inventoryTableData.length||(this.inventoryTableData=[])})).catch((t=>{this.$message.error(t)}))},handleCloseFilterTag(t){switch(t.keyStr){case"andLike":this.bodyFiltering.andLike="";break;case"status":this.bodyFiltering.status="";break;case"createDate":this.bodyFiltering.createDate="";break;case"staffId":this.bodyFiltering.staffId="";break;case"houseId":this.bodyFiltering.houseId=[];break;default:this.bodyFiltering.completeDate=""}this.highFilterTags.splice(this.highFilterTags.indexOf(t),1);let e={inventoryId:"",status:"",createDate:"",completeDate:"",staffId:"",houseId:"",andLike:""};this.highFilterTags.forEach((t=>{for(let i in e)t.keyStr==i&&(e[i]="status"==i||"staffId"==i||"houseId"==i?t.uploadValue:t.value)}));for(let i in e)""!=e[i]&&","!=e[i]||delete e[i];(0,p.C3)({func:"IT0001",userId:this.userId,token:this.token,requstData:e}).then((({data:t})=>{if("-1"==t.code)return this.$message.error(t.data);this.tableData=t.data,this.tableData&&0!=this.tableData.length||(this.tableData=[]),this.tableData.forEach((t=>{"-1"==t.status?t.statusName=this.$t("h.title180"):t.statusName=this.$t("h.title135")}))})).catch((t=>{this.$message.error(t)}))},changeMaxCountedMoney(){(""==this.newBillsFiltering.maxCountedMoney.trim()||Number(this.newBillsFiltering.maxCountedMoney)<=Number(this.newBillsFiltering.minCountedMoney))&&(this.newBillsFiltering.maxCountedMoney=(1*this.newBillsFiltering.minCountedMoney+1).toString())},changeMinCountedMoney(t){(""==this.newBillsFiltering.maxCountedMoney.trim()||Number(this.newBillsFiltering.maxCountedMoney)<Number(t))&&(this.newBillsFiltering.maxCountedMoney=(1*t+1).toString())},changeMaxCountedAmount(t){if(""==this.newBillsFiltering.minCountedAmount.trim()&&""==t)return;let e=/^[0-9]+$/;if(!e.test(t))return this.newBillsFiltering.maxCountedAmount=(1*this.newBillsFiltering.minCountedAmount+1).toString(),this.$message.error(this.$t("h.tips255"));(""==this.newBillsFiltering.maxCountedAmount.trim()||Number(this.newBillsFiltering.maxCountedAmount)<=Number(this.newBillsFiltering.minCountedAmount))&&(this.newBillsFiltering.maxCountedAmount=(1*this.newBillsFiltering.minCountedAmount+1).toString())},changeMinCountedAmount(t){if(""==this.newBillsFiltering.maxCountedAmount.trim()&&""==t)return;let e=/^[0-9]+$/;if(!e.test(t))return this.newBillsFiltering.minCountedAmount="0",this.$message.error(this.$t("h.tips255"));(""==this.newBillsFiltering.maxCountedAmount.trim()||Number(this.newBillsFiltering.maxCountedAmount)<Number(t))&&(this.newBillsFiltering.maxCountedAmount=(1*t+1).toString())},changeMaxInventoryAmount(t){if(""==this.newBillsFiltering.minInventoryAmount.trim()&&""==t)return;let e=/^[0-9]+$/;if(!e.test(t))return this.newBillsFiltering.maxInventoryAmount=(1*this.newBillsFiltering.minInventoryAmount+1).toString(),this.$message.error(this.$t("h.tips255"));(""==this.newBillsFiltering.maxInventoryAmount.trim()||Number(this.newBillsFiltering.maxInventoryAmount)<=Number(this.newBillsFiltering.minInventoryAmount))&&(this.newBillsFiltering.maxInventoryAmount=(1*this.newBillsFiltering.minInventoryAmount+1).toString())},changeMinInventoryAmount(t){if(""==this.newBillsFiltering.maxInventoryAmount.trim()&&""==t)return;let e=/^[0-9]+$/;if(!e.test(t))return this.newBillsFiltering.minInventoryAmount="0",this.$message.error(this.$t("h.tips255"));(""==this.newBillsFiltering.maxInventoryAmount.trim()||Number(this.newBillsFiltering.maxInventoryAmount)<Number(t))&&(this.newBillsFiltering.maxInventoryAmount=(1*t+1).toString())},changeMaxUnpackedMoney(){(""==this.newBillsFiltering.maxUnpackedMoney.trim()||Number(this.newBillsFiltering.maxUnpackedMoney)<=Number(this.newBillsFiltering.minUnpackedMoney))&&(this.newBillsFiltering.maxUnpackedMoney=(1*this.newBillsFiltering.minUnpackedMoney+1).toString())},changeMinUnpackedMoney(t){(""==this.newBillsFiltering.maxUnpackedMoney.trim()||Number(this.newBillsFiltering.maxUnpackedMoney)<Number(t))&&(this.newBillsFiltering.maxUnpackedMoney=(1*t+1).toString())},changeMaxUnpackedAmount(t){if(""==this.newBillsFiltering.minUnpackedAmount.trim()&&""==t)return;let e=/^[0-9]+$/;if(!e.test(t))return this.newBillsFiltering.maxUnpackedAmount=(1*this.newBillsFiltering.minUnpackedAmount+1).toString(),this.$message.error(this.$t("h.tips255"));(""==this.newBillsFiltering.maxUnpackedAmount.trim()||Number(this.newBillsFiltering.maxUnpackedAmount)<=Number(this.newBillsFiltering.minUnpackedAmount))&&(this.newBillsFiltering.maxUnpackedAmount=(1*this.newBillsFiltering.minUnpackedAmount+1).toString())},changeMinUnpackedAmount(t){if(""==this.newBillsFiltering.maxUnpackedAmount.trim()&&""==t)return;let e=/^[0-9]+$/;if(!e.test(t))return this.newBillsFiltering.minUnpackedAmount="0",this.$message.error(this.$t("h.tips255"));(""==this.newBillsFiltering.maxUnpackedAmount.trim()||Number(this.newBillsFiltering.maxUnpackedAmount)<Number(t))&&(this.newBillsFiltering.maxUnpackedAmount=(1*t+1).toString())},changeSizePage(t){this.paginationForm.currentPage=t.page,this.paginationForm.pageSize=t.limit},inventoryChangeSizePage(t){this.inventoryPaginationForm.currentPage=t.page,this.inventoryPaginationForm.pageSize=t.limit},exportFile(){(0,p.C3)({func:"IT0001",userId:this.userId,token:this.token,requstData:{pull:1}}).then((({data:t})=>{if("-1"==t.code)return this.$message.error(t.data);(0,y.M)(window.$EXCEL_URL+t.data),this.$message.success(this.$t("h.exportSuccessful"))})).catch((t=>{this.$message.error(t)}))},getEmployeeData(){(0,p.Ys)({func:"S0005",userId:this.userId,token:this.token,requstData:{_id:""}}).then((({data:t})=>{if("-1"==t.code)return this.$message.error(t.data);t.data?this.employeeData=t.data:this.employeeData=[]})).catch((t=>{this.$message.error(t)}))},getWarehouseData(){(0,p.C3)({func:"ST0001",userId:this.userId,token:this.token,requstData:{}}).then((({data:t})=>{if("-1"==t.code)return this.$message.error(t.data);if(t.data){let e=[];t.data.forEach((t=>{t.disabled||"0"!=t.state||e.push({name:t.name,label:t.name,value:t.houseId,state:t.state,subId:t.subId}),this.houseNameData.push({name:t.name,value:t.houseId,state:t.state})})),this.superiorWarehouseData=this.tree(e,"-")}})).catch((t=>{this.$message.error(t)}))},handleClose(){this.$refs["warehouseData"].resetFields(),this.dialogVisible=!1,this.warning=!1},tree(t,e){const i=[];return t.forEach((a=>{if(a.subId==e){const e=this.tree(t,a.value);e.length>0&&(a.children=e),i.push(a)}})),i},closeDialog(){this.$refs["warehouseData"].resetFields(),this.dialogVisible=!1,this.warning=!1},addInventory(){this.$refs["warehouseData"].validate((t=>{if(!t)return!1;(0,p.C3)({func:"IT0002",userId:this.userId,token:this.token,requstData:{name:this.warehouseData.name,staffId:this.warehouseData.staffId,createDate:this.warehouseData.createDate,houseId:this.warehouseData.houseId.length>1?this.warehouseData.houseId[this.warehouseData.houseId.length-1]:this.warehouseData.houseId.join()}}).then((({data:t})=>{if("-1"==t.code)return this.$message.error(t.data);this.$message.success(t.data),this.getData()})).catch((t=>this.$message.error(t))),this.dialogVisible=!1}))},getData(){(0,p.C3)({func:"IT0001",userId:this.userId,token:this.token,requstData:{}}).then((({data:t})=>{t.data?(this.tableData=t.data,this.tableData.forEach((t=>{"-1"==t.status?t.statusName=this.$t("h.title180"):t.statusName=this.$t("h.title135")}))):this.tableData=[]})).catch((t=>{this.$message.error(t)}))},getInventoryData(t){(0,p.C3)({func:"AT0001",userId:this.userId,token:this.token,requstData:{inventoryId:t}}).then((({data:t})=>{if("-1"==t.code)return this.$message.error(t.data);if(t.data){this.inventoryTableData=t.data;let e=0,i=0,a=0,n=0;this.inventoryTableData.forEach((t=>{t.status&&"-1"==t.status?(t.statusName=this.$t("h.title180"),i+=1):t.status&&"0"==t.status?(t.statusName=this.$t("h.title135"),e+=1):t.status&&"1"==t.status?(t.statusName=this.$t("h.title136"),a+=1):t.status&&"-2"==t.status&&(t.statusName=this.$t("h.title175"),n+=1)})),this.newBillsNumDisplay={all:this.inventoryTableData.length,countedAmount:e,unpackedAmount:i,inventoryProfit:a,inventoryAmount:n,Identified:0},this.inventoryTableData.forEach((t=>{t.image&&(t.image=window.$EXCEL_URL+"image/"+t.image,t.prop=t.image)}))}else this.inventoryTableData=[],this.newBillsNumDisplay={all:0,countedAmount:0,unpackedAmount:0,inventoryProfit:0,inventoryAmount:0,Identified:0}})).catch((t=>this.$message.error(t)))},deleteInventory(t){this.$confirm(this.$t("h.tips260"),this.$t("h.title18"),{confirmButtonText:this.$t("h.confirmBtn"),cancelButtonText:this.$t("h.cancelBtn"),type:"warning",type:"warning"}).then((()=>{(0,p.C3)({func:"IT0004",userId:this.userId,token:this.token,requstData:{inventoryId:t.inventoryId}}).then((({data:t})=>{if("-1"==t.code)return this.$message.error(t.data);this.$message.success(t.data),this.getData()})).catch((t=>this.$message.error(t)))})).catch((()=>{this.$message({type:"info",message:this.$t("h.tips98")})}))},search(){(0,p.C3)({func:"IT0001",userId:this.userId,token:this.token,requstData:{andLike:this.andLike}}).then((({data:t})=>{if("-1"==t.code)return this.$message.error(t.data);this.tableData=t.data,this.tableData&&0!=this.tableData.length||(this.tableData=[]),this.tableData.forEach((t=>{"-1"==t.status?t.statusName=this.$t("h.title180"):t.statusName=this.$t("h.title135")}))})).catch((t=>{this.$message.error(t)}))},openBillsDialog(t){this.newBillsDialogVisible=!0,this.displayData={houseName:t.houseName,staffName:t.staffName,inventoryId:t.inventoryId},this.billFormDetail=[{span:3,class:"col-title",val:this.$t("h.title177")},{span:5,class:"col-content",val:t.houseName},{span:3,class:"col-title",val:this.$t("h.inventoryChecker")},{span:5,class:"col-content",val:t.staffName}],this.getInventoryData(t.inventoryId)},bulkBillsDialogClose(){},inventoryHandleSelect(t){"1"==t?(0,p.C3)({func:"AT0001",userId:this.userId,token:this.token,requstData:{inventoryId:this.displayData.inventoryId}}).then((({data:t})=>{if("-1"==t.code)return this.$message.error(t.data);this.inventoryTableData=t.data,this.inventoryTableData&&0!=this.inventoryTableData.length||(this.inventoryTableData=[])})).catch((t=>{this.$message.error(t)})):"2"==t?(0,p.C3)({func:"AT0001",userId:this.userId,token:this.token,requstData:{inventoryId:this.displayData.inventoryId,status:0}}).then((({data:t})=>{if("-1"==t.code)return this.$message.error(t.data);this.inventoryTableData=t.data,this.inventoryTableData&&0!=this.inventoryTableData.length||(this.inventoryTableData=[])})).catch((t=>{this.$message.error(t)})):"3"==t?(0,p.C3)({func:"AT0001",userId:this.userId,token:this.token,requstData:{inventoryId:this.displayData.inventoryId,status:-1}}).then((({data:t})=>{if("-1"==t.code)return this.$message.error(t.data);this.inventoryTableData=t.data,this.inventoryTableData&&0!=this.inventoryTableData.length||(this.inventoryTableData=[])})).catch((t=>{this.$message.error(t)})):"4"==t?(0,p.C3)({func:"AT0001",userId:this.userId,token:this.token,requstData:{inventoryId:this.displayData.inventoryId,status:1}}).then((({data:t})=>{if("-1"==t.code)return this.$message.error(t.data);this.inventoryTableData=t.data,this.inventoryTableData&&0!=this.inventoryTableData.length||(this.inventoryTableData=[])})).catch((t=>{this.$message.error(t)})):"5"==t?(0,p.C3)({func:"AT0001",userId:this.userId,token:this.token,requstData:{inventoryId:this.displayData.inventoryId,status:-2}}).then((({data:t})=>{if("-1"==t.code)return this.$message.error(t.data);this.inventoryTableData=t.data,this.inventoryTableData&&0!=this.inventoryTableData.length||(this.inventoryTableData=[])})).catch((t=>{this.$message.error(t)})):"6"==t&&(this.inventoryTableData=[])},inventorySelete(){},resetNewBillsFilterForm(){this.articleHighFilterTags=[],this.$refs["newBills"].resetFields(),this.newBillsFiltering.maxUnpackedAmount="",this.newBillsFiltering.maxUnpackedMoney="",this.newBillsFiltering.maxInventoryAmount="",this.newBillsFiltering.maxCountedAmount="",this.newBillsFiltering.maxCountedMoney="",(0,p.C3)({func:"AT0001",userId:this.userId,token:this.token,requstData:{}}).then((({data:t})=>{if("-1"==t.code)return this.$message.error(t.data);this.inventoryTableData=t.data,this.inventoryTableData&&0!=this.inventoryTableData.length||(this.inventoryTableData=[]),this.inventoryTableData.forEach((t=>{t.status&&"-1"==t.status?(t.statusName=this.$t("h.title180"),unpackedAmount+=1):t.status&&"0"==t.status?(t.statusName=this.$t("h.title135"),countedAmount+=1):t.status&&"1"==t.status?(t.statusName=this.$t("h.title136"),inventoryProfit+=1):t.status&&"-2"==t.status&&(t.statusName=this.$t("h.title175"),inventoryAmount+=1)})),this.inventoryTableData.forEach((t=>{t.image&&(t.image=window.$EXCEL_URL+"image/"+t.image,t.prop=t.image)})),this.newBillsFilteringVisible=!1})).catch((t=>{this.$message.error(t)}))},submitNewBillsFilterForm(){if(""!=this.newBillsFiltering.minUnpackedAmount.trim()&&""==this.newBillsFiltering.maxUnpackedAmount.trim()||""==this.newBillsFiltering.minUnpackedAmount.trim()&&""!=this.newBillsFiltering.maxUnpackedAmount.trim())return this.$message.error(this.$t("h.tips259"));if(""!=this.newBillsFiltering.minUnpackedMoney.trim()&&""==this.newBillsFiltering.maxUnpackedMoney.trim()||""==this.newBillsFiltering.minUnpackedMoney.trim()&&""!=this.newBillsFiltering.maxUnpackedMoney.trim())return this.$message.error(this.$t("h.tips259"));if(""!=this.newBillsFiltering.minInventoryAmount.trim()&&""==this.newBillsFiltering.maxInventoryAmount.trim()||""==this.newBillsFiltering.minInventoryAmount.trim()&&""!=this.newBillsFiltering.maxInventoryAmount.trim())return this.$message.error(this.$t("h.tips259"));if(""!=this.newBillsFiltering.minCountedAmount.trim()&&""==this.newBillsFiltering.maxCountedAmount.trim()||""==this.newBillsFiltering.minCountedAmount.trim()&&""!=this.newBillsFiltering.maxCountedAmount.trim())return this.$message.error(this.$t("h.tips259"));if(""!=this.newBillsFiltering.minCountedMoney.trim()&&""==this.newBillsFiltering.maxCountedMoney.trim()||""==this.newBillsFiltering.minCountedMoney.trim()&&""!=this.newBillsFiltering.maxCountedMoney.trim())return this.$message.error(this.$t("h.tips259"));let t={inventoryId:this.displayData.inventoryId,status:this.newBillsFiltering.status,andLike:this.newBillsFiltering.andLike,unpackedAmount:this.newBillsFiltering.minUnpackedAmount+","+this.newBillsFiltering.maxUnpackedAmount,unpackedMoney:this.newBillsFiltering.minUnpackedMoney+","+this.newBillsFiltering.maxUnpackedMoney,inventoryAmount:this.newBillsFiltering.minInventoryAmount+","+this.newBillsFiltering.maxInventoryAmount,countedAmount:this.newBillsFiltering.minCountedAmount+","+this.newBillsFiltering.maxCountedAmount,countedMoney:this.newBillsFiltering.minCountedMoney+","+this.newBillsFiltering.maxCountedMoney};for(let e in t)""!=t[e]&&","!=t[e]||delete t[e];(0,p.C3)({func:"AT0001",userId:this.userId,token:this.token,requstData:t}).then((({data:e})=>{if(this.articleHighFilterTags=[],"-1"==e.code)return this.$message.error(e.data);this.inventoryTableData=e.data,this.inventoryTableData&&0!=this.inventoryTableData.length||(this.inventoryTableData=[]),this.inventoryTableData.forEach((t=>{t.status&&"-1"==t.status?(t.statusName=this.$t("h.title180"),unpackedAmount+=1):t.status&&"0"==t.status?(t.statusName=this.$t("h.title135"),countedAmount+=1):t.status&&"1"==t.status?(t.statusName=this.$t("h.title136"),inventoryProfit+=1):t.status&&"-2"==t.status&&(t.statusName=this.$t("h.title175"),inventoryAmount+=1)})),this.inventoryTableData.forEach((t=>{t.image&&(t.image=window.$EXCEL_URL+"image/"+t.image,t.prop=t.image)}));for(let i in t)if("status"==i){let e="";e="0"==t[i]?this.$t("h.title135"):"-1"==t[i]?this.$t("h.title180"):"1"==t[i]?this.$t("h.title136"):this.$t("h.title175"),this.articleHighFilterTags.push({name:this.$t("h.state"),value:e,uploadValue:t[i],keyStr:i})}else"andLike"==i?this.articleHighFilterTags.push({name:this.$t("h.fuzzyQuery"),value:t[i],keyStr:i}):"unpackedAmount"==i?this.articleHighFilterTags.push({name:this.$t("h.title183"),value:t[i],keyStr:i}):"unpackedMoney"==i?this.articleHighFilterTags.push({name:this.$t("h.title184"),value:t[i],keyStr:i}):"inventoryAmount"==i?this.articleHighFilterTags.push({name:this.$t("h.inventoryLossQuantity"),value:t[i],keyStr:i}):"countedAmount"==i?this.articleHighFilterTags.push({name:this.$t("h.title185"),value:t[i],keyStr:i}):"countedMoney"==i&&this.articleHighFilterTags.push({name:this.$t("h.title186"),value:t[i],keyStr:i});this.newBillsFilteringVisible=!1})).catch((t=>{this.$message.error(t)}))},resetBodyFilterForm(){this.highFilterTags=[],this.$refs["body"].resetFields(),(0,p.C3)({func:"IT0001",userId:this.userId,token:this.token,requstData:{}}).then((({data:t})=>{if("-1"==t.code)return this.$message.error(t.data);this.tableData=t.data,this.tableData&&0!=this.tableData.length||(this.tableData=[]),this.tableData.forEach((t=>{"-1"==t.status?t.statusName=this.$t("h.title180"):t.statusName=this.$t("h.title135")})),this.$refs["body"].resetFields(),this.bodyFilteringVisible=!1})).catch((t=>{this.$message.error(t)}))},submitBodyFilterForm(){let t={inventoryId:this.displayData.inventoryId,status:this.bodyFiltering.status,createDate:this.bodyFiltering.createDate?this.bodyFiltering.createDate.join():"",completeDate:this.bodyFiltering.completeDate?this.bodyFiltering.completeDate.join():"",staffId:this.bodyFiltering.staffId.join(),houseId:this.bodyFiltering.houseId.length>1?this.bodyFiltering.houseId[this.bodyFiltering.houseId.length-1]:this.bodyFiltering.houseId.join(),andLike:this.bodyFiltering.andLike};for(let e in t)""!=t[e]&&","!=t[e]||delete t[e];(0,p.C3)({func:"IT0001",userId:this.userId,token:this.token,requstData:t}).then((({data:e})=>{if(this.highFilterTags=[],"-1"==e.code)return this.$message.error(e.data);this.tableData=e.data,this.tableData&&0!=this.tableData.length||(this.tableData=[]),this.tableData.forEach((t=>{"-1"==t.status?t.statusName=this.$t("h.title180"):t.statusName=this.$t("h.title135")}));for(let i in t)if("andLike"==i)this.highFilterTags.push({name:this.$t("h.fuzzyQuery"),value:t[i],keyStr:i});else if("status"==i){let e="";e="0"==t[i]?this.$t("h.title135"):this.$t("h.title180"),this.highFilterTags.push({name:this.$t("h.state"),value:e,uploadValue:t[i],keyStr:i})}else if("createDate"==i)this.highFilterTags.push({name:this.$t("h.creationTime"),value:t[i],keyStr:i});else if("staffId"==i){let e="";this.employeeData.forEach((a=>{a._id==t[i]&&(e=a.name)})),this.highFilterTags.push({name:this.$t("h.inventoryChecker"),value:e,uploadValue:t[i],keyStr:i})}else if("houseId"==i){let e="";this.houseNameData.forEach((a=>{a.value==t[i]&&(e=a.name)})),this.highFilterTags.push({name:this.$t("h.formTips54"),value:e,uploadValue:t[i],keyStr:i})}else"completeDate"==i&&this.highFilterTags.push({name:this.$t("h.title179"),value:t[i],keyStr:i});this.bodyFilteringVisible=!1})).catch((t=>{this.$message.error(t)}))}},created(){this.userId=JSON.parse(sessionStorage.getItem("vuex")).userInfo._id,this.token=JSON.parse(sessionStorage.getItem("vuex")).userInfo.token,this.getData(this.userId,this.token),this.getEmployeeData(),this.getWarehouseData()},watch:{"warehouseData.houseId":function(t){for(let e=0;e<this.houseNameData.length;e++){if(this.houseNameData[e].value==t&&"-1"==this.houseNameData[e].state)return this.warning=!0,void(this.warningTitle=this.houseNameData[e].name);this.houseNameData.length-1==e&&(this.warning=!1,this.warningTitle="")}}}},v=b,F=i(1001),D=(0,F.Z)(v,a,n,!1,null,"0677364e",null),$=D.exports},36108:function(t,e,i){t.exports=i.p+"img/head-portrait.860b5e9d.png"}}]);