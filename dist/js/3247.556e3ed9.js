"use strict";(self["webpackChunk_4010_assetweb"]=self["webpackChunk_4010_assetweb"]||[]).push([[3247],{93082:function(t,e,i){i.d(e,{Z:function(){return d}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"ds-pagination"},[e("el-pagination",t._b({attrs:{background:t.background,"current-page":t.currentPage,"page-size":t.pageSize,layout:t.layout,"page-sizes":t.pageSizes,total:t.total},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"update:pageSize":function(e){t.pageSize=e},"update:page-size":function(e){t.pageSize=e},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},"el-pagination",t.$attrs,!1))],1)},s=[],l={name:"DsPagination",data(){return{}},props:{total:{required:!0,type:Number},pageSizes:{type:Array,default(){return[20,50,100]}},page:{type:Number,default:1},limit:{type:Number,default:20},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0}},computed:{currentPage:{get(){return this.page},set(t){this.$emit("update:page",t)}},pageSize:{get(){return this.limit},set(t){this.$emit("update:limit",t)}}},methods:{handleSizeChange(t){this.$emit("pagination",{page:this.currentPage,limit:t})},handleCurrentChange(t){this.$emit("pagination",{page:t,limit:this.pageSize})}}},n=l,o=i(1001),r=(0,o.Z)(n,a,s,!1,null,"2377c114",null),d=r.exports},92003:function(t,e,i){i.d(e,{Z:function(){return d}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"left-panel"},[t._t("default")],2)},s=[],l={name:"DsQueryFormLeftPanel"},n=l,o=i(1001),r=(0,o.Z)(n,a,s,!1,null,"71d76034",null),d=r.exports},89782:function(t,e,i){i.d(e,{Z:function(){return d}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"right-panel"},[t._t("default")],2)},s=[],l={name:"DsQueryFormRightPanel"},n=l,o=i(1001),r=(0,o.Z)(n,a,s,!1,null,"c6443ba6",null),d=r.exports},19698:function(t,e,i){i.d(e,{Z:function(){return d}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"ds-query-form"},[t._t("default")],2)},s=[],l={name:"DsQueryForm"},n=l,o=i(1001),r=(0,o.Z)(n,a,s,!1,null,"6c8bfb78",null),d=r.exports},9905:function(t,e,i){i.r(e),i.d(e,{default:function(){return v}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"dict"},[e("el-card",{staticClass:"dict-card"},[e("div",{staticClass:"dict-card-header",attrs:{slot:"header"},slot:"header"},[e("ds-query-form",[e("ds-query-form-left-panel",[e("el-button",{attrs:{type:"paimary",size:"small",disabled:""}},[t._v(t._s(t.$t("h.newBtn")))])],1),e("ds-query-form-right-panel")],1)],1),e("div",{staticClass:"dict-card-content"},[e("div",{staticClass:"dict-filter"}),e("div",{staticClass:"dict-table"},[e("ds-table",{ref:"tableRef",attrs:{loading:t.loading,tableConfig:t.config,columns:t.columns,tableData:t.dicts},on:{checkTableRowDetail:t.checkTableRowDetail},scopedSlots:t._u([{key:"operation",fn:function({scope:i}){return[e("el-button",{attrs:{disabled:!i.row.disabled,type:"text",size:"small"},on:{click:function(e){return t.forbiddenDict(i.row)}}},[t._v(t._s(t.$t("h.disabled")))]),e("span",{staticClass:"line"}),e("el-button",{attrs:{disabled:!i.row.delete,type:"text",size:"small"},on:{click:function(e){return t.deleteDict(i.row)}}},[t._v(t._s(t.$t("h.delBtn")))])]}}])})],1),e("div",{staticClass:"dict-pagination"})])]),e("el-dialog",{attrs:{top:"0","custom-class":"detailDialog","show-close":!1,visible:t.detailOpen},on:{"update:visible":function(e){t.detailOpen=e}}},[e("div",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[e("div",{staticClass:"left"},[e("span",[t._v(t._s(t.$t("h.title15")))])]),e("div",{staticClass:"right"},[e("i",{staticClass:"el-icon-close",on:{click:function(e){t.detailOpen=!1}}})])]),e("div",{staticClass:"dialog-body"},[e("el-tabs",{staticStyle:{height:"100%"},attrs:{"tab-position":"left"},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[e("el-tab-pane",{attrs:{label:t.$t("h.basicInformation"),name:"base"}},[e("div",{staticClass:"tab-pane-titel"},[e("span",[t._v(t._s(t.$t("h.basicInformation")))]),e("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-edit"},on:{click:t.editDict}},[t._v(t._s(t.$t("h.editBtn")))])],1),e("div",{staticClass:"tab-pane-content"},[e("el-row",{attrs:{gutter:20}},t._l(t.dictDetail,(function(i,a){return e("el-col",{key:a,class:i.class,attrs:{span:i.span}},[t._v(t._s(i.val))])})),1)],1)]),e("el-tab-pane",{attrs:{label:t.$t("h.dictionaryItemList"),name:"table"}},[e("div",{staticClass:"head"},[e("el-button",{attrs:{type:"primary",size:"small",disabled:""}},[t._v(t._s(t.$t("h.newBtn")))])],1),e("div",{staticClass:"table"},[e("ds-table",{attrs:{loading:t.detailLoading,tableConfig:t.config,columns:t.detailColumns,tableData:t.detailData},scopedSlots:t._u([{key:"operation",fn:function({scope:i}){return[e("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t.editDictRow(i.row)}}},[t._v(t._s(t.$t("h.editBtn")))]),e("span",{staticClass:"line"}),e("el-button",{attrs:{disabled:"",type:"text",size:"small"},on:{click:function(e){return t.deleteDictRow(i.row)}}},[t._v(t._s(t.$t("h.delBtn")))])]}}])})],1)])],1)],1)]),e("el-dialog",{attrs:{top:"0","custom-class":"editDialog","show-close":!1,visible:t.editOpen},on:{"update:visible":function(e){t.editOpen=e}}},[e("div",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[e("div",{staticClass:"left"},[e("span",[t._v(t._s(t.$t("h.changeBtn")+t.$t("h.Dict")))])]),e("div",{staticClass:"right"},[e("i",{staticClass:"el-icon-close",on:{click:function(e){t.editOpen=!1}}})])]),e("div",{staticClass:"dialog-body"},[e("div",{staticClass:"form"},[e("el-form",{ref:"editFormRef",attrs:{model:t.editForm,rules:t.editRules,"label-width":"100px"}},[e("el-form-item",{attrs:{label:t.$t("h.dictionaryName"),prop:"name"}},[e("el-input",{model:{value:t.editForm.name,callback:function(e){t.$set(t.editForm,"name",e)},expression:"editForm.name"}})],1),e("el-form-item",{attrs:{label:t.$t("h.comment"),prop:"comment"}},[e("el-input",{attrs:{type:"textarea"},model:{value:t.editForm.comment,callback:function(e){t.$set(t.editForm,"comment",e)},expression:"editForm.comment"}})],1)],1)],1),e("div",{staticClass:"btns"},[e("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.submitEditForm}},[t._v(t._s(t.$t("h.confirmBtn")))]),e("el-button",{attrs:{size:"small"}},[t._v(t._s(t.$t("h.cancelBtn")))])],1)])]),e("el-dialog",{attrs:{top:"0","custom-class":"editDialog","show-close":!1,visible:t.editDetailOpen},on:{"update:visible":function(e){t.editDetailOpen=e},closed:t.editDialogClosed}},[e("div",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[e("div",{staticClass:"left"},[e("span",[t._v(t._s(t.$t("h.changeBtn")+t.$t("h.dictionaryDetails")))])]),e("div",{staticClass:"right"},[e("i",{staticClass:"el-icon-close",on:{click:function(e){t.editDetailOpen=!1}}})])]),e("div",{staticClass:"dialog-body"},[e("div",{staticClass:"form"},[e("el-form",{ref:"editDetailFormRef",attrs:{model:t.editDetailForm,rules:t.editDetailRules,"label-width":"100px"}},[e("el-form-item",{attrs:{label:t.$t("h.name"),prop:"value"}},[e("el-input",{model:{value:t.editDetailForm.value,callback:function(e){t.$set(t.editDetailForm,"value",e)},expression:"editDetailForm.value"}})],1)],1)],1),e("div",{staticClass:"btns"},[e("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.submitEditDetailForm}},[t._v(t._s(t.$t("h.confirmBtn")))]),e("el-button",{attrs:{size:"small"}},[t._v(t._s(t.$t("h.cancelBtn")))])],1)])])],1)},s=[],l=i(60983),n=i(93082),o=i(19698),r=i(92003),d=i(89782),c=i(20629),u=i(76080),m=i(79992),h=i(83151),p={components:{DsTable:l.Z,DsPagination:n.Z,DsQueryForm:o.Z,DsQueryFormLeftPanel:r.Z,DsQueryFormRightPanel:d.Z},data(){return{total:0,paginationForm:{currentPage:1,pageSize:20},loading:!1,config:{},columns:[{type:"detail",prop:"name",label:this.$t("h.dictionaryName"),showOverflowTooltip:!0,width:288},{prop:"comment",label:this.$t("h.comment"),showOverflowTooltip:!0,minWidth:(0,m.Uh)(this.$t("h.comment"))},{label:this.$t("h.action"),slotName:"operation",width:200,fixed:"right"}],dicts:[],detailOpen:!1,activeName:"base",dictDetail:[],detailLoading:!1,detailColumns:[{prop:"value",label:this.$t("h.name"),showOverflowTooltip:!0,minWidth:(0,m.Uh)(this.$t("h.name"))},{label:this.$t("h.action"),slotName:"operation",width:(0,m.Uh)(this.$t("h.action")),fixed:"right"}],detailData:[],editOpen:!1,editForm:{dictionaryId:"",name:"",comment:""},editRules:{name:[{required:!0,message:this.$t("h.tips3")+this.$t("h.dictionaryName"),trigger:"blur"}]},editDetailOpen:!1,editDetailForm:{dictionaryId:"",dryId:"",value:""},editDetailRules:{value:[{required:!0,message:this.$t("h.tips3")+this.$t("h.name"),trigger:"blur"}]}}},computed:{...(0,c.rn)(["userInfo"])},methods:{...(0,c.OI)(["SET_ASSETSTATE"]),getDicts(t){this.loading=!0,(0,u.Ys)({func:"S0072",userId:this.userInfo._id,token:this.userInfo.token,requstData:{}}).then((({data:e})=>{if(this.loading=!1,0!=e.code)return this.$message.error(e.data);if(this.dicts=e.data,t){let e=this.dicts.find((e=>e.dictionaryId==t));this.dictDetail=(0,h.UY)(e),this.editForm.dictionaryId=e.dictionaryId,this.editForm.name=e.name,this.editForm.comment=e.comment}})).catch((()=>{this.loading=!1,this.$message.error(this.$t("h.tips18"))}))},getDictDetail(t){this.detailLoading=!0,(0,u.Ys)({func:"S0071",userId:this.userInfo._id,token:this.userInfo.token,requstData:{dictionaryId:t}}).then((({data:e})=>{if(this.detailLoading=!1,0!=e.code)return this.$message.error(e.data);"3ed47c5ae18e42bc894cf1bffb772bdb"==t&&this.SET_ASSETSTATE(e.data),this.detailData=e.data})).catch((()=>{this.detailLoading=!1,this.$message.error(this.$t("h.tips18"))}))},forbiddenDict(t){},deleteDict(t){},async checkTableRowDetail(t){this.dictDetail=(0,h.UY)(t),this.editForm.dictionaryId=t.dictionaryId,this.editForm.name=t.name,this.editForm.comment=t.comment,await this.getDictDetail(t.dictionaryId),this.detailOpen=!0},editDict(){this.editOpen=!0},deleteDictRow(t){},editDictRow(t){this.editDetailForm.dryId=t.dryId,this.editDetailForm.dictionaryId=t.dictionaryId,this.editDetailForm.value=t.value,this.editDetailOpen=!0},submitEditForm(){this.$refs["editFormRef"].validate((t=>{if(!t)return!1;(0,u.Vx)({func:"U0079",userId:this.userInfo._id,token:this.userInfo.token,requstData:{dictionaryId:this.editForm.dictionaryId,name:this.editForm.name,comment:this.editForm.comment,permissonId:92}}).then((({data:t})=>{if(0!=t.code)return this.$message.error(t.data);this.getDicts(this.editForm.dictionaryId),this.$message.success(t.data),this.editOpen=!1})).catch((()=>{this.$message.error(this.$t("h.tips18"))}))}))},submitEditDetailForm(){this.$refs["editDetailFormRef"].validate((t=>{if(!t)return!1;(0,u.Vx)({func:"U0078",userId:this.userInfo._id,token:this.userInfo.token,requstData:{dryId:this.editDetailForm.dryId,dictionaryId:this.editDetailForm.dictionaryId,value:this.editDetailForm.value,permissonId:92}}).then((({data:t})=>{if(0!=t.code)return this.$message.error(t.data);this.editDetailOpen=!1,this.getDictDetail(this.editDetailForm.dictionaryId),this.$message.success(t.data)})).catch((()=>{this.$message.error(this.$t("h.tips18"))}))}))},editDialogClosed(){}},created(){this.getDicts()}},f=p,g=i(1001),b=(0,g.Z)(f,a,s,!1,null,"59eb76f8",null),v=b.exports}}]);