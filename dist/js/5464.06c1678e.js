"use strict";(self["webpackChunk_4010_assetweb"]=self["webpackChunk_4010_assetweb"]||[]).push([[5464],{42950:function(e,t,a){a.d(t,{Z:function(){return u}});var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"ds-default-page"},[t("div",{staticClass:"page-content"},[t("img",{attrs:{src:a(722),alt:""}}),t("p",[e._v(e._s(e.defaultPageTips))])])])},r=[],l={name:"DsDefaultPage",props:{defaultPageImgUrl:{type:String,default:"@/assets/images/empty.png"},defaultPageTips:{type:String,default:"暂无数据"}}},s=l,i=a(1001),o=(0,i.Z)(s,n,r,!1,null,"5bfc8b96",null),u=o.exports},93082:function(e,t,a){a.d(t,{Z:function(){return u}});var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"ds-pagination"},[t("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},r=[],l={name:"DsPagination",data(){return{}},props:{total:{required:!0,type:Number},pageSizes:{type:Array,default(){return[20,50,100]}},page:{type:Number,default:1},limit:{type:Number,default:20},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0}},computed:{currentPage:{get(){return this.page},set(e){this.$emit("update:page",e)}},pageSize:{get(){return this.limit},set(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange(e){this.$emit("pagination",{page:this.currentPage,limit:e})},handleCurrentChange(e){this.$emit("pagination",{page:e,limit:this.pageSize})}}},s=l,i=a(1001),o=(0,i.Z)(s,n,r,!1,null,"2377c114",null),u=o.exports},92003:function(e,t,a){a.d(t,{Z:function(){return u}});var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"left-panel"},[e._t("default")],2)},r=[],l={name:"DsQueryFormLeftPanel"},s=l,i=a(1001),o=(0,i.Z)(s,n,r,!1,null,"71d76034",null),u=o.exports},89782:function(e,t,a){a.d(t,{Z:function(){return u}});var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"right-panel"},[e._t("default")],2)},r=[],l={name:"DsQueryFormRightPanel"},s=l,i=a(1001),o=(0,i.Z)(s,n,r,!1,null,"c6443ba6",null),u=o.exports},19698:function(e,t,a){a.d(t,{Z:function(){return u}});var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"ds-query-form"},[e._t("default")],2)},r=[],l={name:"DsQueryForm"},s=l,i=a(1001),o=(0,i.Z)(s,n,r,!1,null,"6c8bfb78",null),u=o.exports},66403:function(e,t,a){a.d(t,{Z:function(){return u}});var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"ds-search"},[t("el-input",{attrs:{size:"small",placeholder:e.$t("h.keyword"),"prefix-icon":"el-icon-search"},on:{input:e.onInput},model:{value:e.value,callback:function(t){e.value="string"===typeof t?t.trim():t},expression:"value"}},[t("el-button",{attrs:{slot:"suffix",type:"text",size:"small"},on:{click:e.search},slot:"suffix"},[e._v(e._s(e.$t("h.Search")))])],1)],1)},r=[],l={name:"DsSearchBtn",data(){return{}},props:{searchValue:{type:String}},computed:{value:{get(){return this.searchValue},set(e){this.$emit("update:searchValue",e)}}},methods:{search(){this.$emit("search")},onInput(e){""==e&&this.search()}}},s=l,i=a(1001),o=(0,i.Z)(s,n,r,!1,null,"5bd7b965",null),u=o.exports},85464:function(e,t,a){a.r(t),a.d(t,{default:function(){return b}});var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"AnalysisReport"},[t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"head"},[t("ds-query-form",[t("ds-query-form-left-panel",[t("div",{staticClass:"warehouse"},[t("span",[e._v(e._s(e.$t("h.formTips54")))]),t("el-cascader",{staticStyle:{"margin-left":"20px"},attrs:{options:e.warehouseData,props:{checkStrictly:!0}},model:{value:e.warehouseIdData,callback:function(t){e.warehouseIdData=t},expression:"warehouseIdData"}})],1),t("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.getHouseSummaryData(e.warehouseIdData.join(""))}}},[e._v(e._s(e.$t("h.Search")))]),t("el-button",{attrs:{size:"small"}},[e._v(e._s(e.$t("h.export")))])],1),t("ds-query-form-right-panel")],1)],1),t("div",{staticClass:"body"},[t("div",{staticClass:"table"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableDataDisplay,"header-cell-class-name":"table-header","cell-class-name":"table-content",height:"100%",border:"",align:"center"}},[t("el-table-column",{attrs:{prop:"houseName",label:e.$t("h.formTips54"),align:"center"}}),t("el-table-column",{attrs:{prop:"image",label:e.$t("h.formTips62"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"table-image-cell"},[a.row.image?t("el-image",{attrs:{src:a.row.image,"preview-src-list":[a.row.image]}}):t("div",{staticClass:"no-image"},[t("span",[e._v(e._s(e.$t("h.title51")))])])],1)]}}])}),t("el-table-column",{attrs:{prop:"code",label:e.$t("h.title166"),align:"center"}}),t("el-table-column",{attrs:{prop:"substanceName",label:e.$t("h.formTips38"),align:"center"}}),t("el-table-column",{attrs:{prop:"sortName",label:e.$t("h.formTips55"),align:"center"}}),t("el-table-column",{attrs:{prop:"barCode",label:e.$t("h.formTips63"),align:"center"}}),t("el-table-column",{attrs:{prop:"specification",label:e.$t("h.columns27"),align:"center"}}),t("el-table-column",{attrs:{prop:"measureUnit",label:e.$t("h.columns28"),align:"center"}}),t("el-table-column",{attrs:{label:e.$t("h.title158"),align:"center"}},[t("el-table-column",{attrs:{prop:"inAmount",label:e.$t("h.number"),align:"center"}}),t("el-table-column",{attrs:{prop:"inPrice",label:e.$t("h.price"),align:"center"}}),t("el-table-column",{attrs:{prop:"inMoney",label:e.$t("h.columns47"),align:"center"}})],1),t("el-table-column",{attrs:{label:e.$t("h.title159"),align:"center"}},[t("el-table-column",{attrs:{prop:"outAmount",label:e.$t("h.number"),align:"center"}}),t("el-table-column",{attrs:{prop:"outPrice",label:e.$t("h.price"),align:"center"}}),t("el-table-column",{attrs:{prop:"outMoney",label:e.$t("h.columns47"),align:"center"}})],1),t("el-table-column",{attrs:{label:e.$t("h.title161"),align:"center"}},[t("el-table-column",{attrs:{prop:"amount",label:e.$t("h.number"),align:"center"}}),t("el-table-column",{attrs:{prop:"price",label:e.$t("h.price"),align:"center"}}),t("el-table-column",{attrs:{prop:"money",label:e.$t("h.columns47"),align:"center"}})],1),t("template",{slot:"empty"},[t("ds-default-page",{attrs:{defaultPageImgUrl:e.defaultPageImgUrl,defaultPageTips:e.defaultPageTips}})],1)],2)],1),t("div",{staticClass:"pagination"},[t("ds-pagination",{attrs:{small:"",total:e.total,page:e.paginationForm.currentPage,limit:e.paginationForm.pageSize},on:{"update:page":function(t){return e.$set(e.paginationForm,"currentPage",t)},"update:limit":function(t){return e.$set(e.paginationForm,"pageSize",t)},pagination:e.changeSizePage}})],1)])])],1)},r=[],l=(a(57658),a(19698)),s=a(92003),i=a(89782),o=a(66403),u=a(93082),c=a(42950),p=a(76080),g=a(20629),h={components:{DsQueryForm:l.Z,DsQueryFormLeftPanel:s.Z,DsQueryFormRightPanel:i.Z,DsSearchBtn:o.Z,DsPagination:u.Z,DsDefaultPage:c.Z},data(){return{warehouseIdData:[],warehouseData:[],tableData:[],paginationForm:{currentPage:1,pageSize:20},defaultPageImgUrl:"",defaultPageTips:"",loading:!1}},computed:{...(0,g.rn)(["userInfo"]),tableDataDisplay(){let e=[],t=0,a=this.paginationForm.pageSize-1;if(1==this.paginationForm.currentPage)for(let n=t;n<a;n++)this.tableData[n]&&e.push(this.tableData[n]);else for(let n=a*(this.paginationForm.currentPage-1);n<a*this.paginationForm.currentPage;n++)this.tableData[n]&&e.push(this.tableData[n]);return e},total(){return this.tableData.length}},methods:{changeSizePage(e){this.paginationForm.currentPage=e.page,this.paginationForm.pageSize=e.limit},getWarehouseData(){(0,p.C3)({func:"ST0001",userId:this.userInfo._id,token:this.userInfo.token,requstData:{}}).then((({data:e})=>{if("-1"==e.code)return this.$message.error(e.data);if(e.data){let t=[];e.data.forEach((e=>{e.disabled||"0"!=e.state||t.push({name:e.name,label:e.name,value:e.houseId,state:e.state,subId:e.subId})})),this.warehouseData=this.tree(t,"-")}})).catch((e=>{this.$message.error(e)}))},tree(e,t){const a=[];return e.forEach((n=>{if(n.subId==t){const t=this.tree(e,n.value);t.length>0&&(n.children=t),a.push(n)}})),a},getSummaryData(e){let t={};e&&e.length&&(t.houseId=e),(0,p.C3)({func:"SR0000",userId:this.userInfo._id,token:this.userInfo.token,requstData:t}).then((({data:e})=>{if("-1"==e.code)return this.$message.error(e.data);e.data?(this.tableData=e.data,this.tableData.forEach((e=>{e.houseName||(e.houseName=this.$t("h.title167")),e.image&&(e.image=window.$EXCEL_URL+"image/"+e.image)}))):this.tableData=[]})).catch((e=>{this.$message.error(e)}))},getHouseSummaryData(e){let t={};this.loading=!0,e&&e.length&&(t.house_id=e),(0,p.C3)({func:"SR0000",userId:this.userInfo._id,token:this.userInfo.token,requstData:t}).then((({data:e})=>{if("-1"==e.code)return this.$message.error(e.data);e.data?(this.tableData=e.data,this.tableData.forEach((e=>{e.houseName||(e.houseName=this.$t("h.title167")),e.image&&(e.image=window.$EXCEL_URL+"image/"+e.image)})),this.loading=!1):(this.tableData=[],this.loading=!1)})).catch((e=>{this.$message.error(e)}))}},created(){this.getWarehouseData(),this.getSummaryData()}},m=h,d=a(1001),f=(0,d.Z)(m,n,r,!1,null,"2e238641",null),b=f.exports},722:function(e,t,a){e.exports=a.p+"img/empty.cd23f652.png"}}]);